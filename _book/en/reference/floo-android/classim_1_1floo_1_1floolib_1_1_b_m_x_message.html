
<!DOCTYPE HTML>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>LANYING.IM - Professional SDK, Monthly Charged Private Cloud</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="description" content>
        <meta name="generator" content="GitBook 3.2.3">
        <meta name="author" content="jinhai">
        
        
    
    <link rel="stylesheet" href="../../../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../../../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
                
                <link rel="stylesheet" href="../../../gitbook/gitbook-plugin-prism/prism-base16-ateliersulphurpool.light.css">
                
            
                
                <link rel="stylesheet" href="../../../gitbook/gitbook-plugin-lanying-code-snippet/lanying-code-snippet.css">
                
            
                
                <link rel="stylesheet" href="../../../gitbook/gitbook-plugin-search-plus/search.css">
                
            
                
                <link rel="stylesheet" href="../../../gitbook/gitbook-plugin-advanced-emoji/emoji-website.css">
                
            
                
                <link rel="stylesheet" href="../../../gitbook/gitbook-plugin-expandable-chapters-small/expandable-chapters-small.css">
                
            
                
                <link rel="stylesheet" href="../../../gitbook/gitbook-plugin-tbfed-pagefooter/footer.css">
                
            
                
                <link rel="stylesheet" href="../../../gitbook/gitbook-plugin-versions-select/plugin.css">
                
            
                
                <link rel="stylesheet" href="../../../gitbook/gitbook-plugin-terminal/plugin.css">
                
            
                
                <link rel="stylesheet" href="../../../gitbook/gitbook-plugin-code/plugin.css">
                
            
                
                <link rel="stylesheet" href="../../../gitbook/gitbook-plugin-splitter/splitter.css">
                
            
                
                <link rel="stylesheet" href="../../../gitbook/gitbook-plugin-image-captions/image-captions.css">
                
            
                
                <link rel="stylesheet" href="../../../gitbook/gitbook-plugin-auto-scroll-table/website.css">
                
            
                
                <link rel="stylesheet" href="../../../gitbook/gitbook-plugin-intopic-toc/style.css">
                
            
        

    

    
        
        <link rel="stylesheet" href="../../assets/styles/website.css">
        
    

        
    
    
    
    
    
    <meta name="keywords" content="Lanying IM, Maximtop, IM SDK, Instant Messaging, IM Cloud, IM Cloud Service, Mobile IM, Open Source IM, Enterprise IM, Chat Software, Mobile Customer Service, Online Customer Service, IM Business Scenario, APP Social, Developer Service, Live Chatroom, Live Audio/Video, Audio/Video, Live Platform, Maximtop Anti-spam, Content Security">
    
    
    
    
    <meta name="HandheldFriendly" content="true">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../../../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="classim_1_1floo_1_1floolib_1_1_b_m_x_message_attachment.html">
    
    
    <link rel="prev" href="classim_1_1floo_1_1floolib_1_1_b_m_x_location_attachment.html">
    


    <link rel="canonical" href="https://docs.lanyingim.com/reference/floo-android/classim_1_1floo_1_1floolib_1_1_b_m_x_message.html">

    
        <link rel="shortcut icon" href="../../assets/favicon.ico" type="image/x-icon">
    
    
        <link rel="bookmark" href="../../assets/favicon.ico" type="image/x-icon">
    
    
    

    <style>
    @media only screen and (max-width: 640px) {
        .book-header .hidden-mobile {
            display: none;
        }
    }
    </style>
    <script>
        window["gitbook-plugin-github-buttons"] = {"repo":"maxim-top/im.gitbook","types":["star"],"size":"small"};
    </script>

    </head>
    <body>
        
<div class="book">
    <div class="book-summary"><a href="https://www.lanyingim.com" class="book-logo-root"><div class="book-logo" style="text-align: center; padding: 20px;"><img src="/assets/lanying-logo-color-en.png" style="height: 35px;align:left;"></div></a>
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search">
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../../">
            
                <a href="../../">
            
                    
                    Instant Messaging Development Guide (IM)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="../../quick-start/">
            
                <a href="../../quick-start/">
            
                    
                    Quick Start
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1" data-path="../../quick-start/floo-ios-quick-start.html">
            
                <a href="../../quick-start/floo-ios-quick-start.html">
            
                    
                    IOS SDK Quick Start
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2" data-path="../../quick-start/floo-android-quick-start.html">
            
                <a href="../../quick-start/floo-android-quick-start.html">
            
                    
                    Android SDK Quick Start
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.3" data-path="../../quick-start/floo-quick-start.html">
            
                <a href="../../quick-start/floo-quick-start.html">
            
                    
                    C++ SDK Quick Start
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4" data-path="../../quick-start/floo-web-quick-start.html">
            
                <a href="../../quick-start/floo-web-quick-start.html">
            
                    
                    Web SDK Quick Start
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.5" data-path="../../quick-start/server-api-quick-start.html">
            
                <a href="../../quick-start/server-api-quick-start.html">
            
                    
                    Server API Development Guide
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.6" data-path="../../quick-start/push-dev-guide.html">
            
                <a href="../../quick-start/push-dev-guide.html">
            
                    
                    Push Development Guide
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.7" data-path="../../quick-start/how-to-deploy-private-cloud.html">
            
                <a href="../../quick-start/how-to-deploy-private-cloud.html">
            
                    
                    Private Cloud Deployment
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="../">
            
                <a href="../">
            
                    
                    API Reference
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" data-path="../floo-ios.html">
            
                <a href="../floo-ios.html">
            
                    
                    IOS SDK API (floo-ios)
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1.1" data-path="../floo-ios/classes.html">
            
                <a href="../floo-ios/classes.html">
            
                    
                    Classes
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1.1.1" data-path="../floo-ios/Classes/BMXChatService.html">
            
                <a href="../floo-ios/Classes/BMXChatService.html">
            
                    
                    BMXChatService
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.1.2" data-path="../floo-ios/Classes/BMXClient.html">
            
                <a href="../floo-ios/Classes/BMXClient.html">
            
                    
                    BMXClient
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.1.3" data-path="../floo-ios/Classes/BMXConversation.html">
            
                <a href="../floo-ios/Classes/BMXConversation.html">
            
                    
                    BMXConversation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.1.4" data-path="../floo-ios/Classes/BMXDevice.html">
            
                <a href="../floo-ios/Classes/BMXDevice.html">
            
                    
                    BMXDevice
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.1.5" data-path="../floo-ios/Classes/BMXFileAttachment.html">
            
                <a href="../floo-ios/Classes/BMXFileAttachment.html">
            
                    
                    BMXFileAttachment
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.1.6" data-path="../floo-ios/Classes/BMXGroup.html">
            
                <a href="../floo-ios/Classes/BMXGroup.html">
            
                    
                    BMXGroup
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.1.7" data-path="../floo-ios/Classes/BMXGroupAnnouncement.html">
            
                <a href="../floo-ios/Classes/BMXGroupAnnouncement.html">
            
                    
                    BMXGroupAnnouncement
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.1.8" data-path="../floo-ios/Classes/BMXGroupApplication.html">
            
                <a href="../floo-ios/Classes/BMXGroupApplication.html">
            
                    
                    BMXGroupApplication
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.1.9" data-path="../floo-ios/Classes/BMXGroupBannedMember.html">
            
                <a href="../floo-ios/Classes/BMXGroupBannedMember.html">
            
                    
                    BMXGroupBannedMember
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.1.10" data-path="../floo-ios/Classes/BMXGroupInvitation.html">
            
                <a href="../floo-ios/Classes/BMXGroupInvitation.html">
            
                    
                    BMXGroupInvitation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.1.11" data-path="../floo-ios/Classes/BMXGroupMember.html">
            
                <a href="../floo-ios/Classes/BMXGroupMember.html">
            
                    
                    BMXGroupMember
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.1.12" data-path="../floo-ios/Classes/BMXGroupService.html">
            
                <a href="../floo-ios/Classes/BMXGroupService.html">
            
                    
                    BMXGroupService
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.1.13" data-path="../floo-ios/Classes/BMXGroupServiceCreateGroupOptions.html">
            
                <a href="../floo-ios/Classes/BMXGroupServiceCreateGroupOptions.html">
            
                    
                    BMXGroupServiceCreateGroupOptions
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.1.14" data-path="../floo-ios/Classes/BMXGroupSharedFile.html">
            
                <a href="../floo-ios/Classes/BMXGroupSharedFile.html">
            
                    
                    BMXGroupSharedFile
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.1.15" data-path="../floo-ios/Classes/BMXImageAttachment.html">
            
                <a href="../floo-ios/Classes/BMXImageAttachment.html">
            
                    
                    BMXImageAttachment
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.1.16" data-path="../floo-ios/Classes/BMXLocationAttachment.html">
            
                <a href="../floo-ios/Classes/BMXLocationAttachment.html">
            
                    
                    BMXLocationAttachment
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.1.17" data-path="../floo-ios/Classes/BMXMessage.html">
            
                <a href="../floo-ios/Classes/BMXMessage.html">
            
                    
                    BMXMessage
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.1.18" data-path="../floo-ios/Classes/BMXMessageAttachment.html">
            
                <a href="../floo-ios/Classes/BMXMessageAttachment.html">
            
                    
                    BMXMessageAttachment
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.1.19" data-path="../floo-ios/Classes/BMXMessageAttachmentSize.html">
            
                <a href="../floo-ios/Classes/BMXMessageAttachmentSize.html">
            
                    
                    BMXMessageAttachmentSize
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.1.20" data-path="../floo-ios/Classes/BMXMessageConfig.html">
            
                <a href="../floo-ios/Classes/BMXMessageConfig.html">
            
                    
                    BMXMessageConfig
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.1.21" data-path="../floo-ios/Classes/BMXPushService.html">
            
                <a href="../floo-ios/Classes/BMXPushService.html">
            
                    
                    BMXPushService
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.1.22" data-path="../floo-ios/Classes/BMXPushUserProfile.html">
            
                <a href="../floo-ios/Classes/BMXPushUserProfile.html">
            
                    
                    BMXPushUserProfile
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.1.23" data-path="../floo-ios/Classes/BMXPushUserProfileMessagePushSetting.html">
            
                <a href="../floo-ios/Classes/BMXPushUserProfileMessagePushSetting.html">
            
                    
                    BMXPushUserProfileMessagePushSetting
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.1.24" data-path="../floo-ios/Classes/BMXRTCEngine.html">
            
                <a href="../floo-ios/Classes/BMXRTCEngine.html">
            
                    
                    BMXRTCEngine
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.1.25" data-path="../floo-ios/Classes/BMXRTCService.html">
            
                <a href="../floo-ios/Classes/BMXRTCService.html">
            
                    
                    BMXRTCService
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.1.26" data-path="../floo-ios/Classes/BMXRoomAuth.html">
            
                <a href="../floo-ios/Classes/BMXRoomAuth.html">
            
                    
                    BMXRoomAuth
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.1.27" data-path="../floo-ios/Classes/BMXRosterItem.html">
            
                <a href="../floo-ios/Classes/BMXRosterItem.html">
            
                    
                    BMXRosterItem
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.1.28" data-path="../floo-ios/Classes/BMXRosterService.html">
            
                <a href="../floo-ios/Classes/BMXRosterService.html">
            
                    
                    BMXRosterService
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.1.29" data-path="../floo-ios/Classes/BMXRosterServiceApplication.html">
            
                <a href="../floo-ios/Classes/BMXRosterServiceApplication.html">
            
                    
                    BMXRosterServiceApplication
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.1.30" data-path="../floo-ios/Classes/BMXSDKConfig.html">
            
                <a href="../floo-ios/Classes/BMXSDKConfig.html">
            
                    
                    BMXSDKConfig
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.1.31" data-path="../floo-ios/Classes/BMXSDKConfigHostConfig.html">
            
                <a href="../floo-ios/Classes/BMXSDKConfigHostConfig.html">
            
                    
                    BMXSDKConfigHostConfig
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.1.32" data-path="../floo-ios/Classes/BMXStream.html">
            
                <a href="../floo-ios/Classes/BMXStream.html">
            
                    
                    BMXStream
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.1.33" data-path="../floo-ios/Classes/BMXUserProfile.html">
            
                <a href="../floo-ios/Classes/BMXUserProfile.html">
            
                    
                    BMXUserProfile
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.1.34" data-path="../floo-ios/Classes/BMXUserProfileAuthQuestion.html">
            
                <a href="../floo-ios/Classes/BMXUserProfileAuthQuestion.html">
            
                    
                    BMXUserProfileAuthQuestion
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.1.35" data-path="../floo-ios/Classes/BMXUserProfileMessageSetting.html">
            
                <a href="../floo-ios/Classes/BMXUserProfileMessageSetting.html">
            
                    
                    BMXUserProfileMessageSetting
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.1.36" data-path="../floo-ios/Classes/BMXUserService.html">
            
                <a href="../floo-ios/Classes/BMXUserService.html">
            
                    
                    BMXUserService
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.1.37" data-path="../floo-ios/Classes/BMXVideoAttachment.html">
            
                <a href="../floo-ios/Classes/BMXVideoAttachment.html">
            
                    
                    BMXVideoAttachment
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.1.38" data-path="../floo-ios/Classes/BMXVideoCanvas.html">
            
                <a href="../floo-ios/Classes/BMXVideoCanvas.html">
            
                    
                    BMXVideoCanvas
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.1.39" data-path="../floo-ios/Classes/BMXVideoConfig.html">
            
                <a href="../floo-ios/Classes/BMXVideoConfig.html">
            
                    
                    BMXVideoConfig
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.1.40" data-path="../floo-ios/Classes/BMXVoiceAttachment.html">
            
                <a href="../floo-ios/Classes/BMXVoiceAttachment.html">
            
                    
                    BMXVoiceAttachment
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.1.41" data-path="../floo-ios/Classes/RTCEngineManager.html">
            
                <a href="../floo-ios/Classes/RTCEngineManager.html">
            
                    
                    RTCEngineManager
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3.1.2" data-path="../floo-ios/protocols.html">
            
                <a href="../floo-ios/protocols.html">
            
                    
                    Protocols
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1.2.1" data-path="../floo-ios/Protocols/BMXChatServiceProtocol.html">
            
                <a href="../floo-ios/Protocols/BMXChatServiceProtocol.html">
            
                    
                    BMXChatServiceProtocol
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.2.2" data-path="../floo-ios/Protocols/BMXGroupServiceProtocol.html">
            
                <a href="../floo-ios/Protocols/BMXGroupServiceProtocol.html">
            
                    
                    BMXGroupServiceProtocol
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.2.3" data-path="../floo-ios/Protocols/BMXPushServiceProtocol.html">
            
                <a href="../floo-ios/Protocols/BMXPushServiceProtocol.html">
            
                    
                    BMXPushServiceProtocol
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.2.4" data-path="../floo-ios/Protocols/BMXRTCEngineProtocol.html">
            
                <a href="../floo-ios/Protocols/BMXRTCEngineProtocol.html">
            
                    
                    BMXRTCEngineProtocol
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.2.5" data-path="../floo-ios/Protocols/BMXRTCServiceProtocol.html">
            
                <a href="../floo-ios/Protocols/BMXRTCServiceProtocol.html">
            
                    
                    BMXRTCServiceProtocol
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.2.6" data-path="../floo-ios/Protocols/BMXRosterServiceProtocol.html">
            
                <a href="../floo-ios/Protocols/BMXRosterServiceProtocol.html">
            
                    
                    BMXRosterServiceProtocol
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.2.7" data-path="../floo-ios/Protocols/BMXUserServiceProtocol.html">
            
                <a href="../floo-ios/Protocols/BMXUserServiceProtocol.html">
            
                    
                    BMXUserServiceProtocol
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3.1.3" data-path="../floo-ios/constants.html">
            
                <a href="../floo-ios/constants.html">
            
                    
                    Constants
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1.3.1" data-path="../floo-ios/Constants/BMXChatService_ThumbnailStrategy.html">
            
                <a href="../floo-ios/Constants/BMXChatService_ThumbnailStrategy.html">
            
                    
                    BMXChatService_ThumbnailStrategy
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.3.2" data-path="../floo-ios/Constants/BMXClientType.html">
            
                <a href="../floo-ios/Constants/BMXClientType.html">
            
                    
                    BMXClientType
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.3.3" data-path="../floo-ios/Constants/BMXConnectStatus.html">
            
                <a href="../floo-ios/Constants/BMXConnectStatus.html">
            
                    
                    BMXConnectStatus
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.3.4" data-path="../floo-ios/Constants/BMXConversation_Direction.html">
            
                <a href="../floo-ios/Constants/BMXConversation_Direction.html">
            
                    
                    BMXConversation_Direction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.3.5" data-path="../floo-ios/Constants/BMXConversation_Type.html">
            
                <a href="../floo-ios/Constants/BMXConversation_Type.html">
            
                    
                    BMXConversation_Type
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.3.6" data-path="../floo-ios/Constants/BMXErrorCode.html">
            
                <a href="../floo-ios/Constants/BMXErrorCode.html">
            
                    
                    BMXErrorCode
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.3.7" data-path="../floo-ios/Constants/BMXGroup_ApplicationStatus.html">
            
                <a href="../floo-ios/Constants/BMXGroup_ApplicationStatus.html">
            
                    
                    BMXGroup_ApplicationStatus
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.3.8" data-path="../floo-ios/Constants/BMXGroup_GroupStatus.html">
            
                <a href="../floo-ios/Constants/BMXGroup_GroupStatus.html">
            
                    
                    BMXGroup_GroupStatus
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.3.9" data-path="../floo-ios/Constants/BMXGroup_GroupType.html">
            
                <a href="../floo-ios/Constants/BMXGroup_GroupType.html">
            
                    
                    BMXGroup_GroupType
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.3.10" data-path="../floo-ios/Constants/BMXGroup_InvitationStatus.html">
            
                <a href="../floo-ios/Constants/BMXGroup_InvitationStatus.html">
            
                    
                    BMXGroup_InvitationStatus
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.3.11" data-path="../floo-ios/Constants/BMXGroup_InviteMode.html">
            
                <a href="../floo-ios/Constants/BMXGroup_InviteMode.html">
            
                    
                    BMXGroup_InviteMode
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.3.12" data-path="../floo-ios/Constants/BMXGroup_JoinAuthMode.html">
            
                <a href="../floo-ios/Constants/BMXGroup_JoinAuthMode.html">
            
                    
                    BMXGroup_JoinAuthMode
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.3.13" data-path="../floo-ios/Constants/BMXGroup_MemberRoleType.html">
            
                <a href="../floo-ios/Constants/BMXGroup_MemberRoleType.html">
            
                    
                    BMXGroup_MemberRoleType
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.3.14" data-path="../floo-ios/Constants/BMXGroup_ModifyMode.html">
            
                <a href="../floo-ios/Constants/BMXGroup_ModifyMode.html">
            
                    
                    BMXGroup_ModifyMode
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.3.15" data-path="../floo-ios/Constants/BMXGroup_MsgMuteMode.html">
            
                <a href="../floo-ios/Constants/BMXGroup_MsgMuteMode.html">
            
                    
                    BMXGroup_MsgMuteMode
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.3.16" data-path="../floo-ios/Constants/BMXGroup_MsgPushMode.html">
            
                <a href="../floo-ios/Constants/BMXGroup_MsgPushMode.html">
            
                    
                    BMXGroup_MsgPushMode
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.3.17" data-path="../floo-ios/Constants/BMXGroup_UpdateInfoType.html">
            
                <a href="../floo-ios/Constants/BMXGroup_UpdateInfoType.html">
            
                    
                    BMXGroup_UpdateInfoType
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.3.18" data-path="../floo-ios/Constants/BMXLogLevel.html">
            
                <a href="../floo-ios/Constants/BMXLogLevel.html">
            
                    
                    BMXLogLevel
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.3.19" data-path="../floo-ios/Constants/BMXMessageAttachment_DownloadStatus.html">
            
                <a href="../floo-ios/Constants/BMXMessageAttachment_DownloadStatus.html">
            
                    
                    BMXMessageAttachment_DownloadStatus
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.3.20" data-path="../floo-ios/Constants/BMXMessageAttachment_Type.html">
            
                <a href="../floo-ios/Constants/BMXMessageAttachment_Type.html">
            
                    
                    BMXMessageAttachment_Type
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.3.21" data-path="../floo-ios/Constants/BMXMessageConfig_BadgeCountType.html">
            
                <a href="../floo-ios/Constants/BMXMessageConfig_BadgeCountType.html">
            
                    
                    BMXMessageConfig_BadgeCountType
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.3.22" data-path="../floo-ios/Constants/BMXMessageConfig_RTCCallType.html">
            
                <a href="../floo-ios/Constants/BMXMessageConfig_RTCCallType.html">
            
                    
                    BMXMessageConfig_RTCCallType
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.3.23" data-path="../floo-ios/Constants/BMXMessageConfig_RTCRoomType.html">
            
                <a href="../floo-ios/Constants/BMXMessageConfig_RTCRoomType.html">
            
                    
                    BMXMessageConfig_RTCRoomType
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.3.24" data-path="../floo-ios/Constants/BMXMessage_ContentType.html">
            
                <a href="../floo-ios/Constants/BMXMessage_ContentType.html">
            
                    
                    BMXMessage_ContentType
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.3.25" data-path="../floo-ios/Constants/BMXMessage_DeliveryQos.html">
            
                <a href="../floo-ios/Constants/BMXMessage_DeliveryQos.html">
            
                    
                    BMXMessage_DeliveryQos
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.3.26" data-path="../floo-ios/Constants/BMXMessage_DeliveryStatus.html">
            
                <a href="../floo-ios/Constants/BMXMessage_DeliveryStatus.html">
            
                    
                    BMXMessage_DeliveryStatus
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.3.27" data-path="../floo-ios/Constants/BMXMessage_MessageType.html">
            
                <a href="../floo-ios/Constants/BMXMessage_MessageType.html">
            
                    
                    BMXMessage_MessageType
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.3.28" data-path="../floo-ios/Constants/BMXNetworkType.html">
            
                <a href="../floo-ios/Constants/BMXNetworkType.html">
            
                    
                    BMXNetworkType
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.3.29" data-path="../floo-ios/Constants/BMXPushEnvironmentType.html">
            
                <a href="../floo-ios/Constants/BMXPushEnvironmentType.html">
            
                    
                    BMXPushEnvironmentType
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.3.30" data-path="../floo-ios/Constants/BMXPushProviderType.html">
            
                <a href="../floo-ios/Constants/BMXPushProviderType.html">
            
                    
                    BMXPushProviderType
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.3.31" data-path="../floo-ios/Constants/BMXPushService_PushDirection.html">
            
                <a href="../floo-ios/Constants/BMXPushService_PushDirection.html">
            
                    
                    BMXPushService_PushDirection
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.3.32" data-path="../floo-ios/Constants/BMXPushService_PushSdkStatus.html">
            
                <a href="../floo-ios/Constants/BMXPushService_PushSdkStatus.html">
            
                    
                    BMXPushService_PushSdkStatus
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.3.33" data-path="../floo-ios/Constants/BMXRenderMode.html">
            
                <a href="../floo-ios/Constants/BMXRenderMode.html">
            
                    
                    BMXRenderMode
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.3.34" data-path="../floo-ios/Constants/BMXRoomType.html">
            
                <a href="../floo-ios/Constants/BMXRoomType.html">
            
                    
                    BMXRoomType
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.3.35" data-path="../floo-ios/Constants/BMXRosterItem_AddFriendAuthMode.html">
            
                <a href="../floo-ios/Constants/BMXRosterItem_AddFriendAuthMode.html">
            
                    
                    BMXRosterItem_AddFriendAuthMode
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.3.36" data-path="../floo-ios/Constants/BMXRosterItem_RosterRelation.html">
            
                <a href="../floo-ios/Constants/BMXRosterItem_RosterRelation.html">
            
                    
                    BMXRosterItem_RosterRelation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.3.37" data-path="../floo-ios/Constants/BMXRosterService_ApplicationStatus.html">
            
                <a href="../floo-ios/Constants/BMXRosterService_ApplicationStatus.html">
            
                    
                    BMXRosterService_ApplicationStatus
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.3.38" data-path="../floo-ios/Constants/BMXSignInStatus.html">
            
                <a href="../floo-ios/Constants/BMXSignInStatus.html">
            
                    
                    BMXSignInStatus
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.3.39" data-path="../floo-ios/Constants/BMXUserProfile_AddFriendAuthMode.html">
            
                <a href="../floo-ios/Constants/BMXUserProfile_AddFriendAuthMode.html">
            
                    
                    BMXUserProfile_AddFriendAuthMode
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.3.40" data-path="../floo-ios/Constants/BMXUserProfile_UserCategory.html">
            
                <a href="../floo-ios/Constants/BMXUserProfile_UserCategory.html">
            
                    
                    BMXUserProfile_UserCategory
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.3.41" data-path="../floo-ios/Constants/BMXVideoMediaType.html">
            
                <a href="../floo-ios/Constants/BMXVideoMediaType.html">
            
                    
                    BMXVideoMediaType
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.3.42" data-path="../floo-ios/Constants/BMXVideoProfile.html">
            
                <a href="../floo-ios/Constants/BMXVideoProfile.html">
            
                    
                    BMXVideoProfile
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3.2" data-path="../floo-android.html">
            
                <a href="../floo-android.html">
            
                    
                    Android SDK API (floo-android)
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.2.1" data-path="classim_1_1floo_1_1floolib_1_1_b_m_x_chat_manager.html">
            
                <a href="classim_1_1floo_1_1floolib_1_1_b_m_x_chat_manager.html">
            
                    
                    im::floo::floolib::BMXChatManager
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2.2" data-path="classim_1_1floo_1_1floolib_1_1_b_m_x_chat_service.html">
            
                <a href="classim_1_1floo_1_1floolib_1_1_b_m_x_chat_service.html">
            
                    
                    im::floo::floolib::BMXChatService
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2.3" data-path="classim_1_1floo_1_1floolib_1_1_b_m_x_chat_service_listener.html">
            
                <a href="classim_1_1floo_1_1floolib_1_1_b_m_x_chat_service_listener.html">
            
                    
                    im::floo::floolib::BMXChatServiceListener
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2.4" data-path="classim_1_1floo_1_1floolib_1_1_b_m_x_client.html">
            
                <a href="classim_1_1floo_1_1floolib_1_1_b_m_x_client.html">
            
                    
                    im::floo::floolib::BMXClient
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2.5" data-path="classim_1_1floo_1_1floolib_1_1_b_m_x_conversation.html">
            
                <a href="classim_1_1floo_1_1floolib_1_1_b_m_x_conversation.html">
            
                    
                    im::floo::floolib::BMXConversation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2.6" data-path="classim_1_1floo_1_1floolib_1_1_b_m_x_device.html">
            
                <a href="classim_1_1floo_1_1floolib_1_1_b_m_x_device.html">
            
                    
                    im::floo::floolib::BMXDevice
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2.7" data-path="classim_1_1floo_1_1floolib_1_1_b_m_x_file_attachment.html">
            
                <a href="classim_1_1floo_1_1floolib_1_1_b_m_x_file_attachment.html">
            
                    
                    im::floo::floolib::BMXFileAttachment
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2.8" data-path="classim_1_1floo_1_1floolib_1_1_b_m_x_group.html">
            
                <a href="classim_1_1floo_1_1floolib_1_1_b_m_x_group.html">
            
                    
                    im::floo::floolib::BMXGroup
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.2.8.1" data-path="classim_1_1floo_1_1floolib_1_1_b_m_x_group_1_1_announcement.html">
            
                <a href="classim_1_1floo_1_1floolib_1_1_b_m_x_group_1_1_announcement.html">
            
                    
                    Announcement
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2.8.2" data-path="classim_1_1floo_1_1floolib_1_1_b_m_x_group_1_1_application.html">
            
                <a href="classim_1_1floo_1_1floolib_1_1_b_m_x_group_1_1_application.html">
            
                    
                    Application
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3.2.9" data-path="classim_1_1floo_1_1floolib_1_1_b_m_x_group_1_1_banned_member.html">
            
                <a href="classim_1_1floo_1_1floolib_1_1_b_m_x_group_1_1_banned_member.html">
            
                    
                    im::floo::floolib::BMXGroup::BannedMember
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2.10" data-path="classim_1_1floo_1_1floolib_1_1_b_m_x_group_1_1_invitation.html">
            
                <a href="classim_1_1floo_1_1floolib_1_1_b_m_x_group_1_1_invitation.html">
            
                    
                    im::floo::floolib::BMXGroup::Invitation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2.11" data-path="classim_1_1floo_1_1floolib_1_1_b_m_x_group_1_1_member.html">
            
                <a href="classim_1_1floo_1_1floolib_1_1_b_m_x_group_1_1_member.html">
            
                    
                    im::floo::floolib::BMXGroup::Member
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2.12" data-path="classim_1_1floo_1_1floolib_1_1_b_m_x_group_1_1_shared_file.html">
            
                <a href="classim_1_1floo_1_1floolib_1_1_b_m_x_group_1_1_shared_file.html">
            
                    
                    im::floo::floolib::BMXGroup::SharedFile
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2.13" data-path="classim_1_1floo_1_1floolib_1_1_b_m_x_group_manager.html">
            
                <a href="classim_1_1floo_1_1floolib_1_1_b_m_x_group_manager.html">
            
                    
                    im::floo::floolib::BMXGroupManager
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2.14" data-path="classim_1_1floo_1_1floolib_1_1_b_m_x_group_service.html">
            
                <a href="classim_1_1floo_1_1floolib_1_1_b_m_x_group_service.html">
            
                    
                    im::floo::floolib::BMXGroupService
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.2.14.1" data-path="classim_1_1floo_1_1floolib_1_1_b_m_x_group_service_1_1_create_group_options.html">
            
                <a href="classim_1_1floo_1_1floolib_1_1_b_m_x_group_service_1_1_create_group_options.html">
            
                    
                    CreateGroupOptions
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3.2.15" data-path="classim_1_1floo_1_1floolib_1_1_b_m_x_group_service_listener.html">
            
                <a href="classim_1_1floo_1_1floolib_1_1_b_m_x_group_service_listener.html">
            
                    
                    im::floo::floolib::BMXGroupServiceListener
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2.16" data-path="classim_1_1floo_1_1floolib_1_1_b_m_x_image_attachment.html">
            
                <a href="classim_1_1floo_1_1floolib_1_1_b_m_x_image_attachment.html">
            
                    
                    im::floo::floolib::BMXImageAttachment
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2.17" data-path="classim_1_1floo_1_1floolib_1_1_b_m_x_location_attachment.html">
            
                <a href="classim_1_1floo_1_1floolib_1_1_b_m_x_location_attachment.html">
            
                    
                    im::floo::floolib::BMXLocationAttachment
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.3.2.18" data-path="classim_1_1floo_1_1floolib_1_1_b_m_x_message.html">
            
                <a href="classim_1_1floo_1_1floolib_1_1_b_m_x_message.html">
            
                    
                    im::floo::floolib::BMXMessage
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2.19" data-path="classim_1_1floo_1_1floolib_1_1_b_m_x_message_attachment.html">
            
                <a href="classim_1_1floo_1_1floolib_1_1_b_m_x_message_attachment.html">
            
                    
                    im::floo::floolib::BMXMessageAttachment
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2.20" data-path="classim_1_1floo_1_1floolib_1_1_b_m_x_message_attachment_1_1_size.html">
            
                <a href="classim_1_1floo_1_1floolib_1_1_b_m_x_message_attachment_1_1_size.html">
            
                    
                    im::floo::floolib::BMXMessageAttachment::Size
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2.21" data-path="classim_1_1floo_1_1floolib_1_1_b_m_x_message_config.html">
            
                <a href="classim_1_1floo_1_1floolib_1_1_b_m_x_message_config.html">
            
                    
                    im::floo::floolib::BMXMessageConfig
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2.22" data-path="classim_1_1floo_1_1floolib_1_1_b_m_x_network_listener.html">
            
                <a href="classim_1_1floo_1_1floolib_1_1_b_m_x_network_listener.html">
            
                    
                    im::floo::floolib::BMXNetworkListener
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2.23" data-path="classim_1_1floo_1_1floolib_1_1_b_m_x_push_manager.html">
            
                <a href="classim_1_1floo_1_1floolib_1_1_b_m_x_push_manager.html">
            
                    
                    im::floo::floolib::BMXPushManager
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2.24" data-path="classim_1_1floo_1_1floolib_1_1_b_m_x_push_service.html">
            
                <a href="classim_1_1floo_1_1floolib_1_1_b_m_x_push_service.html">
            
                    
                    im::floo::floolib::BMXPushService
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2.25" data-path="classim_1_1floo_1_1floolib_1_1_b_m_x_push_service_listener.html">
            
                <a href="classim_1_1floo_1_1floolib_1_1_b_m_x_push_service_listener.html">
            
                    
                    im::floo::floolib::BMXPushServiceListener
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2.26" data-path="classim_1_1floo_1_1floolib_1_1_b_m_x_push_user_profile.html">
            
                <a href="classim_1_1floo_1_1floolib_1_1_b_m_x_push_user_profile.html">
            
                    
                    im::floo::floolib::BMXPushUserProfile
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.2.26.1" data-path="classim_1_1floo_1_1floolib_1_1_b_m_x_push_user_profile_1_1_message_push_setting.html">
            
                <a href="classim_1_1floo_1_1floolib_1_1_b_m_x_push_user_profile_1_1_message_push_setting.html">
            
                    
                    MessagePushSetting
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3.2.27" data-path="classim_1_1floo_1_1floolib_1_1_b_m_x_roster_item.html">
            
                <a href="classim_1_1floo_1_1floolib_1_1_b_m_x_roster_item.html">
            
                    
                    im::floo::floolib::BMXRosterItem
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2.28" data-path="classim_1_1floo_1_1floolib_1_1_b_m_x_roster_manager.html">
            
                <a href="classim_1_1floo_1_1floolib_1_1_b_m_x_roster_manager.html">
            
                    
                    im::floo::floolib::BMXRosterManager
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2.29" data-path="classim_1_1floo_1_1floolib_1_1_b_m_x_roster_service.html">
            
                <a href="classim_1_1floo_1_1floolib_1_1_b_m_x_roster_service.html">
            
                    
                    im::floo::floolib::BMXRosterService
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.2.29.1" data-path="classim_1_1floo_1_1floolib_1_1_b_m_x_roster_service_1_1_application.html">
            
                <a href="classim_1_1floo_1_1floolib_1_1_b_m_x_roster_service_1_1_application.html">
            
                    
                    Application
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3.2.30" data-path="classim_1_1floo_1_1floolib_1_1_b_m_x_roster_service_listener.html">
            
                <a href="classim_1_1floo_1_1floolib_1_1_b_m_x_roster_service_listener.html">
            
                    
                    im::floo::floolib::BMXRosterServiceListener
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2.31" data-path="classim_1_1floo_1_1floolib_1_1_b_m_x_s_d_k_config.html">
            
                <a href="classim_1_1floo_1_1floolib_1_1_b_m_x_s_d_k_config.html">
            
                    
                    im::floo::floolib::BMXSDKConfig
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.2.31.1" data-path="classim_1_1floo_1_1floolib_1_1_b_m_x_s_d_k_config_1_1_host_config.html">
            
                <a href="classim_1_1floo_1_1floolib_1_1_b_m_x_s_d_k_config_1_1_host_config.html">
            
                    
                    HostConfig
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3.2.32" data-path="classim_1_1floo_1_1floolib_1_1_b_m_x_user_manager.html">
            
                <a href="classim_1_1floo_1_1floolib_1_1_b_m_x_user_manager.html">
            
                    
                    im::floo::floolib::BMXUserManager
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2.33" data-path="classim_1_1floo_1_1floolib_1_1_b_m_x_user_profile.html">
            
                <a href="classim_1_1floo_1_1floolib_1_1_b_m_x_user_profile.html">
            
                    
                    im::floo::floolib::BMXUserProfile
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2.34" data-path="classim_1_1floo_1_1floolib_1_1_b_m_x_user_profile_1_1_auth_question.html">
            
                <a href="classim_1_1floo_1_1floolib_1_1_b_m_x_user_profile_1_1_auth_question.html">
            
                    
                    im::floo::floolib::BMXUserProfile::AuthQuestion
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2.35" data-path="classim_1_1floo_1_1floolib_1_1_b_m_x_user_profile_1_1_message_setting.html">
            
                <a href="classim_1_1floo_1_1floolib_1_1_b_m_x_user_profile_1_1_message_setting.html">
            
                    
                    im::floo::floolib::BMXUserProfile::MessageSetting
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2.36" data-path="classim_1_1floo_1_1floolib_1_1_b_m_x_user_service.html">
            
                <a href="classim_1_1floo_1_1floolib_1_1_b_m_x_user_service.html">
            
                    
                    im::floo::floolib::BMXUserService
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2.37" data-path="classim_1_1floo_1_1floolib_1_1_b_m_x_user_service_listener.html">
            
                <a href="classim_1_1floo_1_1floolib_1_1_b_m_x_user_service_listener.html">
            
                    
                    im::floo::floolib::BMXUserServiceListener
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2.38" data-path="classim_1_1floo_1_1floolib_1_1_b_m_x_video_attachment.html">
            
                <a href="classim_1_1floo_1_1floolib_1_1_b_m_x_video_attachment.html">
            
                    
                    im::floo::floolib::BMXVideoAttachment
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2.39" data-path="classim_1_1floo_1_1floolib_1_1_b_m_x_voice_attachment.html">
            
                <a href="classim_1_1floo_1_1floolib_1_1_b_m_x_voice_attachment.html">
            
                    
                    im::floo::floolib::BMXVoiceAttachment
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2.40" data-path="classtop_1_1maxim_1_1rtc_1_1_r_t_c_manager.html">
            
                <a href="classtop_1_1maxim_1_1rtc_1_1_r_t_c_manager.html">
            
                    
                    top::maxim::rtc::RTCManager
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3.3" data-path="../floo.html">
            
                <a href="../floo.html">
            
                    
                    C++ SDK API (floo)
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.3.1" data-path="../floo/classfloo_1_1_b_m_x_chat_service.html">
            
                <a href="../floo/classfloo_1_1_b_m_x_chat_service.html">
            
                    
                    floo::BMXChatService
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3.2" data-path="../floo/classfloo_1_1_b_m_x_chat_service_listener.html">
            
                <a href="../floo/classfloo_1_1_b_m_x_chat_service_listener.html">
            
                    
                    floo::BMXChatServiceListener
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3.3" data-path="../floo/classfloo_1_1_b_m_x_client.html">
            
                <a href="../floo/classfloo_1_1_b_m_x_client.html">
            
                    
                    floo::BMXClient
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3.4" data-path="../floo/classfloo_1_1_b_m_x_conversation.html">
            
                <a href="../floo/classfloo_1_1_b_m_x_conversation.html">
            
                    
                    floo::BMXConversation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3.5" data-path="../floo/classfloo_1_1_b_m_x_device.html">
            
                <a href="../floo/classfloo_1_1_b_m_x_device.html">
            
                    
                    floo::BMXDevice
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3.6" data-path="../floo/classfloo_1_1_b_m_x_error.html">
            
                <a href="../floo/classfloo_1_1_b_m_x_error.html">
            
                    
                    floo::BMXError
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3.7" data-path="../floo/classfloo_1_1_b_m_x_file_attachment.html">
            
                <a href="../floo/classfloo_1_1_b_m_x_file_attachment.html">
            
                    
                    floo::BMXFileAttachment
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3.8" data-path="../floo/classfloo_1_1_b_m_x_forward_attachment.html">
            
                <a href="../floo/classfloo_1_1_b_m_x_forward_attachment.html">
            
                    
                    floo::BMXForwardAttachment
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.3.8.1" data-path="../floo/classfloo_1_1_b_m_x_forward_attachment_1_1_message.html">
            
                <a href="../floo/classfloo_1_1_b_m_x_forward_attachment_1_1_message.html">
            
                    
                    Message
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3.3.9" data-path="../floo/classfloo_1_1_b_m_x_group.html">
            
                <a href="../floo/classfloo_1_1_b_m_x_group.html">
            
                    
                    floo::BMXGroup
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3.10" data-path="../floo/classfloo_1_1_b_m_x_group_service.html">
            
                <a href="../floo/classfloo_1_1_b_m_x_group_service.html">
            
                    
                    floo::BMXGroupService
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3.11" data-path="../floo/classfloo_1_1_b_m_x_group_service_listener.html">
            
                <a href="../floo/classfloo_1_1_b_m_x_group_service_listener.html">
            
                    
                    floo::BMXGroupServiceListener
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3.12" data-path="../floo/classfloo_1_1_b_m_x_image_attachment.html">
            
                <a href="../floo/classfloo_1_1_b_m_x_image_attachment.html">
            
                    
                    floo::BMXImageAttachment
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3.13" data-path="../floo/classfloo_1_1_b_m_x_location_attachment.html">
            
                <a href="../floo/classfloo_1_1_b_m_x_location_attachment.html">
            
                    
                    floo::BMXLocationAttachment
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3.14" data-path="../floo/classfloo_1_1_b_m_x_message.html">
            
                <a href="../floo/classfloo_1_1_b_m_x_message.html">
            
                    
                    floo::BMXMessage
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3.15" data-path="../floo/classfloo_1_1_b_m_x_message_attachment.html">
            
                <a href="../floo/classfloo_1_1_b_m_x_message_attachment.html">
            
                    
                    floo::BMXMessageAttachment
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3.16" data-path="../floo/classfloo_1_1_b_m_x_message_config.html">
            
                <a href="../floo/classfloo_1_1_b_m_x_message_config.html">
            
                    
                    floo::BMXMessageConfig
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3.17" data-path="../floo/classfloo_1_1_b_m_x_network_listener.html">
            
                <a href="../floo/classfloo_1_1_b_m_x_network_listener.html">
            
                    
                    floo::BMXNetworkListener
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3.18" data-path="../floo/classfloo_1_1_b_m_x_push_service.html">
            
                <a href="../floo/classfloo_1_1_b_m_x_push_service.html">
            
                    
                    floo::BMXPushService
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3.19" data-path="../floo/classfloo_1_1_b_m_x_push_service_listener.html">
            
                <a href="../floo/classfloo_1_1_b_m_x_push_service_listener.html">
            
                    
                    floo::BMXPushServiceListener
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3.20" data-path="../floo/classfloo_1_1_b_m_x_push_user_profile.html">
            
                <a href="../floo/classfloo_1_1_b_m_x_push_user_profile.html">
            
                    
                    floo::BMXPushUserProfile
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3.21" data-path="../floo/classfloo_1_1_b_m_x_result_page.html">
            
                <a href="../floo/classfloo_1_1_b_m_x_result_page.html">
            
                    
                    floo::BMXResultPage
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3.22" data-path="../floo/classfloo_1_1_b_m_x_roster_item.html">
            
                <a href="../floo/classfloo_1_1_b_m_x_roster_item.html">
            
                    
                    floo::BMXRosterItem
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3.23" data-path="../floo/classfloo_1_1_b_m_x_roster_service.html">
            
                <a href="../floo/classfloo_1_1_b_m_x_roster_service.html">
            
                    
                    floo::BMXRosterService
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3.24" data-path="../floo/classfloo_1_1_b_m_x_roster_service_listener.html">
            
                <a href="../floo/classfloo_1_1_b_m_x_roster_service_listener.html">
            
                    
                    floo::BMXRosterServiceListener
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3.25" data-path="../floo/classfloo_1_1_b_m_x_s_d_k_config.html">
            
                <a href="../floo/classfloo_1_1_b_m_x_s_d_k_config.html">
            
                    
                    floo::BMXSDKConfig
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3.26" data-path="../floo/classfloo_1_1_b_m_x_user_profile.html">
            
                <a href="../floo/classfloo_1_1_b_m_x_user_profile.html">
            
                    
                    floo::BMXUserProfile
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3.27" data-path="../floo/classfloo_1_1_b_m_x_user_service.html">
            
                <a href="../floo/classfloo_1_1_b_m_x_user_service.html">
            
                    
                    floo::BMXUserService
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3.28" data-path="../floo/classfloo_1_1_b_m_x_user_service_listener.html">
            
                <a href="../floo/classfloo_1_1_b_m_x_user_service_listener.html">
            
                    
                    floo::BMXUserServiceListener
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3.29" data-path="../floo/classfloo_1_1_b_m_x_video_attachment.html">
            
                <a href="../floo/classfloo_1_1_b_m_x_video_attachment.html">
            
                    
                    floo::BMXVideoAttachment
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3.30" data-path="../floo/classfloo_1_1_b_m_x_voice_attachment.html">
            
                <a href="../floo/classfloo_1_1_b_m_x_voice_attachment.html">
            
                    
                    floo::BMXVoiceAttachment
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3.4" data-path="../floo-web.html">
            
                <a href="../floo-web.html">
            
                    
                    Web SDK API (floo-web)
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.4.1" data-path="../floo-web/flooim.html">
            
                <a href="../floo-web/flooim.html">
            
                    
                    flooim
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.4.2" data-path="../floo-web/userManage.html">
            
                <a href="../floo-web/userManage.html">
            
                    
                    userManage
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.4.3" data-path="../floo-web/rosterManage.html">
            
                <a href="../floo-web/rosterManage.html">
            
                    
                    rosterManage
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.4.4" data-path="../floo-web/groupManage.html">
            
                <a href="../floo-web/groupManage.html">
            
                    
                    groupManage
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.4.5" data-path="../floo-web/sysManage.html">
            
                <a href="../floo-web/sysManage.html">
            
                    
                    sysManage
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.4.6" data-path="../floo-web/rtcManage.html">
            
                <a href="../floo-web/rtcManage.html">
            
                    
                    rtcManage
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.4.7" data-path="../floo-web/types.html">
            
                <a href="../floo-web/types.html">
            
                    
                    types
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3.5" data-path="../server-api/">
            
                <a href="../server-api/">
            
                    
                    Server API
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.5.1" data-path="../server-api/user.html">
            
                <a href="../server-api/user.html">
            
                    
                    User Operation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.5.2" data-path="../server-api/token.html">
            
                <a href="../server-api/token.html">
            
                    
                    Token Interface
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.5.3" data-path="../server-api/roster.html">
            
                <a href="../server-api/roster.html">
            
                    
                    Roster Operation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.5.4" data-path="../server-api/group.html">
            
                <a href="../server-api/group.html">
            
                    
                    Group Operation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.5.5" data-path="../server-api/message.html">
            
                <a href="../server-api/message.html">
            
                    
                    Message Manipulation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.5.6" data-path="../server-api/file.html">
            
                <a href="../server-api/file.html">
            
                    
                    File Manipulation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.5.7" data-path="../server-api/push.html">
            
                <a href="../server-api/push.html">
            
                    
                    Push Interface
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../..">im::floo::floolib::BMXMessage</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="imfloofloolibbmxmessage">im::floo::floolib::BMXMessage</h1>
<p>Message </p>
<p>Inherits from BMXBaseObject</p>
<h2 id="public-functions">Public Functions</h2>
<table>
<thead>
<tr>
<th></th>
<th>Name</th>
</tr>
</thead>
<tbody>
<tr>
<td>synchronized void</td>
<td><strong><a href="classim_1_1floo_1_1floolib_1_1_b_m_x_message.html#function-delete">delete</a></strong>()</td>
</tr>
<tr>
<td>long</td>
<td><strong><a href="classim_1_1floo_1_1floolib_1_1_b_m_x_message.html#function-msgid">msgId</a></strong>()<br>Message unique ID</td>
</tr>
<tr>
<td>long</td>
<td><strong><a href="classim_1_1floo_1_1floolib_1_1_b_m_x_message.html#function-clientmsgid">clientMsgId</a></strong>()<br>Message client ID, only exists on message sender-side</td>
</tr>
<tr>
<td>long</td>
<td><strong><a href="classim_1_1floo_1_1floolib_1_1_b_m_x_message.html#function-fromid">fromId</a></strong>()<br>Message sender ID</td>
</tr>
<tr>
<td>long</td>
<td><strong><a href="classim_1_1floo_1_1floolib_1_1_b_m_x_message.html#function-toid">toId</a></strong>()<br>Message receiver ID</td>
</tr>
<tr>
<td>BMXMessage.MessageType</td>
<td><strong><a href="classim_1_1floo_1_1floolib_1_1_b_m_x_message.html#function-type">type</a></strong>()<br>Message type</td>
</tr>
<tr>
<td>long</td>
<td><strong><a href="classim_1_1floo_1_1floolib_1_1_b_m_x_message.html#function-conversationid">conversationId</a></strong>()<br>Conversation ID that message belongs to</td>
</tr>
<tr>
<td>BMXMessage.DeliveryStatus</td>
<td><strong><a href="classim_1_1floo_1_1floolib_1_1_b_m_x_message.html#function-deliverystatus">deliveryStatus</a></strong>()<br>Messaging state</td>
</tr>
<tr>
<td>void</td>
<td><strong><a href="classim_1_1floo_1_1floolib_1_1_b_m_x_message.html#function-setdeliverystatus">setDeliveryStatus</a></strong>(BMXMessage.DeliveryStatus arg0)<br>Set messaging state</td>
</tr>
<tr>
<td>long</td>
<td><strong><a href="classim_1_1floo_1_1floolib_1_1_b_m_x_message.html#function-servertimestamp">serverTimestamp</a></strong>()<br>Message timestamp (when received by server-side)</td>
</tr>
<tr>
<td>void</td>
<td><strong><a href="classim_1_1floo_1_1floolib_1_1_b_m_x_message.html#function-setservertimestamp">setServerTimestamp</a></strong>(long arg0)<br>Set message timestamp (when received by server-side)</td>
</tr>
<tr>
<td>long</td>
<td><strong><a href="classim_1_1floo_1_1floolib_1_1_b_m_x_message.html#function-clienttimestamp">clientTimestamp</a></strong>()<br>Local timestamp (local time when message created or received)</td>
</tr>
<tr>
<td>void</td>
<td><strong><a href="classim_1_1floo_1_1floolib_1_1_b_m_x_message.html#function-setclienttimestamp">setClientTimestamp</a></strong>(long arg0)<br>Set message local timestamp</td>
</tr>
<tr>
<td>boolean</td>
<td><strong><a href="classim_1_1floo_1_1floolib_1_1_b_m_x_message.html#function-isplayed">isPlayed</a></strong>()<br>Whether voice or video message has been played, valid only for received audio/video messages</td>
</tr>
<tr>
<td>void</td>
<td><strong><a href="classim_1_1floo_1_1floolib_1_1_b_m_x_message.html#function-setisplayed">setIsPlayed</a></strong>(boolean arg0)</td>
</tr>
<tr>
<td>boolean</td>
<td><strong><a href="classim_1_1floo_1_1floolib_1_1_b_m_x_message.html#function-isplayacked">isPlayAcked</a></strong>()<br>Whether voice or video message receives a playback acknowledgement, valid only for received audio/video messages</td>
</tr>
<tr>
<td>void</td>
<td><strong><a href="classim_1_1floo_1_1floolib_1_1_b_m_x_message.html#function-setisplayacked">setIsPlayAcked</a></strong>(boolean arg0)</td>
</tr>
<tr>
<td>boolean</td>
<td><strong><a href="classim_1_1floo_1_1floolib_1_1_b_m_x_message.html#function-isreceivemsg">isReceiveMsg</a></strong>()<br>Message whether to receive</td>
</tr>
<tr>
<td>void</td>
<td><strong><a href="classim_1_1floo_1_1floolib_1_1_b_m_x_message.html#function-setisreceivemsg">setIsReceiveMsg</a></strong>(boolean arg0)</td>
</tr>
<tr>
<td>boolean</td>
<td><strong><a href="classim_1_1floo_1_1floolib_1_1_b_m_x_message.html#function-isread">isRead</a></strong>()<br>Message read or unread mark</td>
</tr>
<tr>
<td>void</td>
<td><strong><a href="classim_1_1floo_1_1floolib_1_1_b_m_x_message.html#function-setisread">setIsRead</a></strong>(boolean arg0)</td>
</tr>
<tr>
<td>boolean</td>
<td><strong><a href="classim_1_1floo_1_1floolib_1_1_b_m_x_message.html#function-isreadacked">isReadAcked</a></strong>()<br>Show sender whether read acknowledgement received, and show receiver whether message read acknowledgement sent</td>
</tr>
<tr>
<td>void</td>
<td><strong><a href="classim_1_1floo_1_1floolib_1_1_b_m_x_message.html#function-setisreadacked">setIsReadAcked</a></strong>(boolean arg0)</td>
</tr>
<tr>
<td>boolean</td>
<td><strong><a href="classim_1_1floo_1_1floolib_1_1_b_m_x_message.html#function-isdeliveryacked">isDeliveryAcked</a></strong>()<br>Show sender whether message has been delivered to the other party, and show receiver whether message delivered acknowledgement has been sent</td>
</tr>
<tr>
<td>void</td>
<td><strong><a href="classim_1_1floo_1_1floolib_1_1_b_m_x_message.html#function-setisdeliveryacked">setIsDeliveryAcked</a></strong>(boolean arg0)</td>
</tr>
<tr>
<td>String</td>
<td><strong><a href="classim_1_1floo_1_1floolib_1_1_b_m_x_message.html#function-content">content</a></strong>()<br>Message text content</td>
</tr>
<tr>
<td>void</td>
<td><strong><a href="classim_1_1floo_1_1floolib_1_1_b_m_x_message.html#function-setcontent">setContent</a></strong>(String content)<br>Message text content</td>
</tr>
<tr>
<td>BMXMessage.ContentType</td>
<td><strong><a href="classim_1_1floo_1_1floolib_1_1_b_m_x_message.html#function-contenttype">contentType</a></strong>()<br>Message content type, attachment-type with attachment, text-type with no attachment</td>
</tr>
<tr>
<td><a href="classim_1_1floo_1_1floolib_1_1_b_m_x_message_attachment.html">BMXMessageAttachment</a></td>
<td><strong><a href="classim_1_1floo_1_1floolib_1_1_b_m_x_message.html#function-attachment">attachment</a></strong>()<br>Message attachment, BMXMessage owns the attachment and is responsible for releasing it</td>
</tr>
<tr>
<td><a href="classim_1_1floo_1_1floolib_1_1_b_m_x_message_config.html">BMXMessageConfig</a></td>
<td><strong><a href="classim_1_1floo_1_1floolib_1_1_b_m_x_message.html#function-config">config</a></strong>()<br>Message settings</td>
</tr>
<tr>
<td>void</td>
<td><strong><a href="classim_1_1floo_1_1floolib_1_1_b_m_x_message.html#function-setconfig">setConfig</a></strong>(<a href="classim_1_1floo_1_1floolib_1_1_b_m_x_message_config.html">BMXMessageConfig</a> arg0)<br>Set message config information</td>
</tr>
<tr>
<td>String</td>
<td><strong><a href="classim_1_1floo_1_1floolib_1_1_b_m_x_message.html#function-extension">extension</a></strong>()<br>Message extension information</td>
</tr>
<tr>
<td>void</td>
<td><strong><a href="classim_1_1floo_1_1floolib_1_1_b_m_x_message.html#function-setextension">setExtension</a></strong>(String arg0)<br>Set message extension information</td>
</tr>
<tr>
<td>BMXMessage.DeliveryQos</td>
<td><strong><a href="classim_1_1floo_1_1floolib_1_1_b_m_x_message.html#function-deliveryqos">deliveryQos</a></strong>()<br>QOS of messaging</td>
</tr>
<tr>
<td>void</td>
<td><strong><a href="classim_1_1floo_1_1floolib_1_1_b_m_x_message.html#function-setdeliveryqos">setDeliveryQos</a></strong>(BMXMessage.DeliveryQos qos)<br>Set QOS of messaging</td>
</tr>
<tr>
<td>String</td>
<td><strong><a href="classim_1_1floo_1_1floolib_1_1_b_m_x_message.html#function-sendername">senderName</a></strong>()<br>Display name of message sender</td>
</tr>
<tr>
<td>void</td>
<td><strong><a href="classim_1_1floo_1_1floolib_1_1_b_m_x_message.html#function-setsendername">setSenderName</a></strong>(String senderName)<br>Set display name of message sender</td>
</tr>
<tr>
<td>int</td>
<td><strong><a href="classim_1_1floo_1_1floolib_1_1_b_m_x_message.html#function-groupackcount">groupAckCount</a></strong>()<br>AckCount of read group messages</td>
</tr>
<tr>
<td>void</td>
<td><strong><a href="classim_1_1floo_1_1floolib_1_1_b_m_x_message.html#function-setgroupackcount">setGroupAckCount</a></strong>(int count)<br>Set groupAckCount of read messages (an SDK internal calling interface that shall not be called by upper layer)</td>
</tr>
<tr>
<td>int</td>
<td><strong><a href="classim_1_1floo_1_1floolib_1_1_b_m_x_message.html#function-groupackunreadcount">groupAckUnreadCount</a></strong>()<br>AckCount of unread group messages</td>
</tr>
<tr>
<td>void</td>
<td><strong><a href="classim_1_1floo_1_1floolib_1_1_b_m_x_message.html#function-setgroupackunreadcount">setGroupAckUnreadCount</a></strong>(int count)<br>Set groupAckCount of unread messages (an SDK internal calling interface that shall not be called by upper layer)</td>
</tr>
<tr>
<td>boolean</td>
<td><strong><a href="classim_1_1floo_1_1floolib_1_1_b_m_x_message.html#function-groupackreadall">groupAckReadAll</a></strong>()<br>Whether all group messages are read</td>
</tr>
<tr>
<td>int</td>
<td><strong><a href="classim_1_1floo_1_1floolib_1_1_b_m_x_message.html#function-groupplayackcount">groupPlayAckCount</a></strong>()<br>Get count of played group messages</td>
</tr>
<tr>
<td>void</td>
<td><strong><a href="classim_1_1floo_1_1floolib_1_1_b_m_x_message.html#function-setgroupplayackcount">setGroupPlayAckCount</a></strong>(int count)</td>
</tr>
<tr>
<td>int</td>
<td><strong><a href="classim_1_1floo_1_1floolib_1_1_b_m_x_message.html#function-groupplayackunreadcount">groupPlayAckUnreadCount</a></strong>()<br>Get count of unread playback acknowledgements of group messages</td>
</tr>
<tr>
<td>void</td>
<td><strong><a href="classim_1_1floo_1_1floolib_1_1_b_m_x_message.html#function-setgroupplayackunreadcount">setGroupPlayAckUnreadCount</a></strong>(int count)</td>
</tr>
<tr>
<td>boolean</td>
<td><strong><a href="classim_1_1floo_1_1floolib_1_1_b_m_x_message.html#function-groupplayackreadall">groupPlayAckReadAll</a></strong>()<br>Set all playback acknowledgements of group messages as read</td>
</tr>
<tr>
<td>void</td>
<td><strong><a href="classim_1_1floo_1_1floolib_1_1_b_m_x_message.html#function-setpriority">setPriority</a></strong>(int priority)<br>Set message diffusion priority, default 0. 0 means diffusion, and the smaller the number, the more diffused. Value range 0-10. The default level of messages sent by ordinary users in chatroom is 5, which can be discarded. Admin level defaults to 0 and will not be discarded. Other values can be set according to business.</td>
</tr>
<tr>
<td>int</td>
<td><strong><a href="classim_1_1floo_1_1floolib_1_1_b_m_x_message.html#function-priority">priority</a></strong>()<br>Message diffusion priority</td>
</tr>
<tr>
<td>void</td>
<td><strong><a href="classim_1_1floo_1_1floolib_1_1_b_m_x_message.html#function-setpushmessagemode">setPushMessageMode</a></strong>(boolean arg0)<br>Set whether to push messages</td>
</tr>
<tr>
<td>boolean</td>
<td><strong><a href="classim_1_1floo_1_1floolib_1_1_b_m_x_message.html#function-ispushmessage">isPushMessage</a></strong>()<br>Whether it is a push message</td>
</tr>
<tr>
<td><a href="classim_1_1floo_1_1floolib_1_1_b_m_x_message.html">BMXMessage</a></td>
<td><strong><a href="classim_1_1floo_1_1floolib_1_1_b_m_x_message.html#function-createmessage">createMessage</a></strong>(long from, long to, BMXMessage.MessageType type, long conversationId, String content)<br>Create a text message</td>
</tr>
<tr>
<td><a href="classim_1_1floo_1_1floolib_1_1_b_m_x_message.html">BMXMessage</a></td>
<td><strong><a href="classim_1_1floo_1_1floolib_1_1_b_m_x_message.html#function-createmessage">createMessage</a></strong>(long from, long to, BMXMessage.MessageType type, long conversationId, <a href="classim_1_1floo_1_1floolib_1_1_b_m_x_message_attachment.html">BMXMessageAttachment</a> attachment)<br>Create a sent-attachment message</td>
</tr>
<tr>
<td><a href="classim_1_1floo_1_1floolib_1_1_b_m_x_message.html">BMXMessage</a></td>
<td><strong><a href="classim_1_1floo_1_1floolib_1_1_b_m_x_message.html#function-createcommandmessage">createCommandMessage</a></strong>(long from, long to, BMXMessage.MessageType type, long conversationId, String content)<br>Create a sent command message (command message holds command information in a content field or an extension field)</td>
</tr>
<tr>
<td><a href="classim_1_1floo_1_1floolib_1_1_b_m_x_message.html">BMXMessage</a></td>
<td><strong><a href="classim_1_1floo_1_1floolib_1_1_b_m_x_message.html#function-createmessage">createMessage</a></strong>(long msgId, long from, long to, BMXMessage.MessageType type, long conversationId, String content, long serverTimestamp)<br>Create a received message</td>
</tr>
<tr>
<td><a href="classim_1_1floo_1_1floolib_1_1_b_m_x_message.html">BMXMessage</a></td>
<td><strong><a href="classim_1_1floo_1_1floolib_1_1_b_m_x_message.html#function-createmessage">createMessage</a></strong>(long msgId, long from, long to, BMXMessage.MessageType type, long conversationId, <a href="classim_1_1floo_1_1floolib_1_1_b_m_x_message_attachment.html">BMXMessageAttachment</a> attachment, long serverTimestamp)<br>Create a received message</td>
</tr>
<tr>
<td><a href="classim_1_1floo_1_1floolib_1_1_b_m_x_message.html">BMXMessage</a></td>
<td><strong><a href="classim_1_1floo_1_1floolib_1_1_b_m_x_message.html#function-createcommandmessage">createCommandMessage</a></strong>(long msgId, long from, long to, BMXMessage.MessageType type, long conversationId, String content, long serverTimestamp)<br>Create a received command message (command message holds command information in a content field or an extension field)</td>
</tr>
<tr>
<td><a href="classim_1_1floo_1_1floolib_1_1_b_m_x_message.html">BMXMessage</a></td>
<td><strong><a href="classim_1_1floo_1_1floolib_1_1_b_m_x_message.html#function-createforwardmessage">createForwardMessage</a></strong>(<a href="classim_1_1floo_1_1floolib_1_1_b_m_x_message.html">BMXMessage</a> msg, long from, long to, BMXMessage.MessageType type, long conversationId)<br>Create a forwarding message</td>
</tr>
</tbody>
</table>
<h2 id="protected-functions">Protected Functions</h2>
<table>
<thead>
<tr>
<th></th>
<th>Name</th>
</tr>
</thead>
<tbody>
<tr>
<td></td>
<td><strong><a href="classim_1_1floo_1_1floolib_1_1_b_m_x_message.html#function-bmxmessage">BMXMessage</a></strong>(long cPtr, boolean cMemoryOwn)</td>
</tr>
<tr>
<td>void</td>
<td><strong><a href="classim_1_1floo_1_1floolib_1_1_b_m_x_message.html#function-finalize">finalize</a></strong>()</td>
</tr>
<tr>
<td>long</td>
<td><strong><a href="classim_1_1floo_1_1floolib_1_1_b_m_x_message.html#function-getcptr">getCPtr</a></strong>(<a href="classim_1_1floo_1_1floolib_1_1_b_m_x_message.html">BMXMessage</a> obj)</td>
</tr>
</tbody>
</table>
<h2 id="public-functions-documentation">Public Functions Documentation</h2>
<h3 id="function-delete">function delete</h3>
<pre class="language-"><code class="lang-java">inline <span class="token keyword">synchronized</span> <span class="token keyword">void</span> <span class="token function">delete</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre>
<p><strong>Example</strong>:</p>
<p></p>
<h3 id="function-msgid">function msgId</h3>
<pre class="language-"><code class="lang-java">inline <span class="token keyword">long</span> <span class="token function">msgId</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre>
<p>Message unique ID </p>
<p><strong>Return</strong>: int64_t </p>
<p><strong>Example</strong>:</p>
<p><pre class="language-"><code class="lang-java"><span class="token keyword">private</span> <span class="token keyword">long</span> <span class="token function">getFirstMessageId</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>mAdapter <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">BMXMessage</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> mAdapter<span class="token punctuation">.</span><span class="token function">getList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">BMXMessage</span> bean <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>list <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> list<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        bean <span class="token operator">=</span> list<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> bean<span class="token punctuation">.</span><span class="token function">msgId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><div class="lanying-code-snippet-caption"><a title="Show Full Source of app/src/main/java/top/maxim/im/login/view/PushMessageActivity.java" href="https://github.com/maxim-top/lanying-im-android/blob/901cdc7846e8960d9ca5297b7ac8dd99f93f9c0a/app/src/main/java/top/maxim/im/login/view/PushMessageActivity.java#L154" target="_blank">Github Source: app/src/main/java/top/maxim/im/login/view/PushMessageActivity.java (line 154)</a></div><pre class="language-"><code class="lang-java"><span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">void</span> <span class="token function">onCallProgress</span><span class="token punctuation">(</span><span class="token class-name">BMXMessage</span> msg<span class="token punctuation">,</span> <span class="token keyword">int</span> percent<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>msg <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        mainHandler<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token function">onFail</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">long</span> msgId <span class="token operator">=</span> msg<span class="token punctuation">.</span><span class="token function">msgId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>percent <span class="token operator">&gt;=</span> <span class="token number">100</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        mainHandler<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token function">onFinish</span><span class="token punctuation">(</span>msgId<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        mainHandler<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token function">onProgress</span><span class="token punctuation">(</span>msgId<span class="token punctuation">,</span> percent <span class="token operator">&lt;=</span> <span class="token number">0</span> <span class="token operator">?</span> <span class="token number">0</span> <span class="token operator">:</span> percent<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span></code></pre><div class="lanying-code-snippet-caption"><a title="Show Full Source of app/src/main/java/top/maxim/im/message/interfaces/MsgAttachmentCallback.java" href="https://github.com/maxim-top/lanying-im-android/blob/901cdc7846e8960d9ca5297b7ac8dd99f93f9c0a/app/src/main/java/top/maxim/im/message/interfaces/MsgAttachmentCallback.java#L21" target="_blank">Github Source: app/src/main/java/top/maxim/im/message/interfaces/MsgAttachmentCallback.java (line 21)</a></div><pre class="language-"><code class="lang-java"><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onProgressCallback</span><span class="token punctuation">(</span><span class="token class-name">BMXMessage</span> msg<span class="token punctuation">,</span> <span class="token keyword">int</span> percent<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>msg <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">long</span> msgId <span class="token operator">=</span> msg<span class="token punctuation">.</span><span class="token function">msgId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>mListeners<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>msgId<span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        mListeners<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>msgId<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">onCallProgress</span><span class="token punctuation">(</span>msg<span class="token punctuation">,</span> percent<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span></code></pre><div class="lanying-code-snippet-caption"><a title="Show Full Source of app/src/main/java/top/maxim/im/message/utils/ChatAttachmentManager.java" href="https://github.com/maxim-top/lanying-im-android/blob/901cdc7846e8960d9ca5297b7ac8dd99f93f9c0a/app/src/main/java/top/maxim/im/message/utils/ChatAttachmentManager.java#L53" target="_blank">Github Source: app/src/main/java/top/maxim/im/message/utils/ChatAttachmentManager.java (line 53)</a></div><pre class="language-"><code class="lang-java"><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onStartCallback</span><span class="token punctuation">(</span><span class="token class-name">BMXMessage</span> msg<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>msg <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">long</span> msgId <span class="token operator">=</span> msg<span class="token punctuation">.</span><span class="token function">msgId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>mListeners<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>msgId<span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        mListeners<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>msgId<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">onStart</span><span class="token punctuation">(</span>msgId<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span></code></pre><div class="lanying-code-snippet-caption"><a title="Show Full Source of app/src/main/java/top/maxim/im/message/utils/ChatAttachmentManager.java" href="https://github.com/maxim-top/lanying-im-android/blob/901cdc7846e8960d9ca5297b7ac8dd99f93f9c0a/app/src/main/java/top/maxim/im/message/utils/ChatAttachmentManager.java#L63" target="_blank">Github Source: app/src/main/java/top/maxim/im/message/utils/ChatAttachmentManager.java (line 63)</a></div><pre class="language-"><code class="lang-java"><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onFinishCallback</span><span class="token punctuation">(</span><span class="token class-name">BMXMessage</span> msg<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>msg <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">long</span> msgId <span class="token operator">=</span> msg<span class="token punctuation">.</span><span class="token function">msgId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>mListeners<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>msgId<span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        mListeners<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>msgId<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">onCallProgress</span><span class="token punctuation">(</span>msg<span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span></code></pre><div class="lanying-code-snippet-caption"><a title="Show Full Source of app/src/main/java/top/maxim/im/message/utils/ChatAttachmentManager.java" href="https://github.com/maxim-top/lanying-im-android/blob/901cdc7846e8960d9ca5297b7ac8dd99f93f9c0a/app/src/main/java/top/maxim/im/message/utils/ChatAttachmentManager.java#L73" target="_blank">Github Source: app/src/main/java/top/maxim/im/message/utils/ChatAttachmentManager.java (line 73)</a></div><pre class="language-"><code class="lang-java"><span class="token keyword">public</span> <span class="token keyword">long</span> <span class="token function">getFirstMsgId</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">BMXMessage</span> firstMessage <span class="token operator">=</span> <span class="token function">getFirstMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> firstMessage <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">?</span> firstMessage<span class="token punctuation">.</span><span class="token function">msgId</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span></code></pre><div class="lanying-code-snippet-caption"><a title="Show Full Source of app/src/main/java/top/maxim/im/message/utils/ChatViewHelper.java" href="https://github.com/maxim-top/lanying-im-android/blob/901cdc7846e8960d9ca5297b7ac8dd99f93f9c0a/app/src/main/java/top/maxim/im/message/utils/ChatViewHelper.java#L267" target="_blank">Github Source: app/src/main/java/top/maxim/im/message/utils/ChatViewHelper.java (line 267)</a></div><pre class="language-"><code class="lang-java"><span class="token keyword">void</span> <span class="token function">updateMessage</span><span class="token punctuation">(</span><span class="token class-name">BMXMessage</span> bean<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">BMXMessage</span> preBean<span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> mList<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        preBean <span class="token operator">=</span> mList<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>preBean<span class="token punctuation">.</span><span class="token function">msgId</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> bean<span class="token punctuation">.</span><span class="token function">msgId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">update</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> bean<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span></code></pre><div class="lanying-code-snippet-caption"><a title="Show Full Source of app/src/main/java/top/maxim/im/message/utils/MessageListHelper.java" href="https://github.com/maxim-top/lanying-im-android/blob/901cdc7846e8960d9ca5297b7ac8dd99f93f9c0a/app/src/main/java/top/maxim/im/message/utils/MessageListHelper.java#L26" target="_blank">Github Source: app/src/main/java/top/maxim/im/message/utils/MessageListHelper.java (line 26)</a></div></p>
<h3 id="function-clientmsgid">function clientMsgId</h3>
<pre class="language-"><code class="lang-java">inline <span class="token keyword">long</span> <span class="token function">clientMsgId</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre>
<p>Message client ID, only exists on message sender-side </p>
<p><strong>Return</strong>: int64_t </p>
<p><strong>Example</strong>:</p>
<p></p>
<h3 id="function-fromid">function fromId</h3>
<pre class="language-"><code class="lang-java">inline <span class="token keyword">long</span> <span class="token function">fromId</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre>
<p>Message sender ID </p>
<p><strong>Return</strong>: int64_t </p>
<p><strong>Example</strong>:</p>
<p><pre class="language-"><code class="lang-java">    <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">boolean</span> isMySend <span class="token operator">=</span> <span class="token operator">!</span>bean<span class="token punctuation">.</span><span class="token function">isReceiveMsg</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>bean<span class="token punctuation">.</span><span class="token function">contentType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token class-name">BMXMessage<span class="token punctuation">.</span>ContentType</span><span class="token punctuation">.</span><span class="token constant">RTC</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token class-name">BMXMessageConfig</span> config <span class="token operator">=</span> bean<span class="token punctuation">.</span><span class="token function">config</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>config <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> config<span class="token punctuation">.</span><span class="token function">getRTCAction</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">&quot;hangup&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">String</span> content <span class="token operator">=</span> bean<span class="token punctuation">.</span><span class="token function">content</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>content<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">&quot;rejected&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            isMySend <span class="token operator">=</span> <span class="token operator">!</span>isMySend<span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>content<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">&quot;canceled&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>config<span class="token punctuation">.</span><span class="token function">getRTCInitiator</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">!=</span> bean<span class="token punctuation">.</span><span class="token function">fromId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                isMySend <span class="token operator">=</span> <span class="token operator">!</span>isMySend<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">int</span> viewType <span class="token operator">=</span> <span class="token class-name">MsgBodyHelper</span><span class="token punctuation">.</span><span class="token function">getContentBodyClass</span><span class="token punctuation">(</span>bean<span class="token punctuation">.</span><span class="token function">contentType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">swigValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token keyword">null</span>
        <span class="token operator">?</span> bean<span class="token punctuation">.</span><span class="token function">contentType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">swigValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token operator">:</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
<span class="token keyword">return</span> isMySend <span class="token operator">?</span> viewType <span class="token operator">:</span> <span class="token operator">~</span>viewType<span class="token punctuation">;</span></code></pre><div class="lanying-code-snippet-caption"><a title="Show Full Source of app/src/main/java/top/maxim/im/message/adapter/ChatMessageAdapter.java" href="https://github.com/maxim-top/lanying-im-android/blob/901cdc7846e8960d9ca5297b7ac8dd99f93f9c0a/app/src/main/java/top/maxim/im/message/adapter/ChatMessageAdapter.java#L181" target="_blank">Github Source: app/src/main/java/top/maxim/im/message/adapter/ChatMessageAdapter.java (line 181)</a></div><pre class="language-"><code class="lang-java"><span class="token keyword">if</span> <span class="token punctuation">(</span>profile <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token class-name">String</span> myName <span class="token operator">=</span> profile<span class="token punctuation">.</span><span class="token function">nickname</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">TextUtils</span><span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span>myName<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    myName <span class="token operator">=</span> profile<span class="token punctuation">.</span><span class="token function">username</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">long</span> myId <span class="token operator">=</span> profile<span class="token punctuation">.</span><span class="token function">userId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">long</span> callerId <span class="token operator">=</span> mMaxMessage<span class="token punctuation">.</span><span class="token function">fromId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name">String</span> userName <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token keyword">boolean</span> group <span class="token operator">=</span> mMaxMessage<span class="token punctuation">.</span><span class="token function">type</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token class-name">BMXMessage<span class="token punctuation">.</span>MessageType<span class="token punctuation">.</span>Group</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>mMaxMessage<span class="token punctuation">.</span><span class="token function">contentType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token class-name">BMXMessage<span class="token punctuation">.</span>ContentType</span><span class="token punctuation">.</span><span class="token constant">RTC</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token class-name">BMXMessageConfig</span> config <span class="token operator">=</span> mMaxMessage<span class="token punctuation">.</span><span class="token function">config</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>config <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> config<span class="token punctuation">.</span><span class="token function">getRTCAction</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">&quot;hangup&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        callerId <span class="token operator">=</span> config<span class="token punctuation">.</span><span class="token function">getRTCInitiator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span></code></pre><div class="lanying-code-snippet-caption"><a title="Show Full Source of app/src/main/java/top/maxim/im/message/itemholder/MessageItemBaseView.java" href="https://github.com/maxim-top/lanying-im-android/blob/901cdc7846e8960d9ca5297b7ac8dd99f93f9c0a/app/src/main/java/top/maxim/im/message/itemholder/MessageItemBaseView.java#L177" target="_blank">Github Source: app/src/main/java/top/maxim/im/message/itemholder/MessageItemBaseView.java (line 177)</a></div><pre class="language-"><code class="lang-java">    <span class="token keyword">protected</span> <span class="token keyword">boolean</span> <span class="token function">filterMessage</span><span class="token punctuation">(</span><span class="token class-name">BMXMessage</span> message<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>message <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>message<span class="token punctuation">.</span><span class="token function">contentType</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token class-name">BMXMessage<span class="token punctuation">.</span>ContentType<span class="token punctuation">.</span>Text</span>
                <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token class-name">TextUtils</span><span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span>message<span class="token punctuation">.</span><span class="token function">extension</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">JSONObject</span> jsonObject <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                jsonObject <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">JSONObject</span><span class="token punctuation">(</span>message<span class="token punctuation">.</span><span class="token function">extension</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>jsonObject<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span><span class="token class-name">MessageConfig</span><span class="token punctuation">.</span><span class="token constant">INPUT_STATUS</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> message<span class="token punctuation">.</span><span class="token function">fromId</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">!=</span> mMyUserId<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token function">handelInputStatus</span><span class="token punctuation">(</span>message<span class="token punctuation">.</span><span class="token function">extension</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                <span class="token comment">//TODO</span>
<span class="token comment">//                if (jsonObject.has(&quot;rtcKey&quot;) &amp;&amp; jsonObject.has(&quot;rtcValue&quot;)) {</span>
<span class="token comment">//                    if (TextUtils.equals(jsonObject.getString(&quot;rtcKey&quot;), &quot;join&quot;) &amp;&amp; !TextUtils.isEmpty(jsonObject.getString(&quot;rtcValue&quot;))) {</span>
<span class="token comment">//                        String[] values = jsonObject.getString(&quot;rtcValue&quot;).split(&quot;_&quot;);</span>
<span class="token comment">//                        String roomId = values[0];</span>
<span class="token comment">//                        String[] chatIdArray = values[1].split(&quot;,&quot;);</span>
<span class="token comment">//                        boolean hasVideo = TextUtils.equals(MessageConfig.CallMode.CALL_VIDEO+&quot;&quot;, values[2]);</span>
<span class="token comment">//                        List&lt;Long&gt; chatIds = new ArrayList&lt;&gt;();</span></code></pre><div class="lanying-code-snippet-caption"><a title="Show Full Source of app/src/main/java/top/maxim/im/message/presenter/ChatBasePresenter.java" href="https://github.com/maxim-top/lanying-im-android/blob/901cdc7846e8960d9ca5297b7ac8dd99f93f9c0a/app/src/main/java/top/maxim/im/message/presenter/ChatBasePresenter.java#L1980" target="_blank">Github Source: app/src/main/java/top/maxim/im/message/presenter/ChatBasePresenter.java (line 1980)</a></div><pre class="language-"><code class="lang-java">msg<span class="token punctuation">.</span><span class="token function">fromId</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> mMyUserId<span class="token punctuation">)</span><span class="token punctuation">{</span></code></pre><div class="lanying-code-snippet-caption"><a title="Show Full Source of app/src/main/java/top/maxim/im/message/presenter/ChatBasePresenter.java" href="https://github.com/maxim-top/lanying-im-android/blob/901cdc7846e8960d9ca5297b7ac8dd99f93f9c0a/app/src/main/java/top/maxim/im/message/presenter/ChatBasePresenter.java#L398" target="_blank">Github Source: app/src/main/java/top/maxim/im/message/presenter/ChatBasePresenter.java (line 398)</a></div><pre class="language-"><code class="lang-java"><span class="token annotation punctuation">@Override</span>
<span class="token keyword">protected</span> <span class="token keyword">boolean</span> <span class="token function">isCurrentSession</span><span class="token punctuation">(</span><span class="token class-name">BMXMessage</span> message<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>message <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> message<span class="token punctuation">.</span><span class="token function">type</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token class-name">BMXMessage<span class="token punctuation">.</span>MessageType<span class="token punctuation">.</span>Single</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>message<span class="token punctuation">.</span><span class="token function">isReceiveMsg</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// &#x5BF9;&#x65B9;&#x53D1;&#x8FC7;&#x6765;&#x7684;&#x6D88;&#x606F;</span>
        <span class="token keyword">return</span> message<span class="token punctuation">.</span><span class="token function">fromId</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> mChatId<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> message<span class="token punctuation">.</span><span class="token function">toId</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> mChatId<span class="token punctuation">;</span></code></pre><div class="lanying-code-snippet-caption"><a title="Show Full Source of app/src/main/java/top/maxim/im/message/presenter/ChatSinglePresenter.java" href="https://github.com/maxim-top/lanying-im-android/blob/901cdc7846e8960d9ca5297b7ac8dd99f93f9c0a/app/src/main/java/top/maxim/im/message/presenter/ChatSinglePresenter.java#L96" target="_blank">Github Source: app/src/main/java/top/maxim/im/message/presenter/ChatSinglePresenter.java (line 96)</a></div><pre class="language-"><code class="lang-java"><span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">notifyMessage</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">BMXMessage</span><span class="token punctuation">&gt;</span></span> messages<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>messages <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> messages<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token class-name">ListOfLongLong</span> rosterIds <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ListOfLongLong</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> messages<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">BMXMessage</span> message <span class="token operator">=</span> messages<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>message <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">continue</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        rosterIds<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>message<span class="token punctuation">.</span><span class="token function">fromId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>rosterIds<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">RosterManager</span><span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getRosterList</span><span class="token punctuation">(</span>rosterIds<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>bmxErrorCode<span class="token punctuation">,</span> itemList<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
            <span class="token class-name">RosterFetcher</span><span class="token punctuation">.</span><span class="token function">getFetcher</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">putRosters</span><span class="token punctuation">(</span>itemList<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">BaseManager</span><span class="token punctuation">.</span><span class="token function">bmxFinish</span><span class="token punctuation">(</span>bmxErrorCode<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>mAdapter <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    mAdapter<span class="token punctuation">.</span><span class="token function">notifyDataSetChanged</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span></code></pre><div class="lanying-code-snippet-caption"><a title="Show Full Source of app/src/main/java/top/maxim/im/message/view/MessageSearchActivity.java" href="https://github.com/maxim-top/lanying-im-android/blob/901cdc7846e8960d9ca5297b7ac8dd99f93f9c0a/app/src/main/java/top/maxim/im/message/view/MessageSearchActivity.java#L228" target="_blank">Github Source: app/src/main/java/top/maxim/im/message/view/MessageSearchActivity.java (line 228)</a></div><pre class="language-"><code class="lang-java"><span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">onBindHolder</span><span class="token punctuation">(</span><span class="token class-name">BaseViewHolder</span> holder<span class="token punctuation">,</span> <span class="token keyword">int</span> position<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">ShapeImageView</span> avatar <span class="token operator">=</span> holder<span class="token punctuation">.</span><span class="token function">findViewById</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>id<span class="token punctuation">.</span>session_avatar<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">TextView</span> tvTitle <span class="token operator">=</span> holder<span class="token punctuation">.</span><span class="token function">findViewById</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>id<span class="token punctuation">.</span>session_title<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">TextView</span> desc <span class="token operator">=</span> holder<span class="token punctuation">.</span><span class="token function">findViewById</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>id<span class="token punctuation">.</span>session_desc<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">TextView</span> time <span class="token operator">=</span> holder<span class="token punctuation">.</span><span class="token function">findViewById</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>id<span class="token punctuation">.</span>session_time<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">BMXMessage</span> message <span class="token operator">=</span> <span class="token function">getItem</span><span class="token punctuation">(</span>position<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>message <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token class-name">String</span> name <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
    <span class="token class-name">BMXRosterItem</span> rosterItem <span class="token operator">=</span> <span class="token class-name">RosterFetcher</span><span class="token punctuation">.</span><span class="token function">getFetcher</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getRoster</span><span class="token punctuation">(</span>message<span class="token punctuation">.</span><span class="token function">fromId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>rosterItem <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token class-name">TextUtils</span><span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span>rosterItem<span class="token punctuation">.</span><span class="token function">nickname</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        name <span class="token operator">=</span> rosterItem<span class="token punctuation">.</span><span class="token function">nickname</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>rosterItem <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        name <span class="token operator">=</span> rosterItem<span class="token punctuation">.</span><span class="token function">username</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token class-name">ChatUtils</span><span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">showRosterAvatar</span><span class="token punctuation">(</span>rosterItem<span class="token punctuation">,</span> avatar<span class="token punctuation">,</span> mConfig<span class="token punctuation">)</span><span class="token punctuation">;</span>
    tvTitle<span class="token punctuation">.</span><span class="token function">setText</span><span class="token punctuation">(</span><span class="token class-name">TextUtils</span><span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token string">&quot;&quot;</span> <span class="token operator">:</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
    time<span class="token punctuation">.</span><span class="token function">setText</span><span class="token punctuation">(</span><span class="token class-name">TimeUtils</span><span class="token punctuation">.</span><span class="token function">millis2String</span><span class="token punctuation">(</span>mContext<span class="token punctuation">,</span> message<span class="token punctuation">.</span><span class="token function">serverTimestamp</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">String</span> msgDesc <span class="token operator">=</span> <span class="token class-name">ChatUtils</span><span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getMessageDesc</span><span class="token punctuation">(</span>mContext<span class="token punctuation">,</span> message<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><div class="lanying-code-snippet-caption"><a title="Show Full Source of app/src/main/java/top/maxim/im/message/view/MessageSearchActivity.java" href="https://github.com/maxim-top/lanying-im-android/blob/901cdc7846e8960d9ca5297b7ac8dd99f93f9c0a/app/src/main/java/top/maxim/im/message/view/MessageSearchActivity.java#L285" target="_blank">Github Source: app/src/main/java/top/maxim/im/message/view/MessageSearchActivity.java (line 285)</a></div><pre class="language-"><code class="lang-java"><span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">notifyNotification</span><span class="token punctuation">(</span><span class="token class-name">BMXMessage</span> bean<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>bean <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> <span class="token operator">!</span>bean<span class="token punctuation">.</span><span class="token function">isReceiveMsg</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token class-name">Context</span> context <span class="token operator">=</span> <span class="token class-name">AppContextUtils</span><span class="token punctuation">.</span><span class="token function">getAppContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Intent</span> intent <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Intent</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span>context<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>string<span class="token punctuation">.</span>im_push_msg_action<span class="token punctuation">)</span><span class="token punctuation">,</span>
            context<span class="token punctuation">.</span><span class="token function">getPackageName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>bean<span class="token punctuation">.</span><span class="token function">type</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token class-name">BMXMessage<span class="token punctuation">.</span>MessageType<span class="token punctuation">.</span>Group</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        intent<span class="token punctuation">.</span><span class="token function">putExtra</span><span class="token punctuation">(</span><span class="token class-name">MessageConfig</span><span class="token punctuation">.</span><span class="token constant">CHAT_MSG</span><span class="token punctuation">,</span>
                <span class="token class-name">ChatUtils</span><span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">buildMessage</span><span class="token punctuation">(</span>bean<span class="token punctuation">,</span> bean<span class="token punctuation">.</span><span class="token function">type</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> bean<span class="token punctuation">.</span><span class="token function">toId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        intent<span class="token punctuation">.</span><span class="token function">putExtra</span><span class="token punctuation">(</span><span class="token class-name">MessageConfig</span><span class="token punctuation">.</span><span class="token constant">CHAT_MSG</span><span class="token punctuation">,</span>
                <span class="token class-name">ChatUtils</span><span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">buildMessage</span><span class="token punctuation">(</span>bean<span class="token punctuation">,</span> bean<span class="token punctuation">.</span><span class="token function">type</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> bean<span class="token punctuation">.</span><span class="token function">fromId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    intent<span class="token punctuation">.</span><span class="token function">setPackage</span><span class="token punctuation">(</span>context<span class="token punctuation">.</span><span class="token function">getPackageName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    context<span class="token punctuation">.</span><span class="token function">sendBroadcast</span><span class="token punctuation">(</span>intent<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><div class="lanying-code-snippet-caption"><a title="Show Full Source of app/src/main/java/top/maxim/im/sdk/utils/MessageDispatcher.java" href="https://github.com/maxim-top/lanying-im-android/blob/901cdc7846e8960d9ca5297b7ac8dd99f93f9c0a/app/src/main/java/top/maxim/im/sdk/utils/MessageDispatcher.java#L642" target="_blank">Github Source: app/src/main/java/top/maxim/im/sdk/utils/MessageDispatcher.java (line 642)</a></div></p>
<h3 id="function-toid">function toId</h3>
<pre class="language-"><code class="lang-java">inline <span class="token keyword">long</span> <span class="token function">toId</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre>
<p>Message receiver ID </p>
<p><strong>Return</strong>: int64_t </p>
<p><strong>Example</strong>:</p>
<p><pre class="language-"><code class="lang-java"><span class="token annotation punctuation">@Override</span>
<span class="token keyword">protected</span> <span class="token keyword">boolean</span> <span class="token function">isCurrentSession</span><span class="token punctuation">(</span><span class="token class-name">BMXMessage</span> message<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> message <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> message<span class="token punctuation">.</span><span class="token function">type</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token class-name">BMXMessage<span class="token punctuation">.</span>MessageType<span class="token punctuation">.</span>Group</span>
            <span class="token operator">&amp;&amp;</span> message<span class="token punctuation">.</span><span class="token function">toId</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> mChatId<span class="token punctuation">;</span></code></pre><div class="lanying-code-snippet-caption"><a title="Show Full Source of app/src/main/java/top/maxim/im/message/presenter/ChatGroupPresenter.java" href="https://github.com/maxim-top/lanying-im-android/blob/901cdc7846e8960d9ca5297b7ac8dd99f93f9c0a/app/src/main/java/top/maxim/im/message/presenter/ChatGroupPresenter.java#L137" target="_blank">Github Source: app/src/main/java/top/maxim/im/message/presenter/ChatGroupPresenter.java (line 137)</a></div><pre class="language-"><code class="lang-java"><span class="token annotation punctuation">@Override</span>
<span class="token keyword">protected</span> <span class="token keyword">boolean</span> <span class="token function">isCurrentSession</span><span class="token punctuation">(</span><span class="token class-name">BMXMessage</span> message<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>message <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> message<span class="token punctuation">.</span><span class="token function">type</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token class-name">BMXMessage<span class="token punctuation">.</span>MessageType<span class="token punctuation">.</span>Single</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>message<span class="token punctuation">.</span><span class="token function">isReceiveMsg</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// &#x5BF9;&#x65B9;&#x53D1;&#x8FC7;&#x6765;&#x7684;&#x6D88;&#x606F;</span>
        <span class="token keyword">return</span> message<span class="token punctuation">.</span><span class="token function">fromId</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> mChatId<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> message<span class="token punctuation">.</span><span class="token function">toId</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> mChatId<span class="token punctuation">;</span></code></pre><div class="lanying-code-snippet-caption"><a title="Show Full Source of app/src/main/java/top/maxim/im/message/presenter/ChatSinglePresenter.java" href="https://github.com/maxim-top/lanying-im-android/blob/901cdc7846e8960d9ca5297b7ac8dd99f93f9c0a/app/src/main/java/top/maxim/im/message/presenter/ChatSinglePresenter.java#L98" target="_blank">Github Source: app/src/main/java/top/maxim/im/message/presenter/ChatSinglePresenter.java (line 98)</a></div><pre class="language-"><code class="lang-java"><span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">notifyNotification</span><span class="token punctuation">(</span><span class="token class-name">BMXMessage</span> bean<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>bean <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> <span class="token operator">!</span>bean<span class="token punctuation">.</span><span class="token function">isReceiveMsg</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token class-name">Context</span> context <span class="token operator">=</span> <span class="token class-name">AppContextUtils</span><span class="token punctuation">.</span><span class="token function">getAppContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Intent</span> intent <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Intent</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span>context<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>string<span class="token punctuation">.</span>im_push_msg_action<span class="token punctuation">)</span><span class="token punctuation">,</span>
            context<span class="token punctuation">.</span><span class="token function">getPackageName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>bean<span class="token punctuation">.</span><span class="token function">type</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token class-name">BMXMessage<span class="token punctuation">.</span>MessageType<span class="token punctuation">.</span>Group</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        intent<span class="token punctuation">.</span><span class="token function">putExtra</span><span class="token punctuation">(</span><span class="token class-name">MessageConfig</span><span class="token punctuation">.</span><span class="token constant">CHAT_MSG</span><span class="token punctuation">,</span>
                <span class="token class-name">ChatUtils</span><span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">buildMessage</span><span class="token punctuation">(</span>bean<span class="token punctuation">,</span> bean<span class="token punctuation">.</span><span class="token function">type</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> bean<span class="token punctuation">.</span><span class="token function">toId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        intent<span class="token punctuation">.</span><span class="token function">putExtra</span><span class="token punctuation">(</span><span class="token class-name">MessageConfig</span><span class="token punctuation">.</span><span class="token constant">CHAT_MSG</span><span class="token punctuation">,</span>
                <span class="token class-name">ChatUtils</span><span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">buildMessage</span><span class="token punctuation">(</span>bean<span class="token punctuation">,</span> bean<span class="token punctuation">.</span><span class="token function">type</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> bean<span class="token punctuation">.</span><span class="token function">fromId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    intent<span class="token punctuation">.</span><span class="token function">setPackage</span><span class="token punctuation">(</span>context<span class="token punctuation">.</span><span class="token function">getPackageName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    context<span class="token punctuation">.</span><span class="token function">sendBroadcast</span><span class="token punctuation">(</span>intent<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><div class="lanying-code-snippet-caption"><a title="Show Full Source of app/src/main/java/top/maxim/im/sdk/utils/MessageDispatcher.java" href="https://github.com/maxim-top/lanying-im-android/blob/901cdc7846e8960d9ca5297b7ac8dd99f93f9c0a/app/src/main/java/top/maxim/im/sdk/utils/MessageDispatcher.java#L639" target="_blank">Github Source: app/src/main/java/top/maxim/im/sdk/utils/MessageDispatcher.java (line 639)</a></div></p>
<h3 id="function-type">function type</h3>
<pre class="language-"><code class="lang-java">inline <span class="token class-name">BMXMessage<span class="token punctuation">.</span>MessageType</span> <span class="token function">type</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre>
<p>Message type </p>
<p><strong>Return</strong>: [MessageType]</p>
<p><strong>Example</strong>:</p>
<p><pre class="language-"><code class="lang-java"><span class="token class-name">String</span> myName <span class="token operator">=</span> profile<span class="token punctuation">.</span><span class="token function">nickname</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">TextUtils</span><span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span>myName<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    myName <span class="token operator">=</span> profile<span class="token punctuation">.</span><span class="token function">username</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">long</span> myId <span class="token operator">=</span> profile<span class="token punctuation">.</span><span class="token function">userId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">long</span> callerId <span class="token operator">=</span> mMaxMessage<span class="token punctuation">.</span><span class="token function">fromId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name">String</span> userName <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token keyword">boolean</span> group <span class="token operator">=</span> mMaxMessage<span class="token punctuation">.</span><span class="token function">type</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token class-name">BMXMessage<span class="token punctuation">.</span>MessageType<span class="token punctuation">.</span>Group</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>mMaxMessage<span class="token punctuation">.</span><span class="token function">contentType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token class-name">BMXMessage<span class="token punctuation">.</span>ContentType</span><span class="token punctuation">.</span><span class="token constant">RTC</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token class-name">BMXMessageConfig</span> config <span class="token operator">=</span> mMaxMessage<span class="token punctuation">.</span><span class="token function">config</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>config <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> config<span class="token punctuation">.</span><span class="token function">getRTCAction</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">&quot;hangup&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        callerId <span class="token operator">=</span> config<span class="token punctuation">.</span><span class="token function">getRTCInitiator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">boolean</span> isSenderOrCaller <span class="token operator">=</span> myId <span class="token operator">==</span> callerId<span class="token punctuation">;</span><span class="token comment">//&#x6D88;&#x606F;&#x53D1;&#x9001;&#x8005;&#x6216;&#x8005;RTC&#x6302;&#x65AD;&#x6D88;&#x606F;&#x5BF9;&#x5E94;&#x7684;&#x901A;&#x8BDD;&#x547C;&#x53EB;&#x65B9;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>isSenderOrCaller<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">BMXRosterItem</span> item <span class="token operator">=</span> <span class="token class-name">RosterFetcher</span><span class="token punctuation">.</span><span class="token function">getFetcher</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getRoster</span><span class="token punctuation">(</span>callerId<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><div class="lanying-code-snippet-caption"><a title="Show Full Source of app/src/main/java/top/maxim/im/message/itemholder/MessageItemBaseView.java" href="https://github.com/maxim-top/lanying-im-android/blob/901cdc7846e8960d9ca5297b7ac8dd99f93f9c0a/app/src/main/java/top/maxim/im/message/itemholder/MessageItemBaseView.java#L180" target="_blank">Github Source: app/src/main/java/top/maxim/im/message/itemholder/MessageItemBaseView.java (line 180)</a></div><pre class="language-"><code class="lang-java"><span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">showReadStatus</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>mItemPos <span class="token operator">!=</span> <span class="token constant">ITEM_RIGHT</span> <span class="token operator">||</span> mTvReadStatus <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>mMaxMessage <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        mTvReadStatus<span class="token punctuation">.</span><span class="token function">setVisibility</span><span class="token punctuation">(</span><span class="token class-name">View</span><span class="token punctuation">.</span><span class="token constant">GONE</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>mMaxMessage<span class="token punctuation">.</span><span class="token function">type</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token class-name">BMXMessage<span class="token punctuation">.</span>MessageType<span class="token punctuation">.</span>Single</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// &#x5355;&#x804A;</span>
        mTvReadStatus<span class="token punctuation">.</span><span class="token function">setVisibility</span><span class="token punctuation">(</span><span class="token class-name">View</span><span class="token punctuation">.</span><span class="token constant">VISIBLE</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">boolean</span> isRead <span class="token operator">=</span> mMaxMessage<span class="token punctuation">.</span><span class="token function">isReadAcked</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        mTvReadStatus<span class="token punctuation">.</span><span class="token function">setText</span><span class="token punctuation">(</span>isRead <span class="token operator">?</span> <span class="token function">getResources</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>string<span class="token punctuation">.</span>read<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">getResources</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>string<span class="token punctuation">.</span>unread<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>mMaxMessage<span class="token punctuation">.</span><span class="token function">type</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token class-name">BMXMessage<span class="token punctuation">.</span>MessageType<span class="token punctuation">.</span>Group</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// &#x7FA4;&#x804A;</span>
        mTvReadStatus<span class="token punctuation">.</span><span class="token function">setVisibility</span><span class="token punctuation">(</span>mShowReadAck <span class="token operator">?</span> <span class="token class-name">View</span><span class="token punctuation">.</span><span class="token constant">VISIBLE</span> <span class="token operator">:</span> <span class="token class-name">View</span><span class="token punctuation">.</span><span class="token constant">GONE</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> readCount <span class="token operator">=</span> mMaxMessage<span class="token punctuation">.</span><span class="token function">groupAckCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        mTvReadStatus<span class="token punctuation">.</span><span class="token function">setText</span><span class="token punctuation">(</span><span class="token function">getResources</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>string<span class="token punctuation">.</span>read_persons<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token punctuation">(</span>readCount <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token operator">?</span> readCount <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        mTvReadStatus<span class="token punctuation">.</span><span class="token function">setVisibility</span><span class="token punctuation">(</span><span class="token class-name">View</span><span class="token punctuation">.</span><span class="token constant">GONE</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><div class="lanying-code-snippet-caption"><a title="Show Full Source of app/src/main/java/top/maxim/im/message/itemholder/MessageItemBaseView.java" href="https://github.com/maxim-top/lanying-im-android/blob/901cdc7846e8960d9ca5297b7ac8dd99f93f9c0a/app/src/main/java/top/maxim/im/message/itemholder/MessageItemBaseView.java#L256" target="_blank">Github Source: app/src/main/java/top/maxim/im/message/itemholder/MessageItemBaseView.java (line 256)</a></div><pre class="language-"><code class="lang-java"><span class="token punctuation">}</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>mMaxMessage <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    mTvReadStatus<span class="token punctuation">.</span><span class="token function">setVisibility</span><span class="token punctuation">(</span><span class="token class-name">View</span><span class="token punctuation">.</span><span class="token constant">GONE</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>mMaxMessage<span class="token punctuation">.</span><span class="token function">type</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token class-name">BMXMessage<span class="token punctuation">.</span>MessageType<span class="token punctuation">.</span>Single</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// &#x5355;&#x804A;</span>
    mTvReadStatus<span class="token punctuation">.</span><span class="token function">setVisibility</span><span class="token punctuation">(</span><span class="token class-name">View</span><span class="token punctuation">.</span><span class="token constant">VISIBLE</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">boolean</span> isRead <span class="token operator">=</span> mMaxMessage<span class="token punctuation">.</span><span class="token function">isReadAcked</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    mTvReadStatus<span class="token punctuation">.</span><span class="token function">setText</span><span class="token punctuation">(</span>isRead <span class="token operator">?</span> <span class="token function">getResources</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>string<span class="token punctuation">.</span>read<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">getResources</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>string<span class="token punctuation">.</span>unread<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>mMaxMessage<span class="token punctuation">.</span><span class="token function">type</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token class-name">BMXMessage<span class="token punctuation">.</span>MessageType<span class="token punctuation">.</span>Group</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// &#x7FA4;&#x804A;</span>
    mTvReadStatus<span class="token punctuation">.</span><span class="token function">setVisibility</span><span class="token punctuation">(</span>mShowReadAck <span class="token operator">?</span> <span class="token class-name">View</span><span class="token punctuation">.</span><span class="token constant">VISIBLE</span> <span class="token operator">:</span> <span class="token class-name">View</span><span class="token punctuation">.</span><span class="token constant">GONE</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> readCount <span class="token operator">=</span> mMaxMessage<span class="token punctuation">.</span><span class="token function">groupAckCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    mTvReadStatus<span class="token punctuation">.</span><span class="token function">setText</span><span class="token punctuation">(</span><span class="token function">getResources</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>string<span class="token punctuation">.</span>read_persons<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token punctuation">(</span>readCount <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token operator">?</span> readCount <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    mTvReadStatus<span class="token punctuation">.</span><span class="token function">setVisibility</span><span class="token punctuation">(</span><span class="token class-name">View</span><span class="token punctuation">.</span><span class="token constant">GONE</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
mTvReadStatus<span class="token punctuation">.</span><span class="token function">setOnClickListener</span><span class="token punctuation">(</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>mShowReadAck <span class="token operator">||</span> mActionListener <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></code></pre><div class="lanying-code-snippet-caption"><a title="Show Full Source of app/src/main/java/top/maxim/im/message/itemholder/MessageItemBaseView.java" href="https://github.com/maxim-top/lanying-im-android/blob/901cdc7846e8960d9ca5297b7ac8dd99f93f9c0a/app/src/main/java/top/maxim/im/message/itemholder/MessageItemBaseView.java#L261" target="_blank">Github Source: app/src/main/java/top/maxim/im/message/itemholder/MessageItemBaseView.java (line 261)</a></div><pre class="language-"><code class="lang-java"><span class="token annotation punctuation">@Override</span>
<span class="token keyword">protected</span> <span class="token keyword">boolean</span> <span class="token function">isCurrentSession</span><span class="token punctuation">(</span><span class="token class-name">BMXMessage</span> message<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> message <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> message<span class="token punctuation">.</span><span class="token function">type</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token class-name">BMXMessage<span class="token punctuation">.</span>MessageType<span class="token punctuation">.</span>Group</span>
            <span class="token operator">&amp;&amp;</span> message<span class="token punctuation">.</span><span class="token function">toId</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> mChatId<span class="token punctuation">;</span></code></pre><div class="lanying-code-snippet-caption"><a title="Show Full Source of app/src/main/java/top/maxim/im/message/presenter/ChatGroupPresenter.java" href="https://github.com/maxim-top/lanying-im-android/blob/901cdc7846e8960d9ca5297b7ac8dd99f93f9c0a/app/src/main/java/top/maxim/im/message/presenter/ChatGroupPresenter.java#L136" target="_blank">Github Source: app/src/main/java/top/maxim/im/message/presenter/ChatGroupPresenter.java (line 136)</a></div><pre class="language-"><code class="lang-java"><span class="token annotation punctuation">@Override</span>
<span class="token keyword">protected</span> <span class="token keyword">boolean</span> <span class="token function">isCurrentSession</span><span class="token punctuation">(</span><span class="token class-name">BMXMessage</span> message<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>message <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> message<span class="token punctuation">.</span><span class="token function">type</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token class-name">BMXMessage<span class="token punctuation">.</span>MessageType<span class="token punctuation">.</span>Single</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>message<span class="token punctuation">.</span><span class="token function">isReceiveMsg</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// &#x5BF9;&#x65B9;&#x53D1;&#x8FC7;&#x6765;&#x7684;&#x6D88;&#x606F;</span>
        <span class="token keyword">return</span> message<span class="token punctuation">.</span><span class="token function">fromId</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> mChatId<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> message<span class="token punctuation">.</span><span class="token function">toId</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> mChatId<span class="token punctuation">;</span></code></pre><div class="lanying-code-snippet-caption"><a title="Show Full Source of app/src/main/java/top/maxim/im/message/presenter/ChatSinglePresenter.java" href="https://github.com/maxim-top/lanying-im-android/blob/901cdc7846e8960d9ca5297b7ac8dd99f93f9c0a/app/src/main/java/top/maxim/im/message/presenter/ChatSinglePresenter.java#L91" target="_blank">Github Source: app/src/main/java/top/maxim/im/message/presenter/ChatSinglePresenter.java (line 91)</a></div><pre class="language-"><code class="lang-java"><span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">notifyNotification</span><span class="token punctuation">(</span><span class="token class-name">BMXMessage</span> bean<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>bean <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> <span class="token operator">!</span>bean<span class="token punctuation">.</span><span class="token function">isReceiveMsg</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token class-name">Context</span> context <span class="token operator">=</span> <span class="token class-name">AppContextUtils</span><span class="token punctuation">.</span><span class="token function">getAppContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Intent</span> intent <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Intent</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span>context<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>string<span class="token punctuation">.</span>im_push_msg_action<span class="token punctuation">)</span><span class="token punctuation">,</span>
            context<span class="token punctuation">.</span><span class="token function">getPackageName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>bean<span class="token punctuation">.</span><span class="token function">type</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token class-name">BMXMessage<span class="token punctuation">.</span>MessageType<span class="token punctuation">.</span>Group</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        intent<span class="token punctuation">.</span><span class="token function">putExtra</span><span class="token punctuation">(</span><span class="token class-name">MessageConfig</span><span class="token punctuation">.</span><span class="token constant">CHAT_MSG</span><span class="token punctuation">,</span>
                <span class="token class-name">ChatUtils</span><span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">buildMessage</span><span class="token punctuation">(</span>bean<span class="token punctuation">,</span> bean<span class="token punctuation">.</span><span class="token function">type</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> bean<span class="token punctuation">.</span><span class="token function">toId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        intent<span class="token punctuation">.</span><span class="token function">putExtra</span><span class="token punctuation">(</span><span class="token class-name">MessageConfig</span><span class="token punctuation">.</span><span class="token constant">CHAT_MSG</span><span class="token punctuation">,</span>
                <span class="token class-name">ChatUtils</span><span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">buildMessage</span><span class="token punctuation">(</span>bean<span class="token punctuation">,</span> bean<span class="token punctuation">.</span><span class="token function">type</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> bean<span class="token punctuation">.</span><span class="token function">fromId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    intent<span class="token punctuation">.</span><span class="token function">setPackage</span><span class="token punctuation">(</span>context<span class="token punctuation">.</span><span class="token function">getPackageName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    context<span class="token punctuation">.</span><span class="token function">sendBroadcast</span><span class="token punctuation">(</span>intent<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><div class="lanying-code-snippet-caption"><a title="Show Full Source of app/src/main/java/top/maxim/im/sdk/utils/MessageDispatcher.java" href="https://github.com/maxim-top/lanying-im-android/blob/901cdc7846e8960d9ca5297b7ac8dd99f93f9c0a/app/src/main/java/top/maxim/im/sdk/utils/MessageDispatcher.java#L637" target="_blank">Github Source: app/src/main/java/top/maxim/im/sdk/utils/MessageDispatcher.java (line 637)</a></div><pre class="language-"><code class="lang-java"><span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">notifyNotification</span><span class="token punctuation">(</span><span class="token class-name">BMXMessage</span> bean<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>bean <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> <span class="token operator">!</span>bean<span class="token punctuation">.</span><span class="token function">isReceiveMsg</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token class-name">Context</span> context <span class="token operator">=</span> <span class="token class-name">AppContextUtils</span><span class="token punctuation">.</span><span class="token function">getAppContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Intent</span> intent <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Intent</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span>context<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>string<span class="token punctuation">.</span>im_push_msg_action<span class="token punctuation">)</span><span class="token punctuation">,</span>
            context<span class="token punctuation">.</span><span class="token function">getPackageName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>bean<span class="token punctuation">.</span><span class="token function">type</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token class-name">BMXMessage<span class="token punctuation">.</span>MessageType<span class="token punctuation">.</span>Group</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        intent<span class="token punctuation">.</span><span class="token function">putExtra</span><span class="token punctuation">(</span><span class="token class-name">MessageConfig</span><span class="token punctuation">.</span><span class="token constant">CHAT_MSG</span><span class="token punctuation">,</span>
                <span class="token class-name">ChatUtils</span><span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">buildMessage</span><span class="token punctuation">(</span>bean<span class="token punctuation">,</span> bean<span class="token punctuation">.</span><span class="token function">type</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> bean<span class="token punctuation">.</span><span class="token function">toId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        intent<span class="token punctuation">.</span><span class="token function">putExtra</span><span class="token punctuation">(</span><span class="token class-name">MessageConfig</span><span class="token punctuation">.</span><span class="token constant">CHAT_MSG</span><span class="token punctuation">,</span>
                <span class="token class-name">ChatUtils</span><span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">buildMessage</span><span class="token punctuation">(</span>bean<span class="token punctuation">,</span> bean<span class="token punctuation">.</span><span class="token function">type</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> bean<span class="token punctuation">.</span><span class="token function">fromId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    intent<span class="token punctuation">.</span><span class="token function">setPackage</span><span class="token punctuation">(</span>context<span class="token punctuation">.</span><span class="token function">getPackageName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    context<span class="token punctuation">.</span><span class="token function">sendBroadcast</span><span class="token punctuation">(</span>intent<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><div class="lanying-code-snippet-caption"><a title="Show Full Source of app/src/main/java/top/maxim/im/sdk/utils/MessageDispatcher.java" href="https://github.com/maxim-top/lanying-im-android/blob/901cdc7846e8960d9ca5297b7ac8dd99f93f9c0a/app/src/main/java/top/maxim/im/sdk/utils/MessageDispatcher.java#L639" target="_blank">Github Source: app/src/main/java/top/maxim/im/sdk/utils/MessageDispatcher.java (line 639)</a></div><pre class="language-"><code class="lang-java"><span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">notifyNotification</span><span class="token punctuation">(</span><span class="token class-name">BMXMessage</span> bean<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>bean <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> <span class="token operator">!</span>bean<span class="token punctuation">.</span><span class="token function">isReceiveMsg</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token class-name">Context</span> context <span class="token operator">=</span> <span class="token class-name">AppContextUtils</span><span class="token punctuation">.</span><span class="token function">getAppContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Intent</span> intent <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Intent</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span>context<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>string<span class="token punctuation">.</span>im_push_msg_action<span class="token punctuation">)</span><span class="token punctuation">,</span>
            context<span class="token punctuation">.</span><span class="token function">getPackageName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>bean<span class="token punctuation">.</span><span class="token function">type</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token class-name">BMXMessage<span class="token punctuation">.</span>MessageType<span class="token punctuation">.</span>Group</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        intent<span class="token punctuation">.</span><span class="token function">putExtra</span><span class="token punctuation">(</span><span class="token class-name">MessageConfig</span><span class="token punctuation">.</span><span class="token constant">CHAT_MSG</span><span class="token punctuation">,</span>
                <span class="token class-name">ChatUtils</span><span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">buildMessage</span><span class="token punctuation">(</span>bean<span class="token punctuation">,</span> bean<span class="token punctuation">.</span><span class="token function">type</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> bean<span class="token punctuation">.</span><span class="token function">toId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        intent<span class="token punctuation">.</span><span class="token function">putExtra</span><span class="token punctuation">(</span><span class="token class-name">MessageConfig</span><span class="token punctuation">.</span><span class="token constant">CHAT_MSG</span><span class="token punctuation">,</span>
                <span class="token class-name">ChatUtils</span><span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">buildMessage</span><span class="token punctuation">(</span>bean<span class="token punctuation">,</span> bean<span class="token punctuation">.</span><span class="token function">type</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> bean<span class="token punctuation">.</span><span class="token function">fromId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    intent<span class="token punctuation">.</span><span class="token function">setPackage</span><span class="token punctuation">(</span>context<span class="token punctuation">.</span><span class="token function">getPackageName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    context<span class="token punctuation">.</span><span class="token function">sendBroadcast</span><span class="token punctuation">(</span>intent<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><div class="lanying-code-snippet-caption"><a title="Show Full Source of app/src/main/java/top/maxim/im/sdk/utils/MessageDispatcher.java" href="https://github.com/maxim-top/lanying-im-android/blob/901cdc7846e8960d9ca5297b7ac8dd99f93f9c0a/app/src/main/java/top/maxim/im/sdk/utils/MessageDispatcher.java#L642" target="_blank">Github Source: app/src/main/java/top/maxim/im/sdk/utils/MessageDispatcher.java (line 642)</a></div></p>
<h3 id="function-conversationid">function conversationId</h3>
<pre class="language-"><code class="lang-java">inline <span class="token keyword">long</span> <span class="token function">conversationId</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre>
<p>Conversation ID that message belongs to </p>
<p><strong>Return</strong>: int64_t </p>
<p><strong>Example</strong>:</p>
<p><pre class="language-"><code class="lang-java">    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">boolean</span> isSenderOrCaller <span class="token operator">=</span> myId <span class="token operator">==</span> callerId<span class="token punctuation">;</span><span class="token comment">//&#x6D88;&#x606F;&#x53D1;&#x9001;&#x8005;&#x6216;&#x8005;RTC&#x6302;&#x65AD;&#x6D88;&#x606F;&#x5BF9;&#x5E94;&#x7684;&#x901A;&#x8BDD;&#x547C;&#x53EB;&#x65B9;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>isSenderOrCaller<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">BMXRosterItem</span> item <span class="token operator">=</span> <span class="token class-name">RosterFetcher</span><span class="token punctuation">.</span><span class="token function">getFetcher</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getRoster</span><span class="token punctuation">(</span>callerId<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>item <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        userName <span class="token operator">=</span> item<span class="token punctuation">.</span><span class="token function">alias</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token class-name">TextUtils</span><span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span>userName<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token comment">//&#x5982;&#x679C;&#x662F;&#x7FA4;  &#x9700;&#x8981;&#x83B7;&#x53D6;&#x7FA4;&#x6210;&#x5458;&#x540D;&#x79F0;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>group<span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token class-name">BMXGroup<span class="token punctuation">.</span>Member</span> member <span class="token operator">=</span> <span class="token class-name">GroupManager</span><span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getMemberByDB</span><span class="token punctuation">(</span>mMaxMessage<span class="token punctuation">.</span><span class="token function">conversationId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> callerId<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>member <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    userName <span class="token operator">=</span> member<span class="token punctuation">.</span><span class="token function">getMGroupNickname</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">TextUtils</span><span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span>userName<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                userName <span class="token operator">=</span> item<span class="token punctuation">.</span><span class="token function">nickname</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">TextUtils</span><span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span>userName<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    userName <span class="token operator">=</span> item<span class="token punctuation">.</span><span class="token function">username</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><div class="lanying-code-snippet-caption"><a title="Show Full Source of app/src/main/java/top/maxim/im/message/itemholder/MessageItemBaseView.java" href="https://github.com/maxim-top/lanying-im-android/blob/901cdc7846e8960d9ca5297b7ac8dd99f93f9c0a/app/src/main/java/top/maxim/im/message/itemholder/MessageItemBaseView.java#L195" target="_blank">Github Source: app/src/main/java/top/maxim/im/message/itemholder/MessageItemBaseView.java (line 195)</a></div><pre class="language-"><code class="lang-java">        <span class="token punctuation">}</span>

        <span class="token keyword">if</span> <span class="token punctuation">(</span>mIconView <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">ChatUtils</span><span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">showRosterAvatar</span><span class="token punctuation">(</span>item<span class="token punctuation">,</span> mIconView<span class="token punctuation">,</span> <span class="token constant">ICON_CONFIG</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    userName <span class="token operator">=</span> myName<span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>group<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//&#x5982;&#x679C;&#x662F;&#x7FA4;  &#x9700;&#x8981;&#x83B7;&#x53D6;&#x7FA4;&#x6210;&#x5458;&#x540D;&#x79F0;</span>
        <span class="token class-name">BMXGroup<span class="token punctuation">.</span>Member</span> member <span class="token operator">=</span> <span class="token class-name">GroupManager</span><span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getMemberByDB</span><span class="token punctuation">(</span>mMaxMessage<span class="token punctuation">.</span><span class="token function">conversationId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> callerId<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>member <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token class-name">TextUtils</span><span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span>member<span class="token punctuation">.</span><span class="token function">getMGroupNickname</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            userName <span class="token operator">=</span> member<span class="token punctuation">.</span><span class="token function">getMGroupNickname</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>mIconView <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">ChatUtils</span><span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">showProfileAvatar</span><span class="token punctuation">(</span>profile<span class="token punctuation">,</span> mIconView<span class="token punctuation">,</span> <span class="token constant">ICON_CONFIG</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>mIconView <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></code></pre><div class="lanying-code-snippet-caption"><a title="Show Full Source of app/src/main/java/top/maxim/im/message/itemholder/MessageItemBaseView.java" href="https://github.com/maxim-top/lanying-im-android/blob/901cdc7846e8960d9ca5297b7ac8dd99f93f9c0a/app/src/main/java/top/maxim/im/message/itemholder/MessageItemBaseView.java#L216" target="_blank">Github Source: app/src/main/java/top/maxim/im/message/itemholder/MessageItemBaseView.java (line 216)</a></div></p>
<h3 id="function-deliverystatus">function deliveryStatus</h3>
<pre class="language-"><code class="lang-java">inline <span class="token class-name">BMXMessage<span class="token punctuation">.</span>DeliveryStatus</span> <span class="token function">deliveryStatus</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre>
<p>Messaging state </p>
<p><strong>Return</strong>: [DeliveryStatus]</p>
<p><strong>Example</strong>:</p>
<p><pre class="language-"><code class="lang-java"><span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">showSendStatus</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>mItemPos <span class="token operator">!=</span> <span class="token constant">ITEM_RIGHT</span> <span class="token operator">||</span> mSendFailImg <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> mSendingImg <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token class-name">BMXMessage<span class="token punctuation">.</span>DeliveryStatus</span> sendStatus <span class="token operator">=</span> mMaxMessage <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">?</span> <span class="token keyword">null</span>
            <span class="token operator">:</span> mMaxMessage<span class="token punctuation">.</span><span class="token function">deliveryStatus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// &#x6D88;&#x606F;&#x53D1;&#x9001;&#x72B6;&#x6001;&#x662F;&#x5426;&#x5931;&#x8D25;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>sendStatus <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> sendStatus <span class="token operator">==</span> <span class="token class-name">BMXMessage<span class="token punctuation">.</span>DeliveryStatus<span class="token punctuation">.</span>Deliveried</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// &#x7A7A;&#x548C;&#x6210;&#x529F;&#x90FD;&#x5C55;&#x793A;&#x6210;&#x529F;</span>
        mSendFailImg<span class="token punctuation">.</span><span class="token function">setVisibility</span><span class="token punctuation">(</span><span class="token class-name">View</span><span class="token punctuation">.</span><span class="token constant">GONE</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        mSendingImg<span class="token punctuation">.</span><span class="token function">setVisibility</span><span class="token punctuation">(</span><span class="token class-name">View</span><span class="token punctuation">.</span><span class="token constant">GONE</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>sendStatus <span class="token operator">==</span> <span class="token class-name">BMXMessage<span class="token punctuation">.</span>DeliveryStatus<span class="token punctuation">.</span>Failed</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// &#x5931;&#x8D25;</span>
        mSendFailImg<span class="token punctuation">.</span><span class="token function">setVisibility</span><span class="token punctuation">(</span><span class="token class-name">View</span><span class="token punctuation">.</span><span class="token constant">VISIBLE</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        mSendingImg<span class="token punctuation">.</span><span class="token function">setVisibility</span><span class="token punctuation">(</span><span class="token class-name">View</span><span class="token punctuation">.</span><span class="token constant">GONE</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        mSendFailImg<span class="token punctuation">.</span><span class="token function">setVisibility</span><span class="token punctuation">(</span><span class="token class-name">View</span><span class="token punctuation">.</span><span class="token constant">GONE</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        mSendingImg<span class="token punctuation">.</span><span class="token function">setVisibility</span><span class="token punctuation">(</span><span class="token class-name">View</span><span class="token punctuation">.</span><span class="token constant">VISIBLE</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span></code></pre><div class="lanying-code-snippet-caption"><a title="Show Full Source of app/src/main/java/top/maxim/im/message/itemholder/MessageItemBaseView.java" href="https://github.com/maxim-top/lanying-im-android/blob/901cdc7846e8960d9ca5297b7ac8dd99f93f9c0a/app/src/main/java/top/maxim/im/message/itemholder/MessageItemBaseView.java#L285" target="_blank">Github Source: app/src/main/java/top/maxim/im/message/itemholder/MessageItemBaseView.java (line 285)</a></div><pre class="language-"><code class="lang-java">    dialog<span class="token punctuation">.</span><span class="token function">dismiss</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">ForwardMsgRosterActivity</span><span class="token punctuation">.</span><span class="token function">openForwardMsgRosterActivity</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">Activity</span><span class="token punctuation">)</span>mView<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token class-name">ChatUtils</span><span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">buildMessage</span><span class="token punctuation">(</span>message<span class="token punctuation">,</span> mChatType<span class="token punctuation">,</span> mChatId<span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token constant">FORWARD_REQUEST</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
ll<span class="token punctuation">.</span><span class="token function">addView</span><span class="token punctuation">(</span>relay<span class="token punctuation">,</span> params<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// &#x81EA;&#x5DF1;&#x53D1;&#x9001;&#x7684;&#x6D88;&#x606F;&#x624D;&#x6709;&#x64A4;&#x56DE;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>message<span class="token punctuation">.</span><span class="token function">isReceiveMsg</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// &#x64A4;&#x56DE;</span>
    <span class="token class-name">BMXMessage<span class="token punctuation">.</span>DeliveryStatus</span> sendStatus <span class="token operator">=</span> message<span class="token punctuation">.</span><span class="token function">deliveryStatus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// &#x53D1;&#x9001;&#x6210;&#x529F;&#x624D;&#x6709;&#x64A4;&#x56DE;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>sendStatus <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> sendStatus <span class="token operator">==</span> <span class="token class-name">BMXMessage<span class="token punctuation">.</span>DeliveryStatus<span class="token punctuation">.</span>Deliveried</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">TextView</span> revoke <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TextView</span><span class="token punctuation">(</span>mView<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        revoke<span class="token punctuation">.</span><span class="token function">setPadding</span><span class="token punctuation">(</span><span class="token class-name">ScreenUtils</span><span class="token punctuation">.</span><span class="token function">dp2px</span><span class="token punctuation">(</span><span class="token number">15</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">ScreenUtils</span><span class="token punctuation">.</span><span class="token function">dp2px</span><span class="token punctuation">(</span><span class="token number">15</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token class-name">ScreenUtils</span><span class="token punctuation">.</span><span class="token function">dp2px</span><span class="token punctuation">(</span><span class="token number">15</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        revoke<span class="token punctuation">.</span><span class="token function">setTextSize</span><span class="token punctuation">(</span><span class="token class-name">TypedValue</span><span class="token punctuation">.</span><span class="token constant">COMPLEX_UNIT_DIP</span><span class="token punctuation">,</span> <span class="token number">17</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        revoke<span class="token punctuation">.</span><span class="token function">setTextColor</span><span class="token punctuation">(</span>
                mView<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getResources</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getColor</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>color<span class="token punctuation">.</span>color_black<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        revoke<span class="token punctuation">.</span><span class="token function">setBackgroundColor</span><span class="token punctuation">(</span></code></pre><div class="lanying-code-snippet-caption"><a title="Show Full Source of app/src/main/java/top/maxim/im/message/presenter/ChatBasePresenter.java" href="https://github.com/maxim-top/lanying-im-android/blob/901cdc7846e8960d9ca5297b7ac8dd99f93f9c0a/app/src/main/java/top/maxim/im/message/presenter/ChatBasePresenter.java#L857" target="_blank">Github Source: app/src/main/java/top/maxim/im/message/presenter/ChatBasePresenter.java (line 857)</a></div></p>
<h3 id="function-setdeliverystatus">function setDeliveryStatus</h3>
<pre class="language-"><code class="lang-java">inline <span class="token keyword">void</span> <span class="token function">setDeliveryStatus</span><span class="token punctuation">(</span>
    <span class="token class-name">BMXMessage<span class="token punctuation">.</span>DeliveryStatus</span> arg0
<span class="token punctuation">)</span>
</code></pre>
<p>Set messaging state </p>
<p><strong>Example</strong>:</p>
<p></p>
<h3 id="function-servertimestamp">function serverTimestamp</h3>
<pre class="language-"><code class="lang-java">inline <span class="token keyword">long</span> <span class="token function">serverTimestamp</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre>
<p>Message timestamp (when received by server-side) </p>
<p><strong>Return</strong>: int64_t </p>
<p><strong>Example</strong>:</p>
<p><pre class="language-"><code class="lang-java"><span class="token keyword">private</span> <span class="token keyword">boolean</span> <span class="token function">isShowTime</span><span class="token punctuation">(</span><span class="token keyword">int</span> position<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// &#x804A;&#x5929;&#x6D88;&#x606F;&#x65F6;&#x95F4;&#x6233;&#x4E3A;&#x6BEB;&#x79D2;&#x7EA7; &#x76EE;&#x524D;&#x4E3A;10&#x5206;&#x949F;&#x95F4;&#x9694; &#x4E5F;&#x5C31;&#x662F;10 * 60 * 1000</span>
    <span class="token keyword">long</span> timeOut <span class="token operator">=</span> <span class="token number">10</span> <span class="token operator">*</span> <span class="token number">60</span> <span class="token operator">*</span> <span class="token number">1000</span><span class="token punctuation">;</span>
    <span class="token class-name">BMXMessage</span> current <span class="token operator">=</span> mBeans<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>position<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">boolean</span> showtime <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>position <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">BMXMessage</span> pre <span class="token operator">=</span> mBeans<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>position <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>current<span class="token punctuation">.</span><span class="token function">serverTimestamp</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span> <span class="token operator">||</span> pre<span class="token punctuation">.</span><span class="token function">serverTimestamp</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            showtime <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token keyword">long</span> time_cha <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                time_cha <span class="token operator">=</span> <span class="token punctuation">(</span>current<span class="token punctuation">.</span><span class="token function">serverTimestamp</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> pre<span class="token punctuation">.</span><span class="token function">serverTimestamp</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">/</span> timeOut<span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            showtime <span class="token operator">=</span> time_cha <span class="token operator">&gt;=</span> <span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> showtime<span class="token punctuation">;</span></code></pre><div class="lanying-code-snippet-caption"><a title="Show Full Source of app/src/main/java/top/maxim/im/message/adapter/ChatMessageAdapter.java" href="https://github.com/maxim-top/lanying-im-android/blob/901cdc7846e8960d9ca5297b7ac8dd99f93f9c0a/app/src/main/java/top/maxim/im/message/adapter/ChatMessageAdapter.java#L206" target="_blank">Github Source: app/src/main/java/top/maxim/im/message/adapter/ChatMessageAdapter.java (line 206)</a></div><pre class="language-"><code class="lang-java"><span class="token keyword">long</span> timeOut <span class="token operator">=</span> <span class="token number">10</span> <span class="token operator">*</span> <span class="token number">60</span> <span class="token operator">*</span> <span class="token number">1000</span><span class="token punctuation">;</span>
<span class="token class-name">BMXMessage</span> current <span class="token operator">=</span> mBeans<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>position<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">boolean</span> showtime <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>position <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">BMXMessage</span> pre <span class="token operator">=</span> mBeans<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>position <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>current<span class="token punctuation">.</span><span class="token function">serverTimestamp</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span> <span class="token operator">||</span> pre<span class="token punctuation">.</span><span class="token function">serverTimestamp</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        showtime <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token keyword">long</span> time_cha <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            time_cha <span class="token operator">=</span> <span class="token punctuation">(</span>current<span class="token punctuation">.</span><span class="token function">serverTimestamp</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> pre<span class="token punctuation">.</span><span class="token function">serverTimestamp</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">/</span> timeOut<span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        showtime <span class="token operator">=</span> time_cha <span class="token operator">&gt;=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">return</span> showtime<span class="token punctuation">;</span></code></pre><div class="lanying-code-snippet-caption"><a title="Show Full Source of app/src/main/java/top/maxim/im/message/adapter/ChatMessageAdapter.java" href="https://github.com/maxim-top/lanying-im-android/blob/901cdc7846e8960d9ca5297b7ac8dd99f93f9c0a/app/src/main/java/top/maxim/im/message/adapter/ChatMessageAdapter.java#L211" target="_blank">Github Source: app/src/main/java/top/maxim/im/message/adapter/ChatMessageAdapter.java (line 211)</a></div><pre class="language-"><code class="lang-java"><span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    ivDisturb<span class="token punctuation">.</span><span class="token function">setVisibility</span><span class="token punctuation">(</span><span class="token class-name">View</span><span class="token punctuation">.</span><span class="token constant">GONE</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>unReadCount <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        tvUnReadCount<span class="token punctuation">.</span><span class="token function">setVisibility</span><span class="token punctuation">(</span><span class="token class-name">View</span><span class="token punctuation">.</span><span class="token constant">VISIBLE</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        tvUnReadCount<span class="token punctuation">.</span><span class="token function">setText</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span>unReadCount<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        tvUnReadCount<span class="token punctuation">.</span><span class="token function">setVisibility</span><span class="token punctuation">(</span><span class="token class-name">View</span><span class="token punctuation">.</span><span class="token constant">GONE</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
tvTitle<span class="token punctuation">.</span><span class="token function">setText</span><span class="token punctuation">(</span><span class="token class-name">TextUtils</span><span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token string">&quot;&quot;</span> <span class="token operator">:</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
time<span class="token punctuation">.</span><span class="token function">setText</span><span class="token punctuation">(</span>lastMsg <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">?</span> <span class="token class-name">TimeUtils</span><span class="token punctuation">.</span><span class="token function">millis2String</span><span class="token punctuation">(</span>mContext<span class="token punctuation">,</span> lastMsg<span class="token punctuation">.</span><span class="token function">serverTimestamp</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">String</span> draft <span class="token operator">=</span> item <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">?</span> <span class="token string">&quot;&quot;</span> <span class="token operator">:</span> item<span class="token punctuation">.</span><span class="token function">editMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token class-name">TextUtils</span><span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span>draft<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// &#x6709;&#x8349;&#x7A3F;</span>
    <span class="token class-name">SpannableStringBuilder</span> spannable <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SpannableStringBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">String</span> draftText <span class="token operator">=</span> mContext<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>string<span class="token punctuation">.</span>draft<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">SpannableString</span> spannableString <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SpannableString</span><span class="token punctuation">(</span>draftText<span class="token punctuation">)</span><span class="token punctuation">;</span>
    spannableString<span class="token punctuation">.</span><span class="token function">setSpan</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ForegroundColorSpan</span><span class="token punctuation">(</span><span class="token class-name">Color</span><span class="token punctuation">.</span><span class="token constant">RED</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> draftText<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token class-name">Spannable</span><span class="token punctuation">.</span><span class="token constant">SPAN_EXCLUSIVE_EXCLUSIVE</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    spannable<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>spannableString<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>draft<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><div class="lanying-code-snippet-caption"><a title="Show Full Source of app/src/main/java/top/maxim/im/message/adapter/SessionAdapter.java" href="https://github.com/maxim-top/lanying-im-android/blob/901cdc7846e8960d9ca5297b7ac8dd99f93f9c0a/app/src/main/java/top/maxim/im/message/adapter/SessionAdapter.java#L120" target="_blank">Github Source: app/src/main/java/top/maxim/im/message/adapter/SessionAdapter.java (line 120)</a></div><pre class="language-"><code class="lang-java"><span class="token annotation punctuation">@Override</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">bindData</span><span class="token punctuation">(</span><span class="token class-name">BMXMessage</span> maXMessage<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    mMaxMessage <span class="token operator">=</span> maXMessage<span class="token punctuation">;</span>
    mTxtMessageTime<span class="token punctuation">.</span><span class="token function">setText</span><span class="token punctuation">(</span><span class="token class-name">TimeUtils</span><span class="token punctuation">.</span><span class="token function">millis2String</span><span class="token punctuation">(</span>mContext<span class="token punctuation">,</span> maXMessage<span class="token punctuation">.</span><span class="token function">serverTimestamp</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">showHead</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">bindData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">showReadStatus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">showSendStatus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><div class="lanying-code-snippet-caption"><a title="Show Full Source of app/src/main/java/top/maxim/im/message/itemholder/MessageItemBaseView.java" href="https://github.com/maxim-top/lanying-im-android/blob/901cdc7846e8960d9ca5297b7ac8dd99f93f9c0a/app/src/main/java/top/maxim/im/message/itemholder/MessageItemBaseView.java#L118" target="_blank">Github Source: app/src/main/java/top/maxim/im/message/itemholder/MessageItemBaseView.java (line 118)</a></div><pre class="language-"><code class="lang-java"><span class="token punctuation">}</span>
<span class="token class-name">String</span> name <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
<span class="token class-name">BMXRosterItem</span> rosterItem <span class="token operator">=</span> <span class="token class-name">RosterFetcher</span><span class="token punctuation">.</span><span class="token function">getFetcher</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getRoster</span><span class="token punctuation">(</span>message<span class="token punctuation">.</span><span class="token function">fromId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>rosterItem <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token class-name">TextUtils</span><span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span>rosterItem<span class="token punctuation">.</span><span class="token function">nickname</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    name <span class="token operator">=</span> rosterItem<span class="token punctuation">.</span><span class="token function">nickname</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>rosterItem <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    name <span class="token operator">=</span> rosterItem<span class="token punctuation">.</span><span class="token function">username</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token class-name">ChatUtils</span><span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">showRosterAvatar</span><span class="token punctuation">(</span>rosterItem<span class="token punctuation">,</span> avatar<span class="token punctuation">,</span> mConfig<span class="token punctuation">)</span><span class="token punctuation">;</span>
tvTitle<span class="token punctuation">.</span><span class="token function">setText</span><span class="token punctuation">(</span><span class="token class-name">TextUtils</span><span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token string">&quot;&quot;</span> <span class="token operator">:</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
time<span class="token punctuation">.</span><span class="token function">setText</span><span class="token punctuation">(</span><span class="token class-name">TimeUtils</span><span class="token punctuation">.</span><span class="token function">millis2String</span><span class="token punctuation">(</span>mContext<span class="token punctuation">,</span> message<span class="token punctuation">.</span><span class="token function">serverTimestamp</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">String</span> msgDesc <span class="token operator">=</span> <span class="token class-name">ChatUtils</span><span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getMessageDesc</span><span class="token punctuation">(</span>mContext<span class="token punctuation">,</span> message<span class="token punctuation">)</span><span class="token punctuation">;</span>
desc<span class="token punctuation">.</span><span class="token function">setText</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token class-name">TextUtils</span><span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span>msgDesc<span class="token punctuation">)</span> <span class="token operator">?</span> msgDesc <span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><div class="lanying-code-snippet-caption"><a title="Show Full Source of app/src/main/java/top/maxim/im/message/view/MessageSearchActivity.java" href="https://github.com/maxim-top/lanying-im-android/blob/901cdc7846e8960d9ca5297b7ac8dd99f93f9c0a/app/src/main/java/top/maxim/im/message/view/MessageSearchActivity.java#L293" target="_blank">Github Source: app/src/main/java/top/maxim/im/message/view/MessageSearchActivity.java (line 293)</a></div><pre class="language-"><code class="lang-java"><span class="token keyword">long</span> o1Time <span class="token operator">=</span> m1 <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">?</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token operator">:</span> m1<span class="token punctuation">.</span><span class="token function">serverTimestamp</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><div class="lanying-code-snippet-caption"><a title="Show Full Source of app/src/main/java/top/maxim/im/message/view/SessionFragment.java" href="https://github.com/maxim-top/lanying-im-android/blob/901cdc7846e8960d9ca5297b7ac8dd99f93f9c0a/app/src/main/java/top/maxim/im/message/view/SessionFragment.java#L223" target="_blank">Github Source: app/src/main/java/top/maxim/im/message/view/SessionFragment.java (line 223)</a></div></p>
<h3 id="function-setservertimestamp">function setServerTimestamp</h3>
<pre class="language-"><code class="lang-java">inline <span class="token keyword">void</span> <span class="token function">setServerTimestamp</span><span class="token punctuation">(</span>
    <span class="token keyword">long</span> arg0
<span class="token punctuation">)</span>
</code></pre>
<p>Set message timestamp (when received by server-side) </p>
<p><strong>Example</strong>:</p>
<p></p>
<h3 id="function-clienttimestamp">function clientTimestamp</h3>
<pre class="language-"><code class="lang-java">inline <span class="token keyword">long</span> <span class="token function">clientTimestamp</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre>
<p>Local timestamp (local time when message created or received) </p>
<p><strong>Return</strong>: int64_t </p>
<p><strong>Example</strong>:</p>
<p></p>
<h3 id="function-setclienttimestamp">function setClientTimestamp</h3>
<pre class="language-"><code class="lang-java">inline <span class="token keyword">void</span> <span class="token function">setClientTimestamp</span><span class="token punctuation">(</span>
    <span class="token keyword">long</span> arg0
<span class="token punctuation">)</span>
</code></pre>
<p>Set message local timestamp </p>
<p><strong>Example</strong>:</p>
<p></p>
<h3 id="function-isplayed">function isPlayed</h3>
<pre class="language-"><code class="lang-java">inline <span class="token keyword">boolean</span> <span class="token function">isPlayed</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre>
<p>Whether voice or video message has been played, valid only for received audio/video messages </p>
<p><strong>Return</strong>: bool </p>
<p><strong>Example</strong>:</p>
<p></p>
<h3 id="function-setisplayed">function setIsPlayed</h3>
<pre class="language-"><code class="lang-java">inline <span class="token keyword">void</span> <span class="token function">setIsPlayed</span><span class="token punctuation">(</span>
    <span class="token keyword">boolean</span> arg0
<span class="token punctuation">)</span>
</code></pre>
<p><strong>Example</strong>:</p>
<p></p>
<h3 id="function-isplayacked">function isPlayAcked</h3>
<pre class="language-"><code class="lang-java">inline <span class="token keyword">boolean</span> <span class="token function">isPlayAcked</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre>
<p>Whether voice or video message receives a playback acknowledgement, valid only for received audio/video messages </p>
<p><strong>Return</strong>: bool </p>
<p><strong>Example</strong>:</p>
<p></p>
<h3 id="function-setisplayacked">function setIsPlayAcked</h3>
<pre class="language-"><code class="lang-java">inline <span class="token keyword">void</span> <span class="token function">setIsPlayAcked</span><span class="token punctuation">(</span>
    <span class="token keyword">boolean</span> arg0
<span class="token punctuation">)</span>
</code></pre>
<p><strong>Example</strong>:</p>
<p></p>
<h3 id="function-isreceivemsg">function isReceiveMsg</h3>
<pre class="language-"><code class="lang-java">inline <span class="token keyword">boolean</span> <span class="token function">isReceiveMsg</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre>
<p>Message whether to receive </p>
<p><strong>Return</strong>: bool </p>
<p><strong>Example</strong>:</p>
<p><pre class="language-"><code class="lang-java"><span class="token keyword">private</span> <span class="token keyword">int</span> <span class="token function">getChatItemType</span><span class="token punctuation">(</span><span class="token class-name">BMXMessage</span> bean<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>bean <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">boolean</span> isMySend <span class="token operator">=</span> <span class="token operator">!</span>bean<span class="token punctuation">.</span><span class="token function">isReceiveMsg</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>bean<span class="token punctuation">.</span><span class="token function">contentType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token class-name">BMXMessage<span class="token punctuation">.</span>ContentType</span><span class="token punctuation">.</span><span class="token constant">RTC</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">BMXMessageConfig</span> config <span class="token operator">=</span> bean<span class="token punctuation">.</span><span class="token function">config</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>config <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> config<span class="token punctuation">.</span><span class="token function">getRTCAction</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">&quot;hangup&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token class-name">String</span> content <span class="token operator">=</span> bean<span class="token punctuation">.</span><span class="token function">content</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>content<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">&quot;rejected&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                isMySend <span class="token operator">=</span> <span class="token operator">!</span>isMySend<span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>content<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">&quot;canceled&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>config<span class="token punctuation">.</span><span class="token function">getRTCInitiator</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">!=</span> bean<span class="token punctuation">.</span><span class="token function">fromId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                    isMySend <span class="token operator">=</span> <span class="token operator">!</span>isMySend<span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">int</span> viewType <span class="token operator">=</span> <span class="token class-name">MsgBodyHelper</span><span class="token punctuation">.</span><span class="token function">getContentBodyClass</span><span class="token punctuation">(</span>bean<span class="token punctuation">.</span><span class="token function">contentType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">swigValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token keyword">null</span>
            <span class="token operator">?</span> bean<span class="token punctuation">.</span><span class="token function">contentType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">swigValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre><div class="lanying-code-snippet-caption"><a title="Show Full Source of app/src/main/java/top/maxim/im/message/adapter/ChatMessageAdapter.java" href="https://github.com/maxim-top/lanying-im-android/blob/901cdc7846e8960d9ca5297b7ac8dd99f93f9c0a/app/src/main/java/top/maxim/im/message/adapter/ChatMessageAdapter.java#L173" target="_blank">Github Source: app/src/main/java/top/maxim/im/message/adapter/ChatMessageAdapter.java (line 173)</a></div><pre class="language-"><code class="lang-java">    <span class="token comment">// &#x6709;&#x8349;&#x7A3F;</span>
    <span class="token class-name">SpannableStringBuilder</span> spannable <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SpannableStringBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">String</span> draftText <span class="token operator">=</span> mContext<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>string<span class="token punctuation">.</span>draft<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">SpannableString</span> spannableString <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SpannableString</span><span class="token punctuation">(</span>draftText<span class="token punctuation">)</span><span class="token punctuation">;</span>
    spannableString<span class="token punctuation">.</span><span class="token function">setSpan</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ForegroundColorSpan</span><span class="token punctuation">(</span><span class="token class-name">Color</span><span class="token punctuation">.</span><span class="token constant">RED</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> draftText<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token class-name">Spannable</span><span class="token punctuation">.</span><span class="token constant">SPAN_EXCLUSIVE_EXCLUSIVE</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    spannable<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>spannableString<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>draft<span class="token punctuation">)</span><span class="token punctuation">;</span>
    desc<span class="token punctuation">.</span><span class="token function">setText</span><span class="token punctuation">(</span>spannable<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token class-name">String</span> msgDesc <span class="token operator">=</span> <span class="token class-name">ChatUtils</span><span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getMessageDesc</span><span class="token punctuation">(</span>mContext<span class="token punctuation">,</span> lastMsg<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>lastMsg <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> lastMsg<span class="token punctuation">.</span><span class="token function">isReceiveMsg</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> lastMsg<span class="token punctuation">.</span><span class="token function">config</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// &#x6709;@</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token class-name">BMXMessageConfig</span> config <span class="token operator">=</span> lastMsg<span class="token punctuation">.</span><span class="token function">config</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>config<span class="token punctuation">.</span><span class="token function">getMentionAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                msgDesc <span class="token operator">=</span> mContext<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>string<span class="token punctuation">.</span>someone_at_you<span class="token punctuation">)</span> <span class="token operator">+</span> msgDesc<span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                <span class="token class-name">ListOfLongLong</span> atList <span class="token operator">=</span> config<span class="token punctuation">.</span><span class="token function">getMentionList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>atList <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>atList<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> atList<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></code></pre><div class="lanying-code-snippet-caption"><a title="Show Full Source of app/src/main/java/top/maxim/im/message/adapter/SessionAdapter.java" href="https://github.com/maxim-top/lanying-im-android/blob/901cdc7846e8960d9ca5297b7ac8dd99f93f9c0a/app/src/main/java/top/maxim/im/message/adapter/SessionAdapter.java#L133" target="_blank">Github Source: app/src/main/java/top/maxim/im/message/adapter/SessionAdapter.java (line 133)</a></div><pre class="language-"><code class="lang-java">relay<span class="token punctuation">.</span><span class="token function">setText</span><span class="token punctuation">(</span>mView<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>string<span class="token punctuation">.</span>chat_msg_relay<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
relay<span class="token punctuation">.</span><span class="token function">setOnClickListener</span><span class="token punctuation">(</span>v <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
    dialog<span class="token punctuation">.</span><span class="token function">dismiss</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">ForwardMsgRosterActivity</span><span class="token punctuation">.</span><span class="token function">openForwardMsgRosterActivity</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">Activity</span><span class="token punctuation">)</span>mView<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token class-name">ChatUtils</span><span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">buildMessage</span><span class="token punctuation">(</span>message<span class="token punctuation">,</span> mChatType<span class="token punctuation">,</span> mChatId<span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token constant">FORWARD_REQUEST</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
ll<span class="token punctuation">.</span><span class="token function">addView</span><span class="token punctuation">(</span>relay<span class="token punctuation">,</span> params<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// &#x81EA;&#x5DF1;&#x53D1;&#x9001;&#x7684;&#x6D88;&#x606F;&#x624D;&#x6709;&#x64A4;&#x56DE;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>message<span class="token punctuation">.</span><span class="token function">isReceiveMsg</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// &#x64A4;&#x56DE;</span>
    <span class="token class-name">BMXMessage<span class="token punctuation">.</span>DeliveryStatus</span> sendStatus <span class="token operator">=</span> message<span class="token punctuation">.</span><span class="token function">deliveryStatus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// &#x53D1;&#x9001;&#x6210;&#x529F;&#x624D;&#x6709;&#x64A4;&#x56DE;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>sendStatus <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> sendStatus <span class="token operator">==</span> <span class="token class-name">BMXMessage<span class="token punctuation">.</span>DeliveryStatus<span class="token punctuation">.</span>Deliveried</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">TextView</span> revoke <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TextView</span><span class="token punctuation">(</span>mView<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        revoke<span class="token punctuation">.</span><span class="token function">setPadding</span><span class="token punctuation">(</span><span class="token class-name">ScreenUtils</span><span class="token punctuation">.</span><span class="token function">dp2px</span><span class="token punctuation">(</span><span class="token number">15</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">ScreenUtils</span><span class="token punctuation">.</span><span class="token function">dp2px</span><span class="token punctuation">(</span><span class="token number">15</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token class-name">ScreenUtils</span><span class="token punctuation">.</span><span class="token function">dp2px</span><span class="token punctuation">(</span><span class="token number">15</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        revoke<span class="token punctuation">.</span><span class="token function">setTextSize</span><span class="token punctuation">(</span><span class="token class-name">TypedValue</span><span class="token punctuation">.</span><span class="token constant">COMPLEX_UNIT_DIP</span><span class="token punctuation">,</span> <span class="token number">17</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        revoke<span class="token punctuation">.</span><span class="token function">setTextColor</span><span class="token punctuation">(</span></code></pre><div class="lanying-code-snippet-caption"><a title="Show Full Source of app/src/main/java/top/maxim/im/message/presenter/ChatBasePresenter.java" href="https://github.com/maxim-top/lanying-im-android/blob/901cdc7846e8960d9ca5297b7ac8dd99f93f9c0a/app/src/main/java/top/maxim/im/message/presenter/ChatBasePresenter.java#L855" target="_blank">Github Source: app/src/main/java/top/maxim/im/message/presenter/ChatBasePresenter.java (line 855)</a></div><pre class="language-"><code class="lang-java">                mView<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getResources</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getColor</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>color<span class="token punctuation">.</span>color_white<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        revoke<span class="token punctuation">.</span><span class="token function">setText</span><span class="token punctuation">(</span>mView<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>string<span class="token punctuation">.</span>chat_msg_revoke<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        revoke<span class="token punctuation">.</span><span class="token function">setOnClickListener</span><span class="token punctuation">(</span>v <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
            dialog<span class="token punctuation">.</span><span class="token function">dismiss</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">revokeMessage</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        ll<span class="token punctuation">.</span><span class="token function">addView</span><span class="token punctuation">(</span>revoke<span class="token punctuation">,</span> params<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// &#x5BF9;&#x65B9;&#x53D1;&#x9001;&#x7684;&#x6D88;&#x606F;&#x624D;&#x6709;&#x6807;&#x8BB0;&#x5DF2;&#x8BFB;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>message<span class="token punctuation">.</span><span class="token function">isReceiveMsg</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// &#x6807;&#x8BB0;&#x5DF2;&#x8BFB;</span>
    <span class="token class-name">TextView</span> ackRead <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TextView</span><span class="token punctuation">(</span>mView<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ackRead<span class="token punctuation">.</span><span class="token function">setPadding</span><span class="token punctuation">(</span><span class="token class-name">ScreenUtils</span><span class="token punctuation">.</span><span class="token function">dp2px</span><span class="token punctuation">(</span><span class="token number">15</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">ScreenUtils</span><span class="token punctuation">.</span><span class="token function">dp2px</span><span class="token punctuation">(</span><span class="token number">15</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">ScreenUtils</span><span class="token punctuation">.</span><span class="token function">dp2px</span><span class="token punctuation">(</span><span class="token number">15</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ackRead<span class="token punctuation">.</span><span class="token function">setTextSize</span><span class="token punctuation">(</span><span class="token class-name">TypedValue</span><span class="token punctuation">.</span><span class="token constant">COMPLEX_UNIT_DIP</span><span class="token punctuation">,</span> <span class="token number">17</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ackRead<span class="token punctuation">.</span><span class="token function">setTextColor</span><span class="token punctuation">(</span>mView<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getResources</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getColor</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>color<span class="token punctuation">.</span>color_black<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ackRead<span class="token punctuation">.</span><span class="token function">setBackgroundColor</span><span class="token punctuation">(</span>
            mView<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getResources</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getColor</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>color<span class="token punctuation">.</span>color_white<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ackRead<span class="token punctuation">.</span><span class="token function">setText</span><span class="token punctuation">(</span>mView<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>string<span class="token punctuation">.</span>chat_msg_ack<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><div class="lanying-code-snippet-caption"><a title="Show Full Source of app/src/main/java/top/maxim/im/message/presenter/ChatBasePresenter.java" href="https://github.com/maxim-top/lanying-im-android/blob/901cdc7846e8960d9ca5297b7ac8dd99f93f9c0a/app/src/main/java/top/maxim/im/message/presenter/ChatBasePresenter.java#L877" target="_blank">Github Source: app/src/main/java/top/maxim/im/message/presenter/ChatBasePresenter.java (line 877)</a></div><pre class="language-"><code class="lang-java"><span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">ackMessage</span><span class="token punctuation">(</span><span class="token keyword">final</span> <span class="token class-name">BMXMessage</span> message<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// &#x5DF2;&#x8BFB;&#x4E0D;&#x5728;&#x53D1;&#x9001; &#x81EA;&#x5DF1;&#x53D1;&#x9001;&#x7684;&#x6D88;&#x606F;&#x4E0D;&#x8BBE;&#x7F6E;&#x5DF2;&#x8BFB;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>message <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> message<span class="token punctuation">.</span><span class="token function">isReadAcked</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token operator">!</span>message<span class="token punctuation">.</span><span class="token function">isReceiveMsg</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token class-name">Observable</span><span class="token punctuation">.</span><span class="token function">just</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Func1</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">BMXMessage</span><span class="token punctuation">,</span> <span class="token class-name">BMXMessage</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token annotation punctuation">@Override</span>
        <span class="token keyword">public</span> <span class="token class-name">BMXMessage</span> <span class="token function">call</span><span class="token punctuation">(</span><span class="token class-name">BMXMessage</span> message<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">ChatManager</span><span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ackMessage</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> message<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">subscribeOn</span><span class="token punctuation">(</span><span class="token class-name">Schedulers</span><span class="token punctuation">.</span><span class="token function">computation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">observeOn</span><span class="token punctuation">(</span><span class="token class-name">AndroidSchedulers</span><span class="token punctuation">.</span><span class="token function">mainThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Subscriber</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">BMXMessage</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token annotation punctuation">@Override</span>
                <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onCompleted</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

                <span class="token punctuation">}</span>

                <span class="token annotation punctuation">@Override</span>
                <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onError</span><span class="token punctuation">(</span><span class="token class-name">Throwable</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span></code></pre><div class="lanying-code-snippet-caption"><a title="Show Full Source of app/src/main/java/top/maxim/im/message/presenter/ChatBasePresenter.java" href="https://github.com/maxim-top/lanying-im-android/blob/901cdc7846e8960d9ca5297b7ac8dd99f93f9c0a/app/src/main/java/top/maxim/im/message/presenter/ChatBasePresenter.java#L1003" target="_blank">Github Source: app/src/main/java/top/maxim/im/message/presenter/ChatBasePresenter.java (line 1003)</a></div><pre class="language-"><code class="lang-java"><span class="token annotation punctuation">@Override</span>
<span class="token keyword">protected</span> <span class="token keyword">boolean</span> <span class="token function">isCurrentSession</span><span class="token punctuation">(</span><span class="token class-name">BMXMessage</span> message<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>message <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> message<span class="token punctuation">.</span><span class="token function">type</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token class-name">BMXMessage<span class="token punctuation">.</span>MessageType<span class="token punctuation">.</span>Single</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>message<span class="token punctuation">.</span><span class="token function">isReceiveMsg</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// &#x5BF9;&#x65B9;&#x53D1;&#x8FC7;&#x6765;&#x7684;&#x6D88;&#x606F;</span>
        <span class="token keyword">return</span> message<span class="token punctuation">.</span><span class="token function">fromId</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> mChatId<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> message<span class="token punctuation">.</span><span class="token function">toId</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> mChatId<span class="token punctuation">;</span></code></pre><div class="lanying-code-snippet-caption"><a title="Show Full Source of app/src/main/java/top/maxim/im/message/presenter/ChatSinglePresenter.java" href="https://github.com/maxim-top/lanying-im-android/blob/901cdc7846e8960d9ca5297b7ac8dd99f93f9c0a/app/src/main/java/top/maxim/im/message/presenter/ChatSinglePresenter.java#L94" target="_blank">Github Source: app/src/main/java/top/maxim/im/message/presenter/ChatSinglePresenter.java (line 94)</a></div><pre class="language-"><code class="lang-java"><span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getMessageDesc</span><span class="token punctuation">(</span><span class="token class-name">Context</span> context<span class="token punctuation">,</span> <span class="token class-name">BMXMessage</span> message<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>message <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token class-name">BMXMessage<span class="token punctuation">.</span>ContentType</span> type <span class="token operator">=</span> message<span class="token punctuation">.</span><span class="token function">contentType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">String</span> content <span class="token operator">=</span> message<span class="token punctuation">.</span><span class="token function">content</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token function">getMessageDesc</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> type<span class="token punctuation">,</span> content<span class="token punctuation">,</span> message<span class="token punctuation">.</span><span class="token function">isReceiveMsg</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><div class="lanying-code-snippet-caption"><a title="Show Full Source of app/src/main/java/top/maxim/im/message/utils/ChatUtils.java" href="https://github.com/maxim-top/lanying-im-android/blob/901cdc7846e8960d9ca5297b7ac8dd99f93f9c0a/app/src/main/java/top/maxim/im/message/utils/ChatUtils.java#L204" target="_blank">Github Source: app/src/main/java/top/maxim/im/message/utils/ChatUtils.java (line 204)</a></div><pre class="language-"><code class="lang-java"><span class="token keyword">public</span> <span class="token class-name">MessageBean</span> <span class="token function">buildMessage</span><span class="token punctuation">(</span><span class="token class-name">BMXMessage</span> mBmxMessage<span class="token punctuation">,</span> <span class="token class-name">BMXMessage<span class="token punctuation">.</span>MessageType</span> type<span class="token punctuation">,</span>
        <span class="token keyword">long</span> chatId<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>mBmxMessage <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token class-name">MessageBean</span> messageBean <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MessageBean</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">BMXMessage<span class="token punctuation">.</span>ContentType</span> contentType <span class="token operator">=</span> mBmxMessage<span class="token punctuation">.</span><span class="token function">contentType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    messageBean<span class="token punctuation">.</span><span class="token function">setContentType</span><span class="token punctuation">(</span>contentType<span class="token punctuation">)</span><span class="token punctuation">;</span>
    messageBean<span class="token punctuation">.</span><span class="token function">setType</span><span class="token punctuation">(</span>type<span class="token punctuation">)</span><span class="token punctuation">;</span>
    messageBean<span class="token punctuation">.</span><span class="token function">setChatId</span><span class="token punctuation">(</span>chatId<span class="token punctuation">)</span><span class="token punctuation">;</span>
    messageBean<span class="token punctuation">.</span><span class="token function">setReceiveMsg</span><span class="token punctuation">(</span>mBmxMessage<span class="token punctuation">.</span><span class="token function">isReceiveMsg</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>contentType <span class="token operator">==</span> <span class="token class-name">BMXMessage<span class="token punctuation">.</span>ContentType<span class="token punctuation">.</span>Text</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> text <span class="token operator">=</span> mBmxMessage<span class="token punctuation">.</span><span class="token function">content</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token class-name">TextUtils</span><span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span>text<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            messageBean<span class="token punctuation">.</span><span class="token function">setContent</span><span class="token punctuation">(</span>text<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> messageBean<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>contentType <span class="token operator">==</span> <span class="token class-name">BMXMessage<span class="token punctuation">.</span>ContentType<span class="token punctuation">.</span>Image</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></code></pre><div class="lanying-code-snippet-caption"><a title="Show Full Source of app/src/main/java/top/maxim/im/message/utils/ChatUtils.java" href="https://github.com/maxim-top/lanying-im-android/blob/901cdc7846e8960d9ca5297b7ac8dd99f93f9c0a/app/src/main/java/top/maxim/im/message/utils/ChatUtils.java#L524" target="_blank">Github Source: app/src/main/java/top/maxim/im/message/utils/ChatUtils.java (line 524)</a></div></p>
<h3 id="function-setisreceivemsg">function setIsReceiveMsg</h3>
<pre class="language-"><code class="lang-java">inline <span class="token keyword">void</span> <span class="token function">setIsReceiveMsg</span><span class="token punctuation">(</span>
    <span class="token keyword">boolean</span> arg0
<span class="token punctuation">)</span>
</code></pre>
<p><strong>Example</strong>:</p>
<p></p>
<h3 id="function-isread">function isRead</h3>
<pre class="language-"><code class="lang-java">inline <span class="token keyword">boolean</span> <span class="token function">isRead</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre>
<p>Message read or unread mark </p>
<p><strong>Return</strong>: bool </p>
<p><strong>Example</strong>:</p>
<p></p>
<h3 id="function-setisread">function setIsRead</h3>
<pre class="language-"><code class="lang-java">inline <span class="token keyword">void</span> <span class="token function">setIsRead</span><span class="token punctuation">(</span>
    <span class="token keyword">boolean</span> arg0
<span class="token punctuation">)</span>
</code></pre>
<p><strong>Example</strong>:</p>
<p></p>
<h3 id="function-isreadacked">function isReadAcked</h3>
<pre class="language-"><code class="lang-java">inline <span class="token keyword">boolean</span> <span class="token function">isReadAcked</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre>
<p>Show sender whether read acknowledgement received, and show receiver whether message read acknowledgement sent </p>
<p><strong>Return</strong>: bool </p>
<p><strong>Example</strong>:</p>
<p><pre class="language-"><code class="lang-java"><span class="token keyword">if</span> <span class="token punctuation">(</span>mItemPos <span class="token operator">!=</span> <span class="token constant">ITEM_RIGHT</span> <span class="token operator">||</span> mTvReadStatus <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>mMaxMessage <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    mTvReadStatus<span class="token punctuation">.</span><span class="token function">setVisibility</span><span class="token punctuation">(</span><span class="token class-name">View</span><span class="token punctuation">.</span><span class="token constant">GONE</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>mMaxMessage<span class="token punctuation">.</span><span class="token function">type</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token class-name">BMXMessage<span class="token punctuation">.</span>MessageType<span class="token punctuation">.</span>Single</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// &#x5355;&#x804A;</span>
    mTvReadStatus<span class="token punctuation">.</span><span class="token function">setVisibility</span><span class="token punctuation">(</span><span class="token class-name">View</span><span class="token punctuation">.</span><span class="token constant">VISIBLE</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">boolean</span> isRead <span class="token operator">=</span> mMaxMessage<span class="token punctuation">.</span><span class="token function">isReadAcked</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    mTvReadStatus<span class="token punctuation">.</span><span class="token function">setText</span><span class="token punctuation">(</span>isRead <span class="token operator">?</span> <span class="token function">getResources</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>string<span class="token punctuation">.</span>read<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">getResources</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>string<span class="token punctuation">.</span>unread<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>mMaxMessage<span class="token punctuation">.</span><span class="token function">type</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token class-name">BMXMessage<span class="token punctuation">.</span>MessageType<span class="token punctuation">.</span>Group</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// &#x7FA4;&#x804A;</span>
    mTvReadStatus<span class="token punctuation">.</span><span class="token function">setVisibility</span><span class="token punctuation">(</span>mShowReadAck <span class="token operator">?</span> <span class="token class-name">View</span><span class="token punctuation">.</span><span class="token constant">VISIBLE</span> <span class="token operator">:</span> <span class="token class-name">View</span><span class="token punctuation">.</span><span class="token constant">GONE</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> readCount <span class="token operator">=</span> mMaxMessage<span class="token punctuation">.</span><span class="token function">groupAckCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    mTvReadStatus<span class="token punctuation">.</span><span class="token function">setText</span><span class="token punctuation">(</span><span class="token function">getResources</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>string<span class="token punctuation">.</span>read_persons<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token punctuation">(</span>readCount <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token operator">?</span> readCount <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    mTvReadStatus<span class="token punctuation">.</span><span class="token function">setVisibility</span><span class="token punctuation">(</span><span class="token class-name">View</span><span class="token punctuation">.</span><span class="token constant">GONE</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><div class="lanying-code-snippet-caption"><a title="Show Full Source of app/src/main/java/top/maxim/im/message/itemholder/MessageItemBaseView.java" href="https://github.com/maxim-top/lanying-im-android/blob/901cdc7846e8960d9ca5297b7ac8dd99f93f9c0a/app/src/main/java/top/maxim/im/message/itemholder/MessageItemBaseView.java#L259" target="_blank">Github Source: app/src/main/java/top/maxim/im/message/itemholder/MessageItemBaseView.java (line 259)</a></div><pre class="language-"><code class="lang-java"><span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">ackMessage</span><span class="token punctuation">(</span><span class="token keyword">final</span> <span class="token class-name">BMXMessage</span> message<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// &#x5DF2;&#x8BFB;&#x4E0D;&#x5728;&#x53D1;&#x9001; &#x81EA;&#x5DF1;&#x53D1;&#x9001;&#x7684;&#x6D88;&#x606F;&#x4E0D;&#x8BBE;&#x7F6E;&#x5DF2;&#x8BFB;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>message <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> message<span class="token punctuation">.</span><span class="token function">isReadAcked</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token operator">!</span>message<span class="token punctuation">.</span><span class="token function">isReceiveMsg</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token class-name">Observable</span><span class="token punctuation">.</span><span class="token function">just</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Func1</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">BMXMessage</span><span class="token punctuation">,</span> <span class="token class-name">BMXMessage</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token annotation punctuation">@Override</span>
        <span class="token keyword">public</span> <span class="token class-name">BMXMessage</span> <span class="token function">call</span><span class="token punctuation">(</span><span class="token class-name">BMXMessage</span> message<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">ChatManager</span><span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ackMessage</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> message<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">subscribeOn</span><span class="token punctuation">(</span><span class="token class-name">Schedulers</span><span class="token punctuation">.</span><span class="token function">computation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">observeOn</span><span class="token punctuation">(</span><span class="token class-name">AndroidSchedulers</span><span class="token punctuation">.</span><span class="token function">mainThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Subscriber</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">BMXMessage</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token annotation punctuation">@Override</span>
                <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onCompleted</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

                <span class="token punctuation">}</span>

                <span class="token annotation punctuation">@Override</span>
                <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onError</span><span class="token punctuation">(</span><span class="token class-name">Throwable</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span></code></pre><div class="lanying-code-snippet-caption"><a title="Show Full Source of app/src/main/java/top/maxim/im/message/presenter/ChatBasePresenter.java" href="https://github.com/maxim-top/lanying-im-android/blob/901cdc7846e8960d9ca5297b7ac8dd99f93f9c0a/app/src/main/java/top/maxim/im/message/presenter/ChatBasePresenter.java#L1003" target="_blank">Github Source: app/src/main/java/top/maxim/im/message/presenter/ChatBasePresenter.java (line 1003)</a></div></p>
<h3 id="function-setisreadacked">function setIsReadAcked</h3>
<pre class="language-"><code class="lang-java">inline <span class="token keyword">void</span> <span class="token function">setIsReadAcked</span><span class="token punctuation">(</span>
    <span class="token keyword">boolean</span> arg0
<span class="token punctuation">)</span>
</code></pre>
<p><strong>Example</strong>:</p>
<p></p>
<h3 id="function-isdeliveryacked">function isDeliveryAcked</h3>
<pre class="language-"><code class="lang-java">inline <span class="token keyword">boolean</span> <span class="token function">isDeliveryAcked</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre>
<p>Show sender whether message has been delivered to the other party, and show receiver whether message delivered acknowledgement has been sent </p>
<p><strong>Return</strong>: bool </p>
<p><strong>Example</strong>:</p>
<p></p>
<h3 id="function-setisdeliveryacked">function setIsDeliveryAcked</h3>
<pre class="language-"><code class="lang-java">inline <span class="token keyword">void</span> <span class="token function">setIsDeliveryAcked</span><span class="token punctuation">(</span>
    <span class="token keyword">boolean</span> arg0
<span class="token punctuation">)</span>
</code></pre>
<p><strong>Example</strong>:</p>
<p></p>
<h3 id="function-content">function content</h3>
<pre class="language-"><code class="lang-java">inline <span class="token class-name">String</span> <span class="token function">content</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre>
<p>Message text content </p>
<p><strong>Return</strong>: std::string </p>
<p><strong>Example</strong>:</p>
<p><pre class="language-"><code class="lang-java"><span class="token annotation punctuation">@Override</span>
<span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">onBindHolder</span><span class="token punctuation">(</span><span class="token class-name">BaseViewHolder</span> holder<span class="token punctuation">,</span> <span class="token keyword">int</span> position<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">TextView</span> tv <span class="token operator">=</span> holder<span class="token punctuation">.</span><span class="token function">findViewById</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>id<span class="token punctuation">.</span>tv_push_msg<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">BMXMessage</span> message <span class="token operator">=</span> <span class="token function">getItem</span><span class="token punctuation">(</span>position<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">String</span> content <span class="token operator">=</span> message <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">?</span> <span class="token string">&quot;&quot;</span> <span class="token operator">:</span> message<span class="token punctuation">.</span><span class="token function">content</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    tv<span class="token punctuation">.</span><span class="token function">setText</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><div class="lanying-code-snippet-caption"><a title="Show Full Source of app/src/main/java/top/maxim/im/login/view/PushMessageActivity.java" href="https://github.com/maxim-top/lanying-im-android/blob/901cdc7846e8960d9ca5297b7ac8dd99f93f9c0a/app/src/main/java/top/maxim/im/login/view/PushMessageActivity.java#L172" target="_blank">Github Source: app/src/main/java/top/maxim/im/login/view/PushMessageActivity.java (line 172)</a></div><pre class="language-"><code class="lang-java"><span class="token keyword">private</span> <span class="token keyword">int</span> <span class="token function">getChatItemType</span><span class="token punctuation">(</span><span class="token class-name">BMXMessage</span> bean<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>bean <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">boolean</span> isMySend <span class="token operator">=</span> <span class="token operator">!</span>bean<span class="token punctuation">.</span><span class="token function">isReceiveMsg</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>bean<span class="token punctuation">.</span><span class="token function">contentType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token class-name">BMXMessage<span class="token punctuation">.</span>ContentType</span><span class="token punctuation">.</span><span class="token constant">RTC</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">BMXMessageConfig</span> config <span class="token operator">=</span> bean<span class="token punctuation">.</span><span class="token function">config</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>config <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> config<span class="token punctuation">.</span><span class="token function">getRTCAction</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">&quot;hangup&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token class-name">String</span> content <span class="token operator">=</span> bean<span class="token punctuation">.</span><span class="token function">content</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>content<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">&quot;rejected&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                isMySend <span class="token operator">=</span> <span class="token operator">!</span>isMySend<span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>content<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">&quot;canceled&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>config<span class="token punctuation">.</span><span class="token function">getRTCInitiator</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">!=</span> bean<span class="token punctuation">.</span><span class="token function">fromId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                    isMySend <span class="token operator">=</span> <span class="token operator">!</span>isMySend<span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">int</span> viewType <span class="token operator">=</span> <span class="token class-name">MsgBodyHelper</span><span class="token punctuation">.</span><span class="token function">getContentBodyClass</span><span class="token punctuation">(</span>bean<span class="token punctuation">.</span><span class="token function">contentType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">swigValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token keyword">null</span>
            <span class="token operator">?</span> bean<span class="token punctuation">.</span><span class="token function">contentType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">swigValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre><div class="lanying-code-snippet-caption"><a title="Show Full Source of app/src/main/java/top/maxim/im/message/adapter/ChatMessageAdapter.java" href="https://github.com/maxim-top/lanying-im-android/blob/901cdc7846e8960d9ca5297b7ac8dd99f93f9c0a/app/src/main/java/top/maxim/im/message/adapter/ChatMessageAdapter.java#L177" target="_blank">Github Source: app/src/main/java/top/maxim/im/message/adapter/ChatMessageAdapter.java (line 177)</a></div><pre class="language-"><code class="lang-java"><span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">copyMessage</span><span class="token punctuation">(</span><span class="token class-name">BMXMessage</span> message<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>message <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> message<span class="token punctuation">.</span><span class="token function">contentType</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token class-name">BMXMessage<span class="token punctuation">.</span>ContentType<span class="token punctuation">.</span>Text</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token class-name">ClipboardManager</span> clipboard <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">ClipboardManager</span><span class="token punctuation">)</span>mView<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">getSystemService</span><span class="token punctuation">(</span><span class="token class-name">Context</span><span class="token punctuation">.</span><span class="token constant">CLIPBOARD_SERVICE</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>clipboard <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token class-name">String</span> text <span class="token operator">=</span> message<span class="token punctuation">.</span><span class="token function">content</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">TextUtils</span><span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span>text<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token class-name">ClipData</span> clip <span class="token operator">=</span> <span class="token class-name">ClipData</span><span class="token punctuation">.</span><span class="token function">newPlainText</span><span class="token punctuation">(</span><span class="token string">&quot;chat_text&quot;</span><span class="token punctuation">,</span> text<span class="token punctuation">)</span><span class="token punctuation">;</span>
    clipboard<span class="token punctuation">.</span><span class="token function">setPrimaryClip</span><span class="token punctuation">(</span>clip<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">ToastUtil</span><span class="token punctuation">.</span><span class="token function">showTextViewPrompt</span><span class="token punctuation">(</span>mView<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>string<span class="token punctuation">.</span>copy_successful<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><div class="lanying-code-snippet-caption"><a title="Show Full Source of app/src/main/java/top/maxim/im/message/presenter/ChatBasePresenter.java" href="https://github.com/maxim-top/lanying-im-android/blob/901cdc7846e8960d9ca5297b7ac8dd99f93f9c0a/app/src/main/java/top/maxim/im/message/presenter/ChatBasePresenter.java#L927" target="_blank">Github Source: app/src/main/java/top/maxim/im/message/presenter/ChatBasePresenter.java (line 927)</a></div><pre class="language-"><code class="lang-java"><span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getMessageDesc</span><span class="token punctuation">(</span><span class="token class-name">Context</span> context<span class="token punctuation">,</span> <span class="token class-name">BMXMessage</span> message<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>message <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token class-name">BMXMessage<span class="token punctuation">.</span>ContentType</span> type <span class="token operator">=</span> message<span class="token punctuation">.</span><span class="token function">contentType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">String</span> content <span class="token operator">=</span> message<span class="token punctuation">.</span><span class="token function">content</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token function">getMessageDesc</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> type<span class="token punctuation">,</span> content<span class="token punctuation">,</span> message<span class="token punctuation">.</span><span class="token function">isReceiveMsg</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><div class="lanying-code-snippet-caption"><a title="Show Full Source of app/src/main/java/top/maxim/im/message/utils/ChatUtils.java" href="https://github.com/maxim-top/lanying-im-android/blob/901cdc7846e8960d9ca5297b7ac8dd99f93f9c0a/app/src/main/java/top/maxim/im/message/utils/ChatUtils.java#L203" target="_blank">Github Source: app/src/main/java/top/maxim/im/message/utils/ChatUtils.java (line 203)</a></div><pre class="language-"><code class="lang-java"><span class="token keyword">if</span> <span class="token punctuation">(</span>mBmxMessage <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token class-name">MessageBean</span> messageBean <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MessageBean</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">BMXMessage<span class="token punctuation">.</span>ContentType</span> contentType <span class="token operator">=</span> mBmxMessage<span class="token punctuation">.</span><span class="token function">contentType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
messageBean<span class="token punctuation">.</span><span class="token function">setContentType</span><span class="token punctuation">(</span>contentType<span class="token punctuation">)</span><span class="token punctuation">;</span>
messageBean<span class="token punctuation">.</span><span class="token function">setType</span><span class="token punctuation">(</span>type<span class="token punctuation">)</span><span class="token punctuation">;</span>
messageBean<span class="token punctuation">.</span><span class="token function">setChatId</span><span class="token punctuation">(</span>chatId<span class="token punctuation">)</span><span class="token punctuation">;</span>
messageBean<span class="token punctuation">.</span><span class="token function">setReceiveMsg</span><span class="token punctuation">(</span>mBmxMessage<span class="token punctuation">.</span><span class="token function">isReceiveMsg</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>contentType <span class="token operator">==</span> <span class="token class-name">BMXMessage<span class="token punctuation">.</span>ContentType<span class="token punctuation">.</span>Text</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">String</span> text <span class="token operator">=</span> mBmxMessage<span class="token punctuation">.</span><span class="token function">content</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token class-name">TextUtils</span><span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span>text<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        messageBean<span class="token punctuation">.</span><span class="token function">setContent</span><span class="token punctuation">(</span>text<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> messageBean<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>contentType <span class="token operator">==</span> <span class="token class-name">BMXMessage<span class="token punctuation">.</span>ContentType<span class="token punctuation">.</span>Image</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// &#x56FE;&#x7247;</span>
    <span class="token class-name">BMXImageAttachment</span> body <span class="token operator">=</span> <span class="token class-name">BMXImageAttachment</span><span class="token punctuation">.</span><span class="token function">dynamic_cast</span><span class="token punctuation">(</span>mBmxMessage<span class="token punctuation">.</span><span class="token function">attachment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><div class="lanying-code-snippet-caption"><a title="Show Full Source of app/src/main/java/top/maxim/im/message/utils/ChatUtils.java" href="https://github.com/maxim-top/lanying-im-android/blob/901cdc7846e8960d9ca5297b7ac8dd99f93f9c0a/app/src/main/java/top/maxim/im/message/utils/ChatUtils.java#L526" target="_blank">Github Source: app/src/main/java/top/maxim/im/message/utils/ChatUtils.java (line 526)</a></div></p>
<h3 id="function-setcontent">function setContent</h3>
<pre class="language-"><code class="lang-java">inline <span class="token keyword">void</span> <span class="token function">setContent</span><span class="token punctuation">(</span>
    <span class="token class-name">String</span> content
<span class="token punctuation">)</span>
</code></pre>
<p>Message text content </p>
<p><strong>Parameters</strong>: </p>
<ul>
<li><strong>content</strong> Message text content </li>
</ul>
<p><strong>Example</strong>:</p>
<p></p>
<h3 id="function-contenttype">function contentType</h3>
<pre class="language-"><code class="lang-java">inline <span class="token class-name">BMXMessage<span class="token punctuation">.</span>ContentType</span> <span class="token function">contentType</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre>
<p>Message content type, attachment-type with attachment, text-type with no attachment </p>
<p><strong>Return</strong>: [ContentType]</p>
<p><strong>Example</strong>:</p>
<p><pre class="language-"><code class="lang-java"><span class="token keyword">private</span> <span class="token keyword">int</span> <span class="token function">getChatItemType</span><span class="token punctuation">(</span><span class="token class-name">BMXMessage</span> bean<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>bean <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">boolean</span> isMySend <span class="token operator">=</span> <span class="token operator">!</span>bean<span class="token punctuation">.</span><span class="token function">isReceiveMsg</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>bean<span class="token punctuation">.</span><span class="token function">contentType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token class-name">BMXMessage<span class="token punctuation">.</span>ContentType</span><span class="token punctuation">.</span><span class="token constant">RTC</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">BMXMessageConfig</span> config <span class="token operator">=</span> bean<span class="token punctuation">.</span><span class="token function">config</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>config <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> config<span class="token punctuation">.</span><span class="token function">getRTCAction</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">&quot;hangup&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token class-name">String</span> content <span class="token operator">=</span> bean<span class="token punctuation">.</span><span class="token function">content</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>content<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">&quot;rejected&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                isMySend <span class="token operator">=</span> <span class="token operator">!</span>isMySend<span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>content<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">&quot;canceled&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>config<span class="token punctuation">.</span><span class="token function">getRTCInitiator</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">!=</span> bean<span class="token punctuation">.</span><span class="token function">fromId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                    isMySend <span class="token operator">=</span> <span class="token operator">!</span>isMySend<span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">int</span> viewType <span class="token operator">=</span> <span class="token class-name">MsgBodyHelper</span><span class="token punctuation">.</span><span class="token function">getContentBodyClass</span><span class="token punctuation">(</span>bean<span class="token punctuation">.</span><span class="token function">contentType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">swigValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token keyword">null</span>
            <span class="token operator">?</span> bean<span class="token punctuation">.</span><span class="token function">contentType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">swigValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre><div class="lanying-code-snippet-caption"><a title="Show Full Source of app/src/main/java/top/maxim/im/message/adapter/ChatMessageAdapter.java" href="https://github.com/maxim-top/lanying-im-android/blob/901cdc7846e8960d9ca5297b7ac8dd99f93f9c0a/app/src/main/java/top/maxim/im/message/adapter/ChatMessageAdapter.java#L174" target="_blank">Github Source: app/src/main/java/top/maxim/im/message/adapter/ChatMessageAdapter.java (line 174)</a></div><pre class="language-"><code class="lang-java">        <span class="token class-name">String</span> content <span class="token operator">=</span> bean<span class="token punctuation">.</span><span class="token function">content</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>content<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">&quot;rejected&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            isMySend <span class="token operator">=</span> <span class="token operator">!</span>isMySend<span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>content<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">&quot;canceled&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>config<span class="token punctuation">.</span><span class="token function">getRTCInitiator</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">!=</span> bean<span class="token punctuation">.</span><span class="token function">fromId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                isMySend <span class="token operator">=</span> <span class="token operator">!</span>isMySend<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">int</span> viewType <span class="token operator">=</span> <span class="token class-name">MsgBodyHelper</span><span class="token punctuation">.</span><span class="token function">getContentBodyClass</span><span class="token punctuation">(</span>bean<span class="token punctuation">.</span><span class="token function">contentType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">swigValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token keyword">null</span>
        <span class="token operator">?</span> bean<span class="token punctuation">.</span><span class="token function">contentType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">swigValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token operator">:</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
<span class="token keyword">return</span> isMySend <span class="token operator">?</span> viewType <span class="token operator">:</span> <span class="token operator">~</span>viewType<span class="token punctuation">;</span></code></pre><div class="lanying-code-snippet-caption"><a title="Show Full Source of app/src/main/java/top/maxim/im/message/adapter/ChatMessageAdapter.java" href="https://github.com/maxim-top/lanying-im-android/blob/901cdc7846e8960d9ca5297b7ac8dd99f93f9c0a/app/src/main/java/top/maxim/im/message/adapter/ChatMessageAdapter.java#L187" target="_blank">Github Source: app/src/main/java/top/maxim/im/message/adapter/ChatMessageAdapter.java (line 187)</a></div><pre class="language-"><code class="lang-java">        <span class="token keyword">if</span> <span class="token punctuation">(</span>content<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">&quot;rejected&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            isMySend <span class="token operator">=</span> <span class="token operator">!</span>isMySend<span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>content<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">&quot;canceled&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>config<span class="token punctuation">.</span><span class="token function">getRTCInitiator</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">!=</span> bean<span class="token punctuation">.</span><span class="token function">fromId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                isMySend <span class="token operator">=</span> <span class="token operator">!</span>isMySend<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">int</span> viewType <span class="token operator">=</span> <span class="token class-name">MsgBodyHelper</span><span class="token punctuation">.</span><span class="token function">getContentBodyClass</span><span class="token punctuation">(</span>bean<span class="token punctuation">.</span><span class="token function">contentType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">swigValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token keyword">null</span>
        <span class="token operator">?</span> bean<span class="token punctuation">.</span><span class="token function">contentType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">swigValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token operator">:</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
<span class="token keyword">return</span> isMySend <span class="token operator">?</span> viewType <span class="token operator">:</span> <span class="token operator">~</span>viewType<span class="token punctuation">;</span></code></pre><div class="lanying-code-snippet-caption"><a title="Show Full Source of app/src/main/java/top/maxim/im/message/adapter/ChatMessageAdapter.java" href="https://github.com/maxim-top/lanying-im-android/blob/901cdc7846e8960d9ca5297b7ac8dd99f93f9c0a/app/src/main/java/top/maxim/im/message/adapter/ChatMessageAdapter.java#L188" target="_blank">Github Source: app/src/main/java/top/maxim/im/message/adapter/ChatMessageAdapter.java (line 188)</a></div><pre class="language-"><code class="lang-java"><span class="token class-name">String</span> myName <span class="token operator">=</span> profile<span class="token punctuation">.</span><span class="token function">nickname</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">TextUtils</span><span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span>myName<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    myName <span class="token operator">=</span> profile<span class="token punctuation">.</span><span class="token function">username</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">long</span> myId <span class="token operator">=</span> profile<span class="token punctuation">.</span><span class="token function">userId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">long</span> callerId <span class="token operator">=</span> mMaxMessage<span class="token punctuation">.</span><span class="token function">fromId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name">String</span> userName <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token keyword">boolean</span> group <span class="token operator">=</span> mMaxMessage<span class="token punctuation">.</span><span class="token function">type</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token class-name">BMXMessage<span class="token punctuation">.</span>MessageType<span class="token punctuation">.</span>Group</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>mMaxMessage<span class="token punctuation">.</span><span class="token function">contentType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token class-name">BMXMessage<span class="token punctuation">.</span>ContentType</span><span class="token punctuation">.</span><span class="token constant">RTC</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token class-name">BMXMessageConfig</span> config <span class="token operator">=</span> mMaxMessage<span class="token punctuation">.</span><span class="token function">config</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>config <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> config<span class="token punctuation">.</span><span class="token function">getRTCAction</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">&quot;hangup&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        callerId <span class="token operator">=</span> config<span class="token punctuation">.</span><span class="token function">getRTCInitiator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">boolean</span> isSenderOrCaller <span class="token operator">=</span> myId <span class="token operator">==</span> callerId<span class="token punctuation">;</span><span class="token comment">//&#x6D88;&#x606F;&#x53D1;&#x9001;&#x8005;&#x6216;&#x8005;RTC&#x6302;&#x65AD;&#x6D88;&#x606F;&#x5BF9;&#x5E94;&#x7684;&#x901A;&#x8BDD;&#x547C;&#x53EB;&#x65B9;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>isSenderOrCaller<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">BMXRosterItem</span> item <span class="token operator">=</span> <span class="token class-name">RosterFetcher</span><span class="token punctuation">.</span><span class="token function">getFetcher</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getRoster</span><span class="token punctuation">(</span>callerId<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>item <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span></code></pre><div class="lanying-code-snippet-caption"><a title="Show Full Source of app/src/main/java/top/maxim/im/message/itemholder/MessageItemBaseView.java" href="https://github.com/maxim-top/lanying-im-android/blob/901cdc7846e8960d9ca5297b7ac8dd99f93f9c0a/app/src/main/java/top/maxim/im/message/itemholder/MessageItemBaseView.java#L181" target="_blank">Github Source: app/src/main/java/top/maxim/im/message/itemholder/MessageItemBaseView.java (line 181)</a></div><pre class="language-"><code class="lang-java"><span class="token annotation punctuation">@Override</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onItemFunc</span><span class="token punctuation">(</span><span class="token class-name">BMXMessage</span> bean<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>bean <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token class-name">BMXMessage<span class="token punctuation">.</span>ContentType</span> contentType <span class="token operator">=</span> bean<span class="token punctuation">.</span><span class="token function">contentType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>contentType <span class="token operator">==</span> <span class="token class-name">BMXMessage<span class="token punctuation">.</span>ContentType<span class="token punctuation">.</span>Text</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// TODO</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>contentType <span class="token operator">==</span> <span class="token class-name">BMXMessage<span class="token punctuation">.</span>ContentType<span class="token punctuation">.</span>Image</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// &#x56FE;&#x7247;</span>
        <span class="token function">onImageItemClick</span><span class="token punctuation">(</span>bean<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>contentType <span class="token operator">==</span> <span class="token class-name">BMXMessage<span class="token punctuation">.</span>ContentType<span class="token punctuation">.</span>Voice</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// &#x8BED;&#x97F3;&#x64AD;&#x653E;</span>
        <span class="token function">onAudioItemClick</span><span class="token punctuation">(</span>bean<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>contentType <span class="token operator">==</span> <span class="token class-name">BMXMessage<span class="token punctuation">.</span>ContentType<span class="token punctuation">.</span>File</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// &#x6587;&#x4EF6;&#x67E5;&#x770B;</span>
        <span class="token function">onFileItemClick</span><span class="token punctuation">(</span>bean<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>contentType <span class="token operator">==</span> <span class="token class-name">BMXMessage<span class="token punctuation">.</span>ContentType<span class="token punctuation">.</span>Video</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// &#x89C6;&#x9891;</span>
        <span class="token function">openVideoItemClick</span><span class="token punctuation">(</span>bean<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><div class="lanying-code-snippet-caption"><a title="Show Full Source of app/src/main/java/top/maxim/im/message/presenter/ChatBasePresenter.java" href="https://github.com/maxim-top/lanying-im-android/blob/901cdc7846e8960d9ca5297b7ac8dd99f93f9c0a/app/src/main/java/top/maxim/im/message/presenter/ChatBasePresenter.java#L757" target="_blank">Github Source: app/src/main/java/top/maxim/im/message/presenter/ChatBasePresenter.java (line 757)</a></div><pre class="language-"><code class="lang-java">delete<span class="token punctuation">.</span><span class="token function">setBackgroundColor</span><span class="token punctuation">(</span>mView<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getResources</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getColor</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>color<span class="token punctuation">.</span>color_white<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
delete<span class="token punctuation">.</span><span class="token function">setText</span><span class="token punctuation">(</span>mView<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>string<span class="token punctuation">.</span>delete<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
delete<span class="token punctuation">.</span><span class="token function">setOnClickListener</span><span class="token punctuation">(</span>v <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
    dialog<span class="token punctuation">.</span><span class="token function">dismiss</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">deleteMessage</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
ll<span class="token punctuation">.</span><span class="token function">addView</span><span class="token punctuation">(</span>delete<span class="token punctuation">,</span> params<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// &#x590D;&#x5236; &#x6587;&#x5B57;&#x624D;&#x6709;</span>
<span class="token comment">// &#x81EA;&#x5DF1;&#x53D1;&#x9001;&#x7684;&#x6D88;&#x606F;&#x624D;&#x6709;&#x64A4;&#x56DE;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>message<span class="token punctuation">.</span><span class="token function">contentType</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token class-name">BMXMessage<span class="token punctuation">.</span>ContentType<span class="token punctuation">.</span>Text</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// &#x64A4;&#x56DE;</span>
    <span class="token class-name">TextView</span> copy <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TextView</span><span class="token punctuation">(</span>mView<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    copy<span class="token punctuation">.</span><span class="token function">setPadding</span><span class="token punctuation">(</span><span class="token class-name">ScreenUtils</span><span class="token punctuation">.</span><span class="token function">dp2px</span><span class="token punctuation">(</span><span class="token number">15</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">ScreenUtils</span><span class="token punctuation">.</span><span class="token function">dp2px</span><span class="token punctuation">(</span><span class="token number">15</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">ScreenUtils</span><span class="token punctuation">.</span><span class="token function">dp2px</span><span class="token punctuation">(</span><span class="token number">15</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    copy<span class="token punctuation">.</span><span class="token function">setTextSize</span><span class="token punctuation">(</span><span class="token class-name">TypedValue</span><span class="token punctuation">.</span><span class="token constant">COMPLEX_UNIT_DIP</span><span class="token punctuation">,</span> <span class="token number">17</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    copy<span class="token punctuation">.</span><span class="token function">setTextColor</span><span class="token punctuation">(</span>mView<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getResources</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getColor</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>color<span class="token punctuation">.</span>color_black<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    copy<span class="token punctuation">.</span><span class="token function">setBackgroundColor</span><span class="token punctuation">(</span>
            mView<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getResources</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getColor</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>color<span class="token punctuation">.</span>color_white<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    copy<span class="token punctuation">.</span><span class="token function">setText</span><span class="token punctuation">(</span>mView<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>string<span class="token punctuation">.</span>chat_msg_copy<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    copy<span class="token punctuation">.</span><span class="token function">setOnClickListener</span><span class="token punctuation">(</span>v <span class="token operator">-&gt;</span> <span class="token punctuation">{</span></code></pre><div class="lanying-code-snippet-caption"><a title="Show Full Source of app/src/main/java/top/maxim/im/message/presenter/ChatBasePresenter.java" href="https://github.com/maxim-top/lanying-im-android/blob/901cdc7846e8960d9ca5297b7ac8dd99f93f9c0a/app/src/main/java/top/maxim/im/message/presenter/ChatBasePresenter.java#L823" target="_blank">Github Source: app/src/main/java/top/maxim/im/message/presenter/ChatBasePresenter.java (line 823)</a></div><pre class="language-"><code class="lang-java"><span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">copyMessage</span><span class="token punctuation">(</span><span class="token class-name">BMXMessage</span> message<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>message <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> message<span class="token punctuation">.</span><span class="token function">contentType</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token class-name">BMXMessage<span class="token punctuation">.</span>ContentType<span class="token punctuation">.</span>Text</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token class-name">ClipboardManager</span> clipboard <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">ClipboardManager</span><span class="token punctuation">)</span>mView<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">getSystemService</span><span class="token punctuation">(</span><span class="token class-name">Context</span><span class="token punctuation">.</span><span class="token constant">CLIPBOARD_SERVICE</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>clipboard <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token class-name">String</span> text <span class="token operator">=</span> message<span class="token punctuation">.</span><span class="token function">content</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">TextUtils</span><span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span>text<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token class-name">ClipData</span> clip <span class="token operator">=</span> <span class="token class-name">ClipData</span><span class="token punctuation">.</span><span class="token function">newPlainText</span><span class="token punctuation">(</span><span class="token string">&quot;chat_text&quot;</span><span class="token punctuation">,</span> text<span class="token punctuation">)</span><span class="token punctuation">;</span>
    clipboard<span class="token punctuation">.</span><span class="token function">setPrimaryClip</span><span class="token punctuation">(</span>clip<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">ToastUtil</span><span class="token punctuation">.</span><span class="token function">showTextViewPrompt</span><span class="token punctuation">(</span>mView<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>string<span class="token punctuation">.</span>copy_successful<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><div class="lanying-code-snippet-caption"><a title="Show Full Source of app/src/main/java/top/maxim/im/message/presenter/ChatBasePresenter.java" href="https://github.com/maxim-top/lanying-im-android/blob/901cdc7846e8960d9ca5297b7ac8dd99f93f9c0a/app/src/main/java/top/maxim/im/message/presenter/ChatBasePresenter.java#L919" target="_blank">Github Source: app/src/main/java/top/maxim/im/message/presenter/ChatBasePresenter.java (line 919)</a></div><pre class="language-"><code class="lang-java"><span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">onAudioItemClick</span><span class="token punctuation">(</span><span class="token keyword">final</span> <span class="token class-name">BMXMessage</span> bean<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>mView <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> bean <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> bean<span class="token punctuation">.</span><span class="token function">contentType</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token class-name">BMXMessage<span class="token punctuation">.</span>ContentType<span class="token punctuation">.</span>Voice</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">ackMessage</span><span class="token punctuation">(</span>bean<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">final</span> <span class="token class-name">BMXVoiceAttachment</span> body <span class="token operator">=</span> <span class="token class-name">BMXVoiceAttachment</span><span class="token punctuation">.</span><span class="token function">dynamic_cast</span><span class="token punctuation">(</span>bean<span class="token punctuation">.</span><span class="token function">attachment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>body <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>mVoicePlayHelper <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        mVoicePlayHelper <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">VoicePlayHelper</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">Activity</span><span class="token punctuation">)</span>mView<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">registerSensor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>mVoicePlayHelper<span class="token punctuation">.</span><span class="token function">isPlaying</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">stopVoicePlay</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">TextUtils</span><span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span>body<span class="token punctuation">.</span><span class="token function">path</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Log</span><span class="token punctuation">.</span><span class="token function">i</span><span class="token punctuation">(</span><span class="token constant">TAG</span><span class="token punctuation">,</span> <span class="token string">&quot;http voiceUrl is null&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><div class="lanying-code-snippet-caption"><a title="Show Full Source of app/src/main/java/top/maxim/im/message/presenter/ChatBasePresenter.java" href="https://github.com/maxim-top/lanying-im-android/blob/901cdc7846e8960d9ca5297b7ac8dd99f93f9c0a/app/src/main/java/top/maxim/im/message/presenter/ChatBasePresenter.java#L1044" target="_blank">Github Source: app/src/main/java/top/maxim/im/message/presenter/ChatBasePresenter.java (line 1044)</a></div></p>
<h3 id="function-attachment">function attachment</h3>
<pre class="language-"><code class="lang-java">inline <span class="token class-name">BMXMessageAttachment</span> <span class="token function">attachment</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre>
<p>Message attachment, BMXMessage owns the attachment and is responsible for releasing it </p>
<p><strong>Return</strong>: BMXMessageAttachmentPtr </p>
<p><strong>Example</strong>:</p>
<p><pre class="language-"><code class="lang-java"><span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">onAudioItemClick</span><span class="token punctuation">(</span><span class="token keyword">final</span> <span class="token class-name">BMXMessage</span> bean<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>mView <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> bean <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> bean<span class="token punctuation">.</span><span class="token function">contentType</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token class-name">BMXMessage<span class="token punctuation">.</span>ContentType<span class="token punctuation">.</span>Voice</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">ackMessage</span><span class="token punctuation">(</span>bean<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">final</span> <span class="token class-name">BMXVoiceAttachment</span> body <span class="token operator">=</span> <span class="token class-name">BMXVoiceAttachment</span><span class="token punctuation">.</span><span class="token function">dynamic_cast</span><span class="token punctuation">(</span>bean<span class="token punctuation">.</span><span class="token function">attachment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>body <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>mVoicePlayHelper <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        mVoicePlayHelper <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">VoicePlayHelper</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">Activity</span><span class="token punctuation">)</span>mView<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">registerSensor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>mVoicePlayHelper<span class="token punctuation">.</span><span class="token function">isPlaying</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">stopVoicePlay</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">TextUtils</span><span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span>body<span class="token punctuation">.</span><span class="token function">path</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Log</span><span class="token punctuation">.</span><span class="token function">i</span><span class="token punctuation">(</span><span class="token constant">TAG</span><span class="token punctuation">,</span> <span class="token string">&quot;http voiceUrl is null&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><div class="lanying-code-snippet-caption"><a title="Show Full Source of app/src/main/java/top/maxim/im/message/presenter/ChatBasePresenter.java" href="https://github.com/maxim-top/lanying-im-android/blob/901cdc7846e8960d9ca5297b7ac8dd99f93f9c0a/app/src/main/java/top/maxim/im/message/presenter/ChatBasePresenter.java#L1048" target="_blank">Github Source: app/src/main/java/top/maxim/im/message/presenter/ChatBasePresenter.java (line 1048)</a></div><pre class="language-"><code class="lang-java"><span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">playVoice</span><span class="token punctuation">(</span><span class="token class-name">String</span> voicePath<span class="token punctuation">,</span> <span class="token keyword">final</span> <span class="token class-name">BMXMessage</span> bean<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>mView <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> <span class="token class-name">TextUtils</span><span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span>voicePath<span class="token punctuation">)</span> <span class="token operator">||</span> bean <span class="token operator">==</span> <span class="token keyword">null</span>
            <span class="token operator">||</span> bean<span class="token punctuation">.</span><span class="token function">contentType</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token class-name">BMXMessage<span class="token punctuation">.</span>ContentType<span class="token punctuation">.</span>Voice</span> <span class="token operator">||</span> mVoicePlayHelper <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token class-name">BMXVoiceAttachment</span> body <span class="token operator">=</span> <span class="token class-name">BMXVoiceAttachment</span><span class="token punctuation">.</span><span class="token function">dynamic_cast</span><span class="token punctuation">(</span>bean<span class="token punctuation">.</span><span class="token function">attachment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>body <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    mVoicePlayHelper<span class="token punctuation">.</span><span class="token function">setOnVoiceFinishListener</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">VoicePlayHelper<span class="token punctuation">.</span>OnVoiceFinishListener</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token annotation punctuation">@Override</span>
        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onFinish</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>mView <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token class-name">VoicePlayManager</span><span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">onFinishCallback</span><span class="token punctuation">(</span>bean<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// mView.getVoiceMessageMsgId(chatBean.getMsgId());</span>
        <span class="token punctuation">}</span>

        <span class="token annotation punctuation">@Override</span></code></pre><div class="lanying-code-snippet-caption"><a title="Show Full Source of app/src/main/java/top/maxim/im/message/presenter/ChatBasePresenter.java" href="https://github.com/maxim-top/lanying-im-android/blob/901cdc7846e8960d9ca5297b7ac8dd99f93f9c0a/app/src/main/java/top/maxim/im/message/presenter/ChatBasePresenter.java#L1193" target="_blank">Github Source: app/src/main/java/top/maxim/im/message/presenter/ChatBasePresenter.java (line 1193)</a></div><pre class="language-"><code class="lang-java"><span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">onFileItemClick</span><span class="token punctuation">(</span><span class="token class-name">BMXMessage</span> bean<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>mView <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> bean <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> bean<span class="token punctuation">.</span><span class="token function">contentType</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token class-name">BMXMessage<span class="token punctuation">.</span>ContentType<span class="token punctuation">.</span>File</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">final</span> <span class="token class-name">BMXFileAttachment</span> body <span class="token operator">=</span> <span class="token class-name">BMXFileAttachment</span><span class="token punctuation">.</span><span class="token function">dynamic_cast</span><span class="token punctuation">(</span>bean<span class="token punctuation">.</span><span class="token function">attachment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>body <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token class-name">String</span> filePath <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token class-name">TextUtils</span><span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span>body<span class="token punctuation">.</span><span class="token function">path</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span>body<span class="token punctuation">.</span><span class="token function">path</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">exists</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        filePath <span class="token operator">=</span> body<span class="token punctuation">.</span><span class="token function">path</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token class-name">Log</span><span class="token punctuation">.</span><span class="token function">i</span><span class="token punctuation">(</span><span class="token constant">TAG</span><span class="token punctuation">,</span> <span class="token string">&quot;local path is null&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token class-name">TextUtils</span><span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span>filePath<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">openFilePreView</span><span class="token punctuation">(</span>filePath<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token class-name">ToastUtil</span><span class="token punctuation">.</span><span class="token function">showTextViewPrompt</span><span class="token punctuation">(</span>mView<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>string<span class="token punctuation">.</span>downloading<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">BMXMessageAttachment<span class="token punctuation">.</span>DownloadStatus</span> status <span class="token operator">=</span> body<span class="token punctuation">.</span><span class="token function">downloadStatus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><div class="lanying-code-snippet-caption"><a title="Show Full Source of app/src/main/java/top/maxim/im/message/presenter/ChatBasePresenter.java" href="https://github.com/maxim-top/lanying-im-android/blob/901cdc7846e8960d9ca5297b7ac8dd99f93f9c0a/app/src/main/java/top/maxim/im/message/presenter/ChatBasePresenter.java#L1229" target="_blank">Github Source: app/src/main/java/top/maxim/im/message/presenter/ChatBasePresenter.java (line 1229)</a></div><pre class="language-"><code class="lang-java"><span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">onImageItemClick</span><span class="token punctuation">(</span><span class="token keyword">final</span> <span class="token class-name">BMXMessage</span> bean<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>mView <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> bean <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> bean<span class="token punctuation">.</span><span class="token function">contentType</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token class-name">BMXMessage<span class="token punctuation">.</span>ContentType<span class="token punctuation">.</span>Image</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token class-name">BMXImageAttachment</span> body <span class="token operator">=</span> <span class="token class-name">BMXImageAttachment</span><span class="token punctuation">.</span><span class="token function">dynamic_cast</span><span class="token punctuation">(</span>bean<span class="token punctuation">.</span><span class="token function">attachment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>body <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token class-name">String</span> picUrl <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token class-name">TextUtils</span><span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span>body<span class="token punctuation">.</span><span class="token function">thumbnailPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span>body<span class="token punctuation">.</span><span class="token function">thumbnailPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">exists</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        picUrl <span class="token operator">=</span> body<span class="token punctuation">.</span><span class="token function">thumbnailPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token class-name">TextUtils</span><span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span>body<span class="token punctuation">.</span><span class="token function">path</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span>body<span class="token punctuation">.</span><span class="token function">path</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">exists</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        picUrl <span class="token operator">=</span> body<span class="token punctuation">.</span><span class="token function">path</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token class-name">TextUtils</span><span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span>body<span class="token punctuation">.</span><span class="token function">thumbnailUrl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        picUrl <span class="token operator">=</span> body<span class="token punctuation">.</span><span class="token function">thumbnailUrl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token class-name">TextUtils</span><span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span>body<span class="token punctuation">.</span><span class="token function">url</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        picUrl <span class="token operator">=</span> body<span class="token punctuation">.</span><span class="token function">url</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">TextUtils</span><span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span>picUrl<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// &#x6B63;&#x5728;&#x4E0B;&#x8F7D;</span></code></pre><div class="lanying-code-snippet-caption"><a title="Show Full Source of app/src/main/java/top/maxim/im/message/presenter/ChatBasePresenter.java" href="https://github.com/maxim-top/lanying-im-android/blob/901cdc7846e8960d9ca5297b7ac8dd99f93f9c0a/app/src/main/java/top/maxim/im/message/presenter/ChatBasePresenter.java#L1260" target="_blank">Github Source: app/src/main/java/top/maxim/im/message/presenter/ChatBasePresenter.java (line 1260)</a></div><pre class="language-"><code class="lang-java"><span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">openVideoItemClick</span><span class="token punctuation">(</span><span class="token class-name">BMXMessage</span> bean<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>mView <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> bean <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> bean<span class="token punctuation">.</span><span class="token function">contentType</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token class-name">BMXMessage<span class="token punctuation">.</span>ContentType<span class="token punctuation">.</span>Video</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token class-name">BMXVideoAttachment</span> body <span class="token operator">=</span> <span class="token class-name">BMXVideoAttachment</span><span class="token punctuation">.</span><span class="token function">dynamic_cast</span><span class="token punctuation">(</span>bean<span class="token punctuation">.</span><span class="token function">attachment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>body <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token class-name">String</span> videoUrl <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token class-name">TextUtils</span><span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span>body<span class="token punctuation">.</span><span class="token function">path</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span>body<span class="token punctuation">.</span><span class="token function">path</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">exists</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        videoUrl <span class="token operator">=</span> body<span class="token punctuation">.</span><span class="token function">path</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">TextUtils</span><span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span>videoUrl<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// &#x6B63;&#x5728;&#x4E0B;&#x8F7D;</span>
        <span class="token class-name">ToastUtil</span><span class="token punctuation">.</span><span class="token function">showTextViewPrompt</span><span class="token punctuation">(</span>mView<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>string<span class="token punctuation">.</span>downloading<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token class-name">BMXMessageAttachment<span class="token punctuation">.</span>DownloadStatus</span> status <span class="token operator">=</span> body<span class="token punctuation">.</span><span class="token function">downloadStatus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>status <span class="token operator">==</span> <span class="token class-name">BMXMessageAttachment<span class="token punctuation">.</span>DownloadStatus<span class="token punctuation">.</span>Downloaing</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">ToastUtil</span><span class="token punctuation">.</span><span class="token function">showTextViewPrompt</span><span class="token punctuation">(</span>mView<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>string<span class="token punctuation">.</span>downloading<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><div class="lanying-code-snippet-caption"><a title="Show Full Source of app/src/main/java/top/maxim/im/message/presenter/ChatBasePresenter.java" href="https://github.com/maxim-top/lanying-im-android/blob/901cdc7846e8960d9ca5297b7ac8dd99f93f9c0a/app/src/main/java/top/maxim/im/message/presenter/ChatBasePresenter.java#L1340" target="_blank">Github Source: app/src/main/java/top/maxim/im/message/presenter/ChatBasePresenter.java (line 1340)</a></div><pre class="language-"><code class="lang-java"><span class="token keyword">if</span> <span class="token punctuation">(</span>contentType <span class="token operator">==</span> <span class="token class-name">BMXMessage<span class="token punctuation">.</span>ContentType<span class="token punctuation">.</span>Text</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">String</span> text <span class="token operator">=</span> mBmxMessage<span class="token punctuation">.</span><span class="token function">content</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token class-name">TextUtils</span><span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span>text<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        messageBean<span class="token punctuation">.</span><span class="token function">setContent</span><span class="token punctuation">(</span>text<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> messageBean<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>contentType <span class="token operator">==</span> <span class="token class-name">BMXMessage<span class="token punctuation">.</span>ContentType<span class="token punctuation">.</span>Image</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// &#x56FE;&#x7247;</span>
    <span class="token class-name">BMXImageAttachment</span> body <span class="token operator">=</span> <span class="token class-name">BMXImageAttachment</span><span class="token punctuation">.</span><span class="token function">dynamic_cast</span><span class="token punctuation">(</span>mBmxMessage<span class="token punctuation">.</span><span class="token function">attachment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>body <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> body<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> <span class="token class-name">TextUtils</span><span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span>body<span class="token punctuation">.</span><span class="token function">path</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">int</span> w <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span>body<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getMWidth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> h <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span>body<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getMHeight</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    messageBean<span class="token punctuation">.</span><span class="token function">setPath</span><span class="token punctuation">(</span>body<span class="token punctuation">.</span><span class="token function">path</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    messageBean<span class="token punctuation">.</span><span class="token function">setW</span><span class="token punctuation">(</span>w<span class="token punctuation">)</span><span class="token punctuation">;</span>
    messageBean<span class="token punctuation">.</span><span class="token function">setH</span><span class="token punctuation">(</span>h<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> messageBean<span class="token punctuation">;</span></code></pre><div class="lanying-code-snippet-caption"><a title="Show Full Source of app/src/main/java/top/maxim/im/message/utils/ChatUtils.java" href="https://github.com/maxim-top/lanying-im-android/blob/901cdc7846e8960d9ca5297b7ac8dd99f93f9c0a/app/src/main/java/top/maxim/im/message/utils/ChatUtils.java#L535" target="_blank">Github Source: app/src/main/java/top/maxim/im/message/utils/ChatUtils.java (line 535)</a></div><pre class="language-"><code class="lang-java">    <span class="token punctuation">}</span>
    <span class="token keyword">int</span> w <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span>body<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getMWidth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> h <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span>body<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getMHeight</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    messageBean<span class="token punctuation">.</span><span class="token function">setPath</span><span class="token punctuation">(</span>body<span class="token punctuation">.</span><span class="token function">path</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    messageBean<span class="token punctuation">.</span><span class="token function">setW</span><span class="token punctuation">(</span>w<span class="token punctuation">)</span><span class="token punctuation">;</span>
    messageBean<span class="token punctuation">.</span><span class="token function">setH</span><span class="token punctuation">(</span>h<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> messageBean<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>contentType <span class="token operator">==</span> <span class="token class-name">BMXMessage<span class="token punctuation">.</span>ContentType<span class="token punctuation">.</span>Voice</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// &#x8BED;&#x97F3;</span>
    <span class="token class-name">BMXVoiceAttachment</span> body <span class="token operator">=</span> <span class="token class-name">BMXVoiceAttachment</span><span class="token punctuation">.</span><span class="token function">dynamic_cast</span><span class="token punctuation">(</span>mBmxMessage<span class="token punctuation">.</span><span class="token function">attachment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>body <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> <span class="token class-name">TextUtils</span><span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span>body<span class="token punctuation">.</span><span class="token function">path</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    messageBean<span class="token punctuation">.</span><span class="token function">setPath</span><span class="token punctuation">(</span>body<span class="token punctuation">.</span><span class="token function">path</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    messageBean<span class="token punctuation">.</span><span class="token function">setDuration</span><span class="token punctuation">(</span>body<span class="token punctuation">.</span><span class="token function">duration</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> messageBean<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>contentType <span class="token operator">==</span> <span class="token class-name">BMXMessage<span class="token punctuation">.</span>ContentType<span class="token punctuation">.</span>File</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// &#x6587;&#x4EF6;</span></code></pre><div class="lanying-code-snippet-caption"><a title="Show Full Source of app/src/main/java/top/maxim/im/message/utils/ChatUtils.java" href="https://github.com/maxim-top/lanying-im-android/blob/901cdc7846e8960d9ca5297b7ac8dd99f93f9c0a/app/src/main/java/top/maxim/im/message/utils/ChatUtils.java#L548" target="_blank">Github Source: app/src/main/java/top/maxim/im/message/utils/ChatUtils.java (line 548)</a></div><pre class="language-"><code class="lang-java">    <span class="token class-name">BMXVoiceAttachment</span> body <span class="token operator">=</span> <span class="token class-name">BMXVoiceAttachment</span><span class="token punctuation">.</span><span class="token function">dynamic_cast</span><span class="token punctuation">(</span>mBmxMessage<span class="token punctuation">.</span><span class="token function">attachment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>body <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> <span class="token class-name">TextUtils</span><span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span>body<span class="token punctuation">.</span><span class="token function">path</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    messageBean<span class="token punctuation">.</span><span class="token function">setPath</span><span class="token punctuation">(</span>body<span class="token punctuation">.</span><span class="token function">path</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    messageBean<span class="token punctuation">.</span><span class="token function">setDuration</span><span class="token punctuation">(</span>body<span class="token punctuation">.</span><span class="token function">duration</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> messageBean<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>contentType <span class="token operator">==</span> <span class="token class-name">BMXMessage<span class="token punctuation">.</span>ContentType<span class="token punctuation">.</span>File</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// &#x6587;&#x4EF6;</span>
    <span class="token class-name">BMXFileAttachment</span> body <span class="token operator">=</span> <span class="token class-name">BMXFileAttachment</span><span class="token punctuation">.</span><span class="token function">dynamic_cast</span><span class="token punctuation">(</span>mBmxMessage<span class="token punctuation">.</span><span class="token function">attachment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>body <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> <span class="token class-name">TextUtils</span><span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span>body<span class="token punctuation">.</span><span class="token function">path</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    messageBean<span class="token punctuation">.</span><span class="token function">setPath</span><span class="token punctuation">(</span>body<span class="token punctuation">.</span><span class="token function">path</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    messageBean<span class="token punctuation">.</span><span class="token function">setDisplayName</span><span class="token punctuation">(</span>body<span class="token punctuation">.</span><span class="token function">displayName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> messageBean<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>contentType <span class="token operator">==</span> <span class="token class-name">BMXMessage<span class="token punctuation">.</span>ContentType<span class="token punctuation">.</span>Location</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// &#x5730;&#x56FE;</span></code></pre><div class="lanying-code-snippet-caption"><a title="Show Full Source of app/src/main/java/top/maxim/im/message/utils/ChatUtils.java" href="https://github.com/maxim-top/lanying-im-android/blob/901cdc7846e8960d9ca5297b7ac8dd99f93f9c0a/app/src/main/java/top/maxim/im/message/utils/ChatUtils.java#L558" target="_blank">Github Source: app/src/main/java/top/maxim/im/message/utils/ChatUtils.java (line 558)</a></div></p>
<h3 id="function-config">function config</h3>
<pre class="language-"><code class="lang-java">inline <span class="token class-name">BMXMessageConfig</span> <span class="token function">config</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre>
<p>Message settings </p>
<p><strong>Return</strong>: JSON(std::string) </p>
<p><strong>Example</strong>:</p>
<p><pre class="language-"><code class="lang-java"><span class="token annotation punctuation">@Override</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onBindViewHolder</span><span class="token punctuation">(</span><span class="token class-name">BaseChatHolder</span> holder<span class="token punctuation">,</span> <span class="token keyword">int</span> position<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>holder <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    holder<span class="token punctuation">.</span><span class="token function">showChatExtra</span><span class="token punctuation">(</span><span class="token function">isShowTime</span><span class="token punctuation">(</span>position<span class="token punctuation">)</span><span class="token punctuation">,</span> showReadAck<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">BMXMessage</span> bean <span class="token operator">=</span> mBeans<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>position<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">BMXMessageConfig</span> config <span class="token operator">=</span> bean<span class="token punctuation">.</span><span class="token function">config</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>config <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">String</span> action <span class="token operator">=</span> config<span class="token punctuation">.</span><span class="token function">getRTCAction</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>action <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> action<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>action<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">&quot;hangup&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token class-name">RecyclerView<span class="token punctuation">.</span>LayoutParams</span> param <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RecyclerView<span class="token punctuation">.</span>LayoutParams</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            holder<span class="token punctuation">.</span>itemView<span class="token punctuation">.</span><span class="token function">setLayoutParams</span><span class="token punctuation">(</span>param<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    holder<span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span>bean<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><div class="lanying-code-snippet-caption"><a title="Show Full Source of app/src/main/java/top/maxim/im/message/adapter/ChatMessageAdapter.java" href="https://github.com/maxim-top/lanying-im-android/blob/901cdc7846e8960d9ca5297b7ac8dd99f93f9c0a/app/src/main/java/top/maxim/im/message/adapter/ChatMessageAdapter.java#L84" target="_blank">Github Source: app/src/main/java/top/maxim/im/message/adapter/ChatMessageAdapter.java (line 84)</a></div><pre class="language-"><code class="lang-java"><span class="token keyword">private</span> <span class="token keyword">int</span> <span class="token function">getChatItemType</span><span class="token punctuation">(</span><span class="token class-name">BMXMessage</span> bean<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>bean <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">boolean</span> isMySend <span class="token operator">=</span> <span class="token operator">!</span>bean<span class="token punctuation">.</span><span class="token function">isReceiveMsg</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>bean<span class="token punctuation">.</span><span class="token function">contentType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token class-name">BMXMessage<span class="token punctuation">.</span>ContentType</span><span class="token punctuation">.</span><span class="token constant">RTC</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">BMXMessageConfig</span> config <span class="token operator">=</span> bean<span class="token punctuation">.</span><span class="token function">config</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>config <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> config<span class="token punctuation">.</span><span class="token function">getRTCAction</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">&quot;hangup&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token class-name">String</span> content <span class="token operator">=</span> bean<span class="token punctuation">.</span><span class="token function">content</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>content<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">&quot;rejected&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                isMySend <span class="token operator">=</span> <span class="token operator">!</span>isMySend<span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>content<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">&quot;canceled&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>config<span class="token punctuation">.</span><span class="token function">getRTCInitiator</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">!=</span> bean<span class="token punctuation">.</span><span class="token function">fromId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                    isMySend <span class="token operator">=</span> <span class="token operator">!</span>isMySend<span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">int</span> viewType <span class="token operator">=</span> <span class="token class-name">MsgBodyHelper</span><span class="token punctuation">.</span><span class="token function">getContentBodyClass</span><span class="token punctuation">(</span>bean<span class="token punctuation">.</span><span class="token function">contentType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">swigValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token keyword">null</span>
            <span class="token operator">?</span> bean<span class="token punctuation">.</span><span class="token function">contentType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">swigValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre><div class="lanying-code-snippet-caption"><a title="Show Full Source of app/src/main/java/top/maxim/im/message/adapter/ChatMessageAdapter.java" href="https://github.com/maxim-top/lanying-im-android/blob/901cdc7846e8960d9ca5297b7ac8dd99f93f9c0a/app/src/main/java/top/maxim/im/message/adapter/ChatMessageAdapter.java#L175" target="_blank">Github Source: app/src/main/java/top/maxim/im/message/adapter/ChatMessageAdapter.java (line 175)</a></div><pre class="language-"><code class="lang-java">    <span class="token comment">// &#x6709;&#x8349;&#x7A3F;</span>
    <span class="token class-name">SpannableStringBuilder</span> spannable <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SpannableStringBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">String</span> draftText <span class="token operator">=</span> mContext<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>string<span class="token punctuation">.</span>draft<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">SpannableString</span> spannableString <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SpannableString</span><span class="token punctuation">(</span>draftText<span class="token punctuation">)</span><span class="token punctuation">;</span>
    spannableString<span class="token punctuation">.</span><span class="token function">setSpan</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ForegroundColorSpan</span><span class="token punctuation">(</span><span class="token class-name">Color</span><span class="token punctuation">.</span><span class="token constant">RED</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> draftText<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token class-name">Spannable</span><span class="token punctuation">.</span><span class="token constant">SPAN_EXCLUSIVE_EXCLUSIVE</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    spannable<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>spannableString<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>draft<span class="token punctuation">)</span><span class="token punctuation">;</span>
    desc<span class="token punctuation">.</span><span class="token function">setText</span><span class="token punctuation">(</span>spannable<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token class-name">String</span> msgDesc <span class="token operator">=</span> <span class="token class-name">ChatUtils</span><span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getMessageDesc</span><span class="token punctuation">(</span>mContext<span class="token punctuation">,</span> lastMsg<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>lastMsg <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> lastMsg<span class="token punctuation">.</span><span class="token function">isReceiveMsg</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> lastMsg<span class="token punctuation">.</span><span class="token function">config</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// &#x6709;@</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token class-name">BMXMessageConfig</span> config <span class="token operator">=</span> lastMsg<span class="token punctuation">.</span><span class="token function">config</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>config<span class="token punctuation">.</span><span class="token function">getMentionAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                msgDesc <span class="token operator">=</span> mContext<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>string<span class="token punctuation">.</span>someone_at_you<span class="token punctuation">)</span> <span class="token operator">+</span> msgDesc<span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                <span class="token class-name">ListOfLongLong</span> atList <span class="token operator">=</span> config<span class="token punctuation">.</span><span class="token function">getMentionList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>atList <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>atList<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> atList<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></code></pre><div class="lanying-code-snippet-caption"><a title="Show Full Source of app/src/main/java/top/maxim/im/message/adapter/SessionAdapter.java" href="https://github.com/maxim-top/lanying-im-android/blob/901cdc7846e8960d9ca5297b7ac8dd99f93f9c0a/app/src/main/java/top/maxim/im/message/adapter/SessionAdapter.java#L133" target="_blank">Github Source: app/src/main/java/top/maxim/im/message/adapter/SessionAdapter.java (line 133)</a></div><pre class="language-"><code class="lang-java">    <span class="token class-name">SpannableString</span> spannableString <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SpannableString</span><span class="token punctuation">(</span>draftText<span class="token punctuation">)</span><span class="token punctuation">;</span>
    spannableString<span class="token punctuation">.</span><span class="token function">setSpan</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ForegroundColorSpan</span><span class="token punctuation">(</span><span class="token class-name">Color</span><span class="token punctuation">.</span><span class="token constant">RED</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> draftText<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token class-name">Spannable</span><span class="token punctuation">.</span><span class="token constant">SPAN_EXCLUSIVE_EXCLUSIVE</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    spannable<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>spannableString<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>draft<span class="token punctuation">)</span><span class="token punctuation">;</span>
    desc<span class="token punctuation">.</span><span class="token function">setText</span><span class="token punctuation">(</span>spannable<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token class-name">String</span> msgDesc <span class="token operator">=</span> <span class="token class-name">ChatUtils</span><span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getMessageDesc</span><span class="token punctuation">(</span>mContext<span class="token punctuation">,</span> lastMsg<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>lastMsg <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> lastMsg<span class="token punctuation">.</span><span class="token function">isReceiveMsg</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> lastMsg<span class="token punctuation">.</span><span class="token function">config</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// &#x6709;@</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token class-name">BMXMessageConfig</span> config <span class="token operator">=</span> lastMsg<span class="token punctuation">.</span><span class="token function">config</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>config<span class="token punctuation">.</span><span class="token function">getMentionAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                msgDesc <span class="token operator">=</span> mContext<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>string<span class="token punctuation">.</span>someone_at_you<span class="token punctuation">)</span> <span class="token operator">+</span> msgDesc<span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                <span class="token class-name">ListOfLongLong</span> atList <span class="token operator">=</span> config<span class="token punctuation">.</span><span class="token function">getMentionList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>atList <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>atList<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> atList<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                        <span class="token keyword">if</span> <span class="token punctuation">(</span>atList<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>
                                i<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token punctuation">(</span><span class="token class-name">SharePreferenceUtils</span><span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getUserId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                            msgDesc <span class="token operator">=</span> mContext<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>string<span class="token punctuation">.</span>someone_at_you<span class="token punctuation">)</span> <span class="token operator">+</span> msgDesc<span class="token punctuation">;</span></code></pre><div class="lanying-code-snippet-caption"><a title="Show Full Source of app/src/main/java/top/maxim/im/message/adapter/SessionAdapter.java" href="https://github.com/maxim-top/lanying-im-android/blob/901cdc7846e8960d9ca5297b7ac8dd99f93f9c0a/app/src/main/java/top/maxim/im/message/adapter/SessionAdapter.java#L136" target="_blank">Github Source: app/src/main/java/top/maxim/im/message/adapter/SessionAdapter.java (line 136)</a></div><pre class="language-"><code class="lang-java"><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">TextUtils</span><span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span>myName<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    myName <span class="token operator">=</span> profile<span class="token punctuation">.</span><span class="token function">username</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">long</span> myId <span class="token operator">=</span> profile<span class="token punctuation">.</span><span class="token function">userId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">long</span> callerId <span class="token operator">=</span> mMaxMessage<span class="token punctuation">.</span><span class="token function">fromId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name">String</span> userName <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token keyword">boolean</span> group <span class="token operator">=</span> mMaxMessage<span class="token punctuation">.</span><span class="token function">type</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token class-name">BMXMessage<span class="token punctuation">.</span>MessageType<span class="token punctuation">.</span>Group</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>mMaxMessage<span class="token punctuation">.</span><span class="token function">contentType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token class-name">BMXMessage<span class="token punctuation">.</span>ContentType</span><span class="token punctuation">.</span><span class="token constant">RTC</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token class-name">BMXMessageConfig</span> config <span class="token operator">=</span> mMaxMessage<span class="token punctuation">.</span><span class="token function">config</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>config <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> config<span class="token punctuation">.</span><span class="token function">getRTCAction</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">&quot;hangup&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        callerId <span class="token operator">=</span> config<span class="token punctuation">.</span><span class="token function">getRTCInitiator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">boolean</span> isSenderOrCaller <span class="token operator">=</span> myId <span class="token operator">==</span> callerId<span class="token punctuation">;</span><span class="token comment">//&#x6D88;&#x606F;&#x53D1;&#x9001;&#x8005;&#x6216;&#x8005;RTC&#x6302;&#x65AD;&#x6D88;&#x606F;&#x5BF9;&#x5E94;&#x7684;&#x901A;&#x8BDD;&#x547C;&#x53EB;&#x65B9;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>isSenderOrCaller<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">BMXRosterItem</span> item <span class="token operator">=</span> <span class="token class-name">RosterFetcher</span><span class="token punctuation">.</span><span class="token function">getFetcher</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getRoster</span><span class="token punctuation">(</span>callerId<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>item <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        userName <span class="token operator">=</span> item<span class="token punctuation">.</span><span class="token function">alias</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><div class="lanying-code-snippet-caption"><a title="Show Full Source of app/src/main/java/top/maxim/im/message/itemholder/MessageItemBaseView.java" href="https://github.com/maxim-top/lanying-im-android/blob/901cdc7846e8960d9ca5297b7ac8dd99f93f9c0a/app/src/main/java/top/maxim/im/message/itemholder/MessageItemBaseView.java#L182" target="_blank">Github Source: app/src/main/java/top/maxim/im/message/itemholder/MessageItemBaseView.java (line 182)</a></div><pre class="language-"><code class="lang-java">msg<span class="token punctuation">.</span><span class="token function">config</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getRTCAction</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">&quot;hangup&quot;</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span></code></pre><div class="lanying-code-snippet-caption"><a title="Show Full Source of app/src/main/java/top/maxim/im/message/presenter/ChatBasePresenter.java" href="https://github.com/maxim-top/lanying-im-android/blob/901cdc7846e8960d9ca5297b7ac8dd99f93f9c0a/app/src/main/java/top/maxim/im/message/presenter/ChatBasePresenter.java#L397" target="_blank">Github Source: app/src/main/java/top/maxim/im/message/presenter/ChatBasePresenter.java (line 397)</a></div></p>
<h3 id="function-setconfig">function setConfig</h3>
<pre class="language-"><code class="lang-java">inline <span class="token keyword">void</span> <span class="token function">setConfig</span><span class="token punctuation">(</span>
    <span class="token class-name">BMXMessageConfig</span> arg0
<span class="token punctuation">)</span>
</code></pre>
<p>Set message config information </p>
<p><strong>Example</strong>:</p>
<p><pre class="language-"><code class="lang-java"><span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">sendRTCCallMessage</span><span class="token punctuation">(</span><span class="token class-name">BMXMessageConfig<span class="token punctuation">.</span>RTCCallType</span> type<span class="token punctuation">,</span> <span class="token keyword">long</span> roomId<span class="token punctuation">,</span> <span class="token keyword">long</span> from<span class="token punctuation">,</span> <span class="token keyword">long</span> <span class="token keyword">to</span><span class="token punctuation">,</span>
                                 <span class="token class-name">String</span> pin<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">BMXMessageConfig</span> con <span class="token operator">=</span> <span class="token class-name">BMXMessageConfig</span><span class="token punctuation">.</span><span class="token function">createMessageConfig</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    con<span class="token punctuation">.</span><span class="token function">setRTCCallInfo</span><span class="token punctuation">(</span>type<span class="token punctuation">,</span> roomId<span class="token punctuation">,</span> from<span class="token punctuation">,</span> <span class="token class-name">BMXMessageConfig<span class="token punctuation">.</span>RTCRoomType<span class="token punctuation">.</span>Broadcast</span><span class="token punctuation">,</span> pin<span class="token punctuation">)</span><span class="token punctuation">;</span>
    con<span class="token punctuation">.</span><span class="token function">setPushMessageLocKey</span><span class="token punctuation">(</span><span class="token string">&quot;call_in&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">BMXMessage</span> msg <span class="token operator">=</span> <span class="token class-name">BMXMessage</span><span class="token punctuation">.</span><span class="token function">createRTCMessage</span><span class="token punctuation">(</span>from<span class="token punctuation">,</span> <span class="token keyword">to</span><span class="token punctuation">,</span> <span class="token class-name">BMXMessage<span class="token punctuation">.</span>MessageType<span class="token punctuation">.</span>Single</span><span class="token punctuation">,</span> <span class="token keyword">to</span><span class="token punctuation">,</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    msg<span class="token punctuation">.</span><span class="token function">setConfig</span><span class="token punctuation">(</span>con<span class="token punctuation">)</span><span class="token punctuation">;</span>
    msg<span class="token punctuation">.</span><span class="token function">setExtension</span><span class="token punctuation">(</span><span class="token string">&quot;{\&quot;rtc\&quot;:\&quot;call\&quot;}&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">handlerMessage</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> con<span class="token punctuation">.</span><span class="token function">getRTCCallId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><div class="lanying-code-snippet-caption"><a title="Show Full Source of app/src/main/java/top/maxim/im/sdk/utils/MessageSendUtils.java" href="https://github.com/maxim-top/lanying-im-android/blob/901cdc7846e8960d9ca5297b7ac8dd99f93f9c0a/app/src/main/java/top/maxim/im/sdk/utils/MessageSendUtils.java#L60" target="_blank">Github Source: app/src/main/java/top/maxim/im/sdk/utils/MessageSendUtils.java (line 60)</a></div><pre class="language-"><code class="lang-java"><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">sendRTCPickupMessage</span><span class="token punctuation">(</span><span class="token keyword">long</span> from<span class="token punctuation">,</span> <span class="token keyword">long</span> <span class="token keyword">to</span><span class="token punctuation">,</span> <span class="token class-name">String</span> callId<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">BMXMessageConfig</span> con <span class="token operator">=</span> <span class="token class-name">BMXMessageConfig</span><span class="token punctuation">.</span><span class="token function">createMessageConfig</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    con<span class="token punctuation">.</span><span class="token function">setRTCPickupInfo</span><span class="token punctuation">(</span>callId<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">BMXMessage</span> msg <span class="token operator">=</span> <span class="token class-name">BMXMessage</span><span class="token punctuation">.</span><span class="token function">createRTCMessage</span><span class="token punctuation">(</span>from<span class="token punctuation">,</span> <span class="token keyword">to</span><span class="token punctuation">,</span> <span class="token class-name">BMXMessage<span class="token punctuation">.</span>MessageType<span class="token punctuation">.</span>Single</span><span class="token punctuation">,</span> <span class="token keyword">to</span><span class="token punctuation">,</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    msg<span class="token punctuation">.</span><span class="token function">setConfig</span><span class="token punctuation">(</span>con<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">handlerMessage</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><div class="lanying-code-snippet-caption"><a title="Show Full Source of app/src/main/java/top/maxim/im/sdk/utils/MessageSendUtils.java" href="https://github.com/maxim-top/lanying-im-android/blob/901cdc7846e8960d9ca5297b7ac8dd99f93f9c0a/app/src/main/java/top/maxim/im/sdk/utils/MessageSendUtils.java#L73" target="_blank">Github Source: app/src/main/java/top/maxim/im/sdk/utils/MessageSendUtils.java (line 73)</a></div><pre class="language-"><code class="lang-java"><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">sendRTCHangupMessage</span><span class="token punctuation">(</span><span class="token keyword">long</span> from<span class="token punctuation">,</span> <span class="token keyword">long</span> <span class="token keyword">to</span><span class="token punctuation">,</span> <span class="token class-name">String</span> callId<span class="token punctuation">,</span> <span class="token class-name">String</span> content<span class="token punctuation">,</span> <span class="token class-name">String</span> pushMessageLocKey<span class="token punctuation">,</span> <span class="token class-name">String</span> pushMessageLocArgs<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">BMXMessageConfig</span> con <span class="token operator">=</span> <span class="token class-name">BMXMessageConfig</span><span class="token punctuation">.</span><span class="token function">createMessageConfig</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    con<span class="token punctuation">.</span><span class="token function">setRTCHangupInfo</span><span class="token punctuation">(</span>callId<span class="token punctuation">)</span><span class="token punctuation">;</span>
    con<span class="token punctuation">.</span><span class="token function">setPushMessageLocKey</span><span class="token punctuation">(</span>pushMessageLocKey<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>pushMessageLocArgs<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        con<span class="token punctuation">.</span><span class="token function">setPushMessageLocArgs</span><span class="token punctuation">(</span>pushMessageLocArgs<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token class-name">BMXMessage</span> msg <span class="token operator">=</span> <span class="token class-name">BMXMessage</span><span class="token punctuation">.</span><span class="token function">createRTCMessage</span><span class="token punctuation">(</span>from<span class="token punctuation">,</span> <span class="token keyword">to</span><span class="token punctuation">,</span> <span class="token class-name">BMXMessage<span class="token punctuation">.</span>MessageType<span class="token punctuation">.</span>Single</span><span class="token punctuation">,</span> <span class="token keyword">to</span><span class="token punctuation">,</span> content<span class="token punctuation">)</span><span class="token punctuation">;</span>
    msg<span class="token punctuation">.</span><span class="token function">setConfig</span><span class="token punctuation">(</span>con<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">handlerMessage</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><div class="lanying-code-snippet-caption"><a title="Show Full Source of app/src/main/java/top/maxim/im/sdk/utils/MessageSendUtils.java" href="https://github.com/maxim-top/lanying-im-android/blob/901cdc7846e8960d9ca5297b7ac8dd99f93f9c0a/app/src/main/java/top/maxim/im/sdk/utils/MessageSendUtils.java#L88" target="_blank">Github Source: app/src/main/java/top/maxim/im/sdk/utils/MessageSendUtils.java (line 88)</a></div></p>
<h3 id="function-extension">function extension</h3>
<pre class="language-"><code class="lang-java">inline <span class="token class-name">String</span> <span class="token function">extension</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre>
<p>Message extension information </p>
<p><strong>Return</strong>: JSON(std::string) </p>
<p><strong>Example</strong>:</p>
<p><pre class="language-"><code class="lang-java">    <span class="token keyword">protected</span> <span class="token keyword">boolean</span> <span class="token function">filterMessage</span><span class="token punctuation">(</span><span class="token class-name">BMXMessage</span> message<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>message <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>message<span class="token punctuation">.</span><span class="token function">contentType</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token class-name">BMXMessage<span class="token punctuation">.</span>ContentType<span class="token punctuation">.</span>Text</span>
                <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token class-name">TextUtils</span><span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span>message<span class="token punctuation">.</span><span class="token function">extension</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">JSONObject</span> jsonObject <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                jsonObject <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">JSONObject</span><span class="token punctuation">(</span>message<span class="token punctuation">.</span><span class="token function">extension</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>jsonObject<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span><span class="token class-name">MessageConfig</span><span class="token punctuation">.</span><span class="token constant">INPUT_STATUS</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> message<span class="token punctuation">.</span><span class="token function">fromId</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">!=</span> mMyUserId<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token function">handelInputStatus</span><span class="token punctuation">(</span>message<span class="token punctuation">.</span><span class="token function">extension</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                <span class="token comment">//TODO</span>
<span class="token comment">//                if (jsonObject.has(&quot;rtcKey&quot;) &amp;&amp; jsonObject.has(&quot;rtcValue&quot;)) {</span>
<span class="token comment">//                    if (TextUtils.equals(jsonObject.getString(&quot;rtcKey&quot;), &quot;join&quot;) &amp;&amp; !TextUtils.isEmpty(jsonObject.getString(&quot;rtcValue&quot;))) {</span>
<span class="token comment">//                        String[] values = jsonObject.getString(&quot;rtcValue&quot;).split(&quot;_&quot;);</span>
<span class="token comment">//                        String roomId = values[0];</span>
<span class="token comment">//                        String[] chatIdArray = values[1].split(&quot;,&quot;);</span>
<span class="token comment">//                        boolean hasVideo = TextUtils.equals(MessageConfig.CallMode.CALL_VIDEO+&quot;&quot;, values[2]);</span>
<span class="token comment">//                        List&lt;Long&gt; chatIds = new ArrayList&lt;&gt;();</span></code></pre><div class="lanying-code-snippet-caption"><a title="Show Full Source of app/src/main/java/top/maxim/im/message/presenter/ChatBasePresenter.java" href="https://github.com/maxim-top/lanying-im-android/blob/901cdc7846e8960d9ca5297b7ac8dd99f93f9c0a/app/src/main/java/top/maxim/im/message/presenter/ChatBasePresenter.java#L1976" target="_blank">Github Source: app/src/main/java/top/maxim/im/message/presenter/ChatBasePresenter.java (line 1976)</a></div><pre class="language-"><code class="lang-java">    <span class="token keyword">protected</span> <span class="token keyword">boolean</span> <span class="token function">filterMessage</span><span class="token punctuation">(</span><span class="token class-name">BMXMessage</span> message<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>message <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>message<span class="token punctuation">.</span><span class="token function">contentType</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token class-name">BMXMessage<span class="token punctuation">.</span>ContentType<span class="token punctuation">.</span>Text</span>
                <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token class-name">TextUtils</span><span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span>message<span class="token punctuation">.</span><span class="token function">extension</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">JSONObject</span> jsonObject <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                jsonObject <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">JSONObject</span><span class="token punctuation">(</span>message<span class="token punctuation">.</span><span class="token function">extension</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>jsonObject<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span><span class="token class-name">MessageConfig</span><span class="token punctuation">.</span><span class="token constant">INPUT_STATUS</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> message<span class="token punctuation">.</span><span class="token function">fromId</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">!=</span> mMyUserId<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token function">handelInputStatus</span><span class="token punctuation">(</span>message<span class="token punctuation">.</span><span class="token function">extension</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                <span class="token comment">//TODO</span>
<span class="token comment">//                if (jsonObject.has(&quot;rtcKey&quot;) &amp;&amp; jsonObject.has(&quot;rtcValue&quot;)) {</span>
<span class="token comment">//                    if (TextUtils.equals(jsonObject.getString(&quot;rtcKey&quot;), &quot;join&quot;) &amp;&amp; !TextUtils.isEmpty(jsonObject.getString(&quot;rtcValue&quot;))) {</span>
<span class="token comment">//                        String[] values = jsonObject.getString(&quot;rtcValue&quot;).split(&quot;_&quot;);</span>
<span class="token comment">//                        String roomId = values[0];</span>
<span class="token comment">//                        String[] chatIdArray = values[1].split(&quot;,&quot;);</span>
<span class="token comment">//                        boolean hasVideo = TextUtils.equals(MessageConfig.CallMode.CALL_VIDEO+&quot;&quot;, values[2]);</span>
<span class="token comment">//                        List&lt;Long&gt; chatIds = new ArrayList&lt;&gt;();</span></code></pre><div class="lanying-code-snippet-caption"><a title="Show Full Source of app/src/main/java/top/maxim/im/message/presenter/ChatBasePresenter.java" href="https://github.com/maxim-top/lanying-im-android/blob/901cdc7846e8960d9ca5297b7ac8dd99f93f9c0a/app/src/main/java/top/maxim/im/message/presenter/ChatBasePresenter.java#L1979" target="_blank">Github Source: app/src/main/java/top/maxim/im/message/presenter/ChatBasePresenter.java (line 1979)</a></div><pre class="language-"><code class="lang-java">    <span class="token keyword">protected</span> <span class="token keyword">boolean</span> <span class="token function">filterMessage</span><span class="token punctuation">(</span><span class="token class-name">BMXMessage</span> message<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>message <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>message<span class="token punctuation">.</span><span class="token function">contentType</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token class-name">BMXMessage<span class="token punctuation">.</span>ContentType<span class="token punctuation">.</span>Text</span>
                <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token class-name">TextUtils</span><span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span>message<span class="token punctuation">.</span><span class="token function">extension</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">JSONObject</span> jsonObject <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                jsonObject <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">JSONObject</span><span class="token punctuation">(</span>message<span class="token punctuation">.</span><span class="token function">extension</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>jsonObject<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span><span class="token class-name">MessageConfig</span><span class="token punctuation">.</span><span class="token constant">INPUT_STATUS</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> message<span class="token punctuation">.</span><span class="token function">fromId</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">!=</span> mMyUserId<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token function">handelInputStatus</span><span class="token punctuation">(</span>message<span class="token punctuation">.</span><span class="token function">extension</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                <span class="token comment">//TODO</span>
<span class="token comment">//                if (jsonObject.has(&quot;rtcKey&quot;) &amp;&amp; jsonObject.has(&quot;rtcValue&quot;)) {</span>
<span class="token comment">//                    if (TextUtils.equals(jsonObject.getString(&quot;rtcKey&quot;), &quot;join&quot;) &amp;&amp; !TextUtils.isEmpty(jsonObject.getString(&quot;rtcValue&quot;))) {</span>
<span class="token comment">//                        String[] values = jsonObject.getString(&quot;rtcValue&quot;).split(&quot;_&quot;);</span>
<span class="token comment">//                        String roomId = values[0];</span>
<span class="token comment">//                        String[] chatIdArray = values[1].split(&quot;,&quot;);</span>
<span class="token comment">//                        boolean hasVideo = TextUtils.equals(MessageConfig.CallMode.CALL_VIDEO+&quot;&quot;, values[2]);</span>
<span class="token comment">//                        List&lt;Long&gt; chatIds = new ArrayList&lt;&gt;();</span></code></pre><div class="lanying-code-snippet-caption"><a title="Show Full Source of app/src/main/java/top/maxim/im/message/presenter/ChatBasePresenter.java" href="https://github.com/maxim-top/lanying-im-android/blob/901cdc7846e8960d9ca5297b7ac8dd99f93f9c0a/app/src/main/java/top/maxim/im/message/presenter/ChatBasePresenter.java#L1981" target="_blank">Github Source: app/src/main/java/top/maxim/im/message/presenter/ChatBasePresenter.java (line 1981)</a></div><pre class="language-"><code class="lang-java"><span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">handleRTCMessage</span><span class="token punctuation">(</span><span class="token class-name">BMXMessage</span> message<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>message <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>message<span class="token punctuation">.</span><span class="token function">contentType</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token class-name">BMXMessage<span class="token punctuation">.</span>ContentType</span><span class="token punctuation">.</span><span class="token constant">RTC</span>
            <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token class-name">TextUtils</span><span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span>message<span class="token punctuation">.</span><span class="token function">extension</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">JSONObject</span> jsonObject <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            jsonObject <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">JSONObject</span><span class="token punctuation">(</span>message<span class="token punctuation">.</span><span class="token function">extension</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>jsonObject<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span><span class="token string">&quot;rtc_cmd&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token keyword">return</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token class-name">String</span> cmd <span class="token operator">=</span> jsonObject<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">&quot;rtc_cmd&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">switch</span> <span class="token punctuation">(</span>cmd<span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token keyword">case</span> <span class="token string">&quot;switch_audio&quot;</span><span class="token operator">:</span>
                    <span class="token comment">//&#x5207;&#x6362;&#x4E3A;&#x8BED;&#x97F3;&#x901A;&#x8BDD;</span>
                    <span class="token function">switchAudio</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token keyword">break</span><span class="token punctuation">;</span>
                <span class="token keyword">default</span><span class="token operator">:</span>
                    <span class="token keyword">break</span><span class="token punctuation">;</span></code></pre><div class="lanying-code-snippet-caption"><a title="Show Full Source of app/src/main/java/top/maxim/im/videocall/SingleVideoCallActivity.java" href="https://github.com/maxim-top/lanying-im-android/blob/901cdc7846e8960d9ca5297b7ac8dd99f93f9c0a/app/src/main/java/top/maxim/im/videocall/SingleVideoCallActivity.java#L1292" target="_blank">Github Source: app/src/main/java/top/maxim/im/videocall/SingleVideoCallActivity.java (line 1292)</a></div><pre class="language-"><code class="lang-java"><span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">handleRTCMessage</span><span class="token punctuation">(</span><span class="token class-name">BMXMessage</span> message<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>message <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>message<span class="token punctuation">.</span><span class="token function">contentType</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token class-name">BMXMessage<span class="token punctuation">.</span>ContentType</span><span class="token punctuation">.</span><span class="token constant">RTC</span>
            <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token class-name">TextUtils</span><span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span>message<span class="token punctuation">.</span><span class="token function">extension</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">JSONObject</span> jsonObject <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            jsonObject <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">JSONObject</span><span class="token punctuation">(</span>message<span class="token punctuation">.</span><span class="token function">extension</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>jsonObject<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span><span class="token string">&quot;rtc_cmd&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token keyword">return</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token class-name">String</span> cmd <span class="token operator">=</span> jsonObject<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">&quot;rtc_cmd&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">switch</span> <span class="token punctuation">(</span>cmd<span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token keyword">case</span> <span class="token string">&quot;switch_audio&quot;</span><span class="token operator">:</span>
                    <span class="token comment">//&#x5207;&#x6362;&#x4E3A;&#x8BED;&#x97F3;&#x901A;&#x8BDD;</span>
                    <span class="token function">switchAudio</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token keyword">break</span><span class="token punctuation">;</span>
                <span class="token keyword">default</span><span class="token operator">:</span>
                    <span class="token keyword">break</span><span class="token punctuation">;</span></code></pre><div class="lanying-code-snippet-caption"><a title="Show Full Source of app/src/main/java/top/maxim/im/videocall/SingleVideoCallActivity.java" href="https://github.com/maxim-top/lanying-im-android/blob/901cdc7846e8960d9ca5297b7ac8dd99f93f9c0a/app/src/main/java/top/maxim/im/videocall/SingleVideoCallActivity.java#L1295" target="_blank">Github Source: app/src/main/java/top/maxim/im/videocall/SingleVideoCallActivity.java (line 1295)</a></div></p>
<h3 id="function-setextension">function setExtension</h3>
<pre class="language-"><code class="lang-java">inline <span class="token keyword">void</span> <span class="token function">setExtension</span><span class="token punctuation">(</span>
    <span class="token class-name">String</span> arg0
<span class="token punctuation">)</span>
</code></pre>
<p>Set message extension information </p>
<p><strong>Example</strong>:</p>
<p><pre class="language-"><code class="lang-java"><span class="token keyword">public</span> <span class="token class-name">BMXMessage</span> <span class="token function">sendInputStatusMessage</span><span class="token punctuation">(</span><span class="token class-name">BMXMessage<span class="token punctuation">.</span>MessageType</span> type<span class="token punctuation">,</span> <span class="token keyword">long</span> from<span class="token punctuation">,</span> <span class="token keyword">long</span> <span class="token keyword">to</span><span class="token punctuation">,</span>
        <span class="token class-name">String</span> extension<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">BMXMessage</span> msg <span class="token operator">=</span> <span class="token class-name">BMXMessage</span><span class="token punctuation">.</span><span class="token function">createMessage</span><span class="token punctuation">(</span>from<span class="token punctuation">,</span> <span class="token keyword">to</span><span class="token punctuation">,</span> type<span class="token punctuation">,</span> <span class="token keyword">to</span><span class="token punctuation">,</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>msg <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    msg<span class="token punctuation">.</span><span class="token function">setDeliveryQos</span><span class="token punctuation">(</span><span class="token class-name">BMXMessage<span class="token punctuation">.</span>DeliveryQos<span class="token punctuation">.</span>AtMostOnce</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    msg<span class="token punctuation">.</span><span class="token function">setExtension</span><span class="token punctuation">(</span>extension<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token function">handlerMessage</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><div class="lanying-code-snippet-caption"><a title="Show Full Source of app/src/main/java/top/maxim/im/sdk/utils/MessageSendUtils.java" href="https://github.com/maxim-top/lanying-im-android/blob/901cdc7846e8960d9ca5297b7ac8dd99f93f9c0a/app/src/main/java/top/maxim/im/sdk/utils/MessageSendUtils.java#L37" target="_blank">Github Source: app/src/main/java/top/maxim/im/sdk/utils/MessageSendUtils.java (line 37)</a></div><pre class="language-"><code class="lang-java"><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">sendRTCMessage</span><span class="token punctuation">(</span><span class="token keyword">long</span> from<span class="token punctuation">,</span> <span class="token keyword">long</span> <span class="token keyword">to</span><span class="token punctuation">,</span>
                                 <span class="token class-name">String</span> ext<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">BMXMessage</span> msg <span class="token operator">=</span> <span class="token class-name">BMXMessage</span><span class="token punctuation">.</span><span class="token function">createRTCMessage</span><span class="token punctuation">(</span>from<span class="token punctuation">,</span> <span class="token keyword">to</span><span class="token punctuation">,</span> <span class="token class-name">BMXMessage<span class="token punctuation">.</span>MessageType<span class="token punctuation">.</span>Single</span><span class="token punctuation">,</span> <span class="token keyword">to</span><span class="token punctuation">,</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    msg<span class="token punctuation">.</span><span class="token function">setExtension</span><span class="token punctuation">(</span>ext<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">handlerMessage</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><div class="lanying-code-snippet-caption"><a title="Show Full Source of app/src/main/java/top/maxim/im/sdk/utils/MessageSendUtils.java" href="https://github.com/maxim-top/lanying-im-android/blob/901cdc7846e8960d9ca5297b7ac8dd99f93f9c0a/app/src/main/java/top/maxim/im/sdk/utils/MessageSendUtils.java#L47" target="_blank">Github Source: app/src/main/java/top/maxim/im/sdk/utils/MessageSendUtils.java (line 47)</a></div><pre class="language-"><code class="lang-java"><span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">sendRTCCallMessage</span><span class="token punctuation">(</span><span class="token class-name">BMXMessageConfig<span class="token punctuation">.</span>RTCCallType</span> type<span class="token punctuation">,</span> <span class="token keyword">long</span> roomId<span class="token punctuation">,</span> <span class="token keyword">long</span> from<span class="token punctuation">,</span> <span class="token keyword">long</span> <span class="token keyword">to</span><span class="token punctuation">,</span>
                                 <span class="token class-name">String</span> pin<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">BMXMessageConfig</span> con <span class="token operator">=</span> <span class="token class-name">BMXMessageConfig</span><span class="token punctuation">.</span><span class="token function">createMessageConfig</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    con<span class="token punctuation">.</span><span class="token function">setRTCCallInfo</span><span class="token punctuation">(</span>type<span class="token punctuation">,</span> roomId<span class="token punctuation">,</span> from<span class="token punctuation">,</span> <span class="token class-name">BMXMessageConfig<span class="token punctuation">.</span>RTCRoomType<span class="token punctuation">.</span>Broadcast</span><span class="token punctuation">,</span> pin<span class="token punctuation">)</span><span class="token punctuation">;</span>
    con<span class="token punctuation">.</span><span class="token function">setPushMessageLocKey</span><span class="token punctuation">(</span><span class="token string">&quot;call_in&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">BMXMessage</span> msg <span class="token operator">=</span> <span class="token class-name">BMXMessage</span><span class="token punctuation">.</span><span class="token function">createRTCMessage</span><span class="token punctuation">(</span>from<span class="token punctuation">,</span> <span class="token keyword">to</span><span class="token punctuation">,</span> <span class="token class-name">BMXMessage<span class="token punctuation">.</span>MessageType<span class="token punctuation">.</span>Single</span><span class="token punctuation">,</span> <span class="token keyword">to</span><span class="token punctuation">,</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    msg<span class="token punctuation">.</span><span class="token function">setConfig</span><span class="token punctuation">(</span>con<span class="token punctuation">)</span><span class="token punctuation">;</span>
    msg<span class="token punctuation">.</span><span class="token function">setExtension</span><span class="token punctuation">(</span><span class="token string">&quot;{\&quot;rtc\&quot;:\&quot;call\&quot;}&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">handlerMessage</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> con<span class="token punctuation">.</span><span class="token function">getRTCCallId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><div class="lanying-code-snippet-caption"><a title="Show Full Source of app/src/main/java/top/maxim/im/sdk/utils/MessageSendUtils.java" href="https://github.com/maxim-top/lanying-im-android/blob/901cdc7846e8960d9ca5297b7ac8dd99f93f9c0a/app/src/main/java/top/maxim/im/sdk/utils/MessageSendUtils.java#L61" target="_blank">Github Source: app/src/main/java/top/maxim/im/sdk/utils/MessageSendUtils.java (line 61)</a></div></p>
<h3 id="function-deliveryqos">function deliveryQos</h3>
<pre class="language-"><code class="lang-java">inline <span class="token class-name">BMXMessage<span class="token punctuation">.</span>DeliveryQos</span> <span class="token function">deliveryQos</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre>
<p>QOS of messaging </p>
<p><strong>Return</strong>: [DeliveryQos]</p>
<p><strong>Example</strong>:</p>
<p></p>
<h3 id="function-setdeliveryqos">function setDeliveryQos</h3>
<pre class="language-"><code class="lang-java">inline <span class="token keyword">void</span> <span class="token function">setDeliveryQos</span><span class="token punctuation">(</span>
    <span class="token class-name">BMXMessage<span class="token punctuation">.</span>DeliveryQos</span> qos
<span class="token punctuation">)</span>
</code></pre>
<p>Set QOS of messaging </p>
<p><strong>Parameters</strong>: </p>
<ul>
<li><strong>qos</strong> QOS of messaging </li>
</ul>
<p><strong>Example</strong>:</p>
<p><pre class="language-"><code class="lang-java"><span class="token keyword">public</span> <span class="token class-name">BMXMessage</span> <span class="token function">sendInputStatusMessage</span><span class="token punctuation">(</span><span class="token class-name">BMXMessage<span class="token punctuation">.</span>MessageType</span> type<span class="token punctuation">,</span> <span class="token keyword">long</span> from<span class="token punctuation">,</span> <span class="token keyword">long</span> <span class="token keyword">to</span><span class="token punctuation">,</span>
        <span class="token class-name">String</span> extension<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">BMXMessage</span> msg <span class="token operator">=</span> <span class="token class-name">BMXMessage</span><span class="token punctuation">.</span><span class="token function">createMessage</span><span class="token punctuation">(</span>from<span class="token punctuation">,</span> <span class="token keyword">to</span><span class="token punctuation">,</span> type<span class="token punctuation">,</span> <span class="token keyword">to</span><span class="token punctuation">,</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>msg <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    msg<span class="token punctuation">.</span><span class="token function">setDeliveryQos</span><span class="token punctuation">(</span><span class="token class-name">BMXMessage<span class="token punctuation">.</span>DeliveryQos<span class="token punctuation">.</span>AtMostOnce</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    msg<span class="token punctuation">.</span><span class="token function">setExtension</span><span class="token punctuation">(</span>extension<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token function">handlerMessage</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><div class="lanying-code-snippet-caption"><a title="Show Full Source of app/src/main/java/top/maxim/im/sdk/utils/MessageSendUtils.java" href="https://github.com/maxim-top/lanying-im-android/blob/901cdc7846e8960d9ca5297b7ac8dd99f93f9c0a/app/src/main/java/top/maxim/im/sdk/utils/MessageSendUtils.java#L36" target="_blank">Github Source: app/src/main/java/top/maxim/im/sdk/utils/MessageSendUtils.java (line 36)</a></div></p>
<h3 id="function-sendername">function senderName</h3>
<pre class="language-"><code class="lang-java">inline <span class="token class-name">String</span> <span class="token function">senderName</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre>
<p>Display name of message sender </p>
<p><strong>Return</strong>: std::string </p>
<p><strong>Example</strong>:</p>
<p></p>
<h3 id="function-setsendername">function setSenderName</h3>
<pre class="language-"><code class="lang-java">inline <span class="token keyword">void</span> <span class="token function">setSenderName</span><span class="token punctuation">(</span>
    <span class="token class-name">String</span> senderName
<span class="token punctuation">)</span>
</code></pre>
<p>Set display name of message sender </p>
<p><strong>Parameters</strong>: </p>
<ul>
<li><strong>senderName</strong> Message text content </li>
</ul>
<p><strong>Example</strong>:</p>
<p></p>
<h3 id="function-groupackcount">function groupAckCount</h3>
<pre class="language-"><code class="lang-java">inline <span class="token keyword">int</span> <span class="token function">groupAckCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre>
<p>AckCount of read group messages </p>
<p><strong>Return</strong>: int </p>
<p><strong>Example</strong>:</p>
<p><pre class="language-"><code class="lang-java">    <span class="token keyword">return</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>mMaxMessage<span class="token punctuation">.</span><span class="token function">type</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token class-name">BMXMessage<span class="token punctuation">.</span>MessageType<span class="token punctuation">.</span>Single</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// &#x5355;&#x804A;</span>
    mTvReadStatus<span class="token punctuation">.</span><span class="token function">setVisibility</span><span class="token punctuation">(</span><span class="token class-name">View</span><span class="token punctuation">.</span><span class="token constant">VISIBLE</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">boolean</span> isRead <span class="token operator">=</span> mMaxMessage<span class="token punctuation">.</span><span class="token function">isReadAcked</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    mTvReadStatus<span class="token punctuation">.</span><span class="token function">setText</span><span class="token punctuation">(</span>isRead <span class="token operator">?</span> <span class="token function">getResources</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>string<span class="token punctuation">.</span>read<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">getResources</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>string<span class="token punctuation">.</span>unread<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>mMaxMessage<span class="token punctuation">.</span><span class="token function">type</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token class-name">BMXMessage<span class="token punctuation">.</span>MessageType<span class="token punctuation">.</span>Group</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// &#x7FA4;&#x804A;</span>
    mTvReadStatus<span class="token punctuation">.</span><span class="token function">setVisibility</span><span class="token punctuation">(</span>mShowReadAck <span class="token operator">?</span> <span class="token class-name">View</span><span class="token punctuation">.</span><span class="token constant">VISIBLE</span> <span class="token operator">:</span> <span class="token class-name">View</span><span class="token punctuation">.</span><span class="token constant">GONE</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> readCount <span class="token operator">=</span> mMaxMessage<span class="token punctuation">.</span><span class="token function">groupAckCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    mTvReadStatus<span class="token punctuation">.</span><span class="token function">setText</span><span class="token punctuation">(</span><span class="token function">getResources</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>string<span class="token punctuation">.</span>read_persons<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token punctuation">(</span>readCount <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token operator">?</span> readCount <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    mTvReadStatus<span class="token punctuation">.</span><span class="token function">setVisibility</span><span class="token punctuation">(</span><span class="token class-name">View</span><span class="token punctuation">.</span><span class="token constant">GONE</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
mTvReadStatus<span class="token punctuation">.</span><span class="token function">setOnClickListener</span><span class="token punctuation">(</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>mShowReadAck <span class="token operator">||</span> mActionListener <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    mActionListener<span class="token punctuation">.</span><span class="token function">onGroupAck</span><span class="token punctuation">(</span>mMaxMessage<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><div class="lanying-code-snippet-caption"><a title="Show Full Source of app/src/main/java/top/maxim/im/message/itemholder/MessageItemBaseView.java" href="https://github.com/maxim-top/lanying-im-android/blob/901cdc7846e8960d9ca5297b7ac8dd99f93f9c0a/app/src/main/java/top/maxim/im/message/itemholder/MessageItemBaseView.java#L264" target="_blank">Github Source: app/src/main/java/top/maxim/im/message/itemholder/MessageItemBaseView.java (line 264)</a></div></p>
<h3 id="function-setgroupackcount">function setGroupAckCount</h3>
<pre class="language-"><code class="lang-java">inline <span class="token keyword">void</span> <span class="token function">setGroupAckCount</span><span class="token punctuation">(</span>
    <span class="token keyword">int</span> count
<span class="token punctuation">)</span>
</code></pre>
<p>Set groupAckCount of read messages (an SDK internal calling interface that shall not be called by upper layer) </p>
<p><strong>Parameters</strong>: </p>
<ul>
<li><strong>count</strong> Set the number of read group messages </li>
</ul>
<p><strong>Example</strong>:</p>
<p></p>
<h3 id="function-groupackunreadcount">function groupAckUnreadCount</h3>
<pre class="language-"><code class="lang-java">inline <span class="token keyword">int</span> <span class="token function">groupAckUnreadCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre>
<p>AckCount of unread group messages </p>
<p><strong>Return</strong>: int </p>
<p><strong>Example</strong>:</p>
<p></p>
<h3 id="function-setgroupackunreadcount">function setGroupAckUnreadCount</h3>
<pre class="language-"><code class="lang-java">inline <span class="token keyword">void</span> <span class="token function">setGroupAckUnreadCount</span><span class="token punctuation">(</span>
    <span class="token keyword">int</span> count
<span class="token punctuation">)</span>
</code></pre>
<p>Set groupAckCount of unread messages (an SDK internal calling interface that shall not be called by upper layer) </p>
<p><strong>Parameters</strong>: </p>
<ul>
<li><strong>count</strong> Set the number of unread group messages </li>
</ul>
<p><strong>Example</strong>:</p>
<p></p>
<h3 id="function-groupackreadall">function groupAckReadAll</h3>
<pre class="language-"><code class="lang-java">inline <span class="token keyword">boolean</span> <span class="token function">groupAckReadAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre>
<p>Whether all group messages are read </p>
<p><strong>Return</strong>: bool </p>
<p><strong>Example</strong>:</p>
<p></p>
<h3 id="function-groupplayackcount">function groupPlayAckCount</h3>
<pre class="language-"><code class="lang-java">inline <span class="token keyword">int</span> <span class="token function">groupPlayAckCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre>
<p>Get count of played group messages </p>
<p><strong>Return</strong>: bool </p>
<p><strong>Example</strong>:</p>
<p></p>
<h3 id="function-setgroupplayackcount">function setGroupPlayAckCount</h3>
<pre class="language-"><code class="lang-java">inline <span class="token keyword">void</span> <span class="token function">setGroupPlayAckCount</span><span class="token punctuation">(</span>
    <span class="token keyword">int</span> count
<span class="token punctuation">)</span>
</code></pre>
<p><strong>Example</strong>:</p>
<p></p>
<h3 id="function-groupplayackunreadcount">function groupPlayAckUnreadCount</h3>
<pre class="language-"><code class="lang-java">inline <span class="token keyword">int</span> <span class="token function">groupPlayAckUnreadCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre>
<p>Get count of unread playback acknowledgements of group messages </p>
<p><strong>Return</strong>: bool </p>
<p><strong>Example</strong>:</p>
<p></p>
<h3 id="function-setgroupplayackunreadcount">function setGroupPlayAckUnreadCount</h3>
<pre class="language-"><code class="lang-java">inline <span class="token keyword">void</span> <span class="token function">setGroupPlayAckUnreadCount</span><span class="token punctuation">(</span>
    <span class="token keyword">int</span> count
<span class="token punctuation">)</span>
</code></pre>
<p><strong>Example</strong>:</p>
<p></p>
<h3 id="function-groupplayackreadall">function groupPlayAckReadAll</h3>
<pre class="language-"><code class="lang-java">inline <span class="token keyword">boolean</span> <span class="token function">groupPlayAckReadAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre>
<p>Set all playback acknowledgements of group messages as read </p>
<p><strong>Return</strong>: bool </p>
<p><strong>Example</strong>:</p>
<p></p>
<h3 id="function-setpriority">function setPriority</h3>
<pre class="language-"><code class="lang-java">inline <span class="token keyword">void</span> <span class="token function">setPriority</span><span class="token punctuation">(</span>
    <span class="token keyword">int</span> priority
<span class="token punctuation">)</span>
</code></pre>
<p>Set message diffusion priority, default 0. 0 means diffusion, and the smaller the number, the more diffused. Value range 0-10. The default level of messages sent by ordinary users in chatroom is 5, which can be discarded. Admin level defaults to 0 and will not be discarded. Other values can be set according to business. </p>
<p><strong>Parameters</strong>: </p>
<ul>
<li><strong>priority</strong> Set the number of unread group messages </li>
</ul>
<p><strong>Example</strong>:</p>
<p></p>
<h3 id="function-priority">function priority</h3>
<pre class="language-"><code class="lang-java">inline <span class="token keyword">int</span> <span class="token function">priority</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre>
<p>Message diffusion priority </p>
<p><strong>Return</strong>: int </p>
<p><strong>Example</strong>:</p>
<p></p>
<h3 id="function-setpushmessagemode">function setPushMessageMode</h3>
<pre class="language-"><code class="lang-java">inline <span class="token keyword">void</span> <span class="token function">setPushMessageMode</span><span class="token punctuation">(</span>
    <span class="token keyword">boolean</span> arg0
<span class="token punctuation">)</span>
</code></pre>
<p>Set whether to push messages </p>
<p><strong>Example</strong>:</p>
<p></p>
<h3 id="function-ispushmessage">function isPushMessage</h3>
<pre class="language-"><code class="lang-java">inline <span class="token keyword">boolean</span> <span class="token function">isPushMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre>
<p>Whether it is a push message </p>
<p><strong>Return</strong>: boolean </p>
<p><strong>Example</strong>:</p>
<p></p>
<h3 id="function-createmessage">function createMessage</h3>
<pre class="language-"><code class="lang-java"><span class="token keyword">static</span> inline <span class="token class-name">BMXMessage</span> <span class="token function">createMessage</span><span class="token punctuation">(</span>
    <span class="token keyword">long</span> from<span class="token punctuation">,</span>
    <span class="token keyword">long</span> <span class="token keyword">to</span><span class="token punctuation">,</span>
    <span class="token class-name">BMXMessage<span class="token punctuation">.</span>MessageType</span> type<span class="token punctuation">,</span>
    <span class="token keyword">long</span> conversationId<span class="token punctuation">,</span>
    <span class="token class-name">String</span> content
<span class="token punctuation">)</span>
</code></pre>
<p>Create a text message </p>
<p><strong>Parameters</strong>: </p>
<ul>
<li><strong>from</strong> Message sender </li>
<li><strong>to</strong> Message receiver </li>
<li><strong>type</strong> Message type </li>
<li><strong>conversationId</strong> Conversation id </li>
<li><strong>content</strong> Message content </li>
</ul>
<p><strong>Example</strong>:</p>
<p><pre class="language-"><code class="lang-java"><span class="token keyword">public</span> <span class="token class-name">BMXMessage</span> <span class="token function">sendInputStatusMessage</span><span class="token punctuation">(</span><span class="token class-name">BMXMessage<span class="token punctuation">.</span>MessageType</span> type<span class="token punctuation">,</span> <span class="token keyword">long</span> from<span class="token punctuation">,</span> <span class="token keyword">long</span> <span class="token keyword">to</span><span class="token punctuation">,</span>
        <span class="token class-name">String</span> extension<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">BMXMessage</span> msg <span class="token operator">=</span> <span class="token class-name">BMXMessage</span><span class="token punctuation">.</span><span class="token function">createMessage</span><span class="token punctuation">(</span>from<span class="token punctuation">,</span> <span class="token keyword">to</span><span class="token punctuation">,</span> type<span class="token punctuation">,</span> <span class="token keyword">to</span><span class="token punctuation">,</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>msg <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    msg<span class="token punctuation">.</span><span class="token function">setDeliveryQos</span><span class="token punctuation">(</span><span class="token class-name">BMXMessage<span class="token punctuation">.</span>DeliveryQos<span class="token punctuation">.</span>AtMostOnce</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    msg<span class="token punctuation">.</span><span class="token function">setExtension</span><span class="token punctuation">(</span>extension<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token function">handlerMessage</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><div class="lanying-code-snippet-caption"><a title="Show Full Source of app/src/main/java/top/maxim/im/sdk/utils/MessageSendUtils.java" href="https://github.com/maxim-top/lanying-im-android/blob/901cdc7846e8960d9ca5297b7ac8dd99f93f9c0a/app/src/main/java/top/maxim/im/sdk/utils/MessageSendUtils.java#L32" target="_blank">Github Source: app/src/main/java/top/maxim/im/sdk/utils/MessageSendUtils.java (line 32)</a></div><pre class="language-"><code class="lang-java"><span class="token keyword">public</span> <span class="token class-name">BMXMessage</span> <span class="token function">sendTextMessage</span><span class="token punctuation">(</span><span class="token class-name">Context</span> context<span class="token punctuation">,</span> <span class="token class-name">BMXMessage<span class="token punctuation">.</span>MessageType</span> type<span class="token punctuation">,</span> <span class="token keyword">long</span> from<span class="token punctuation">,</span> <span class="token keyword">long</span> <span class="token keyword">to</span><span class="token punctuation">,</span> <span class="token class-name">String</span> text<span class="token punctuation">,</span>
                                  <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> atMap<span class="token punctuation">,</span> <span class="token class-name">String</span> senderName<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">BMXMessage</span> msg <span class="token operator">=</span> <span class="token class-name">BMXMessage</span><span class="token punctuation">.</span><span class="token function">createMessage</span><span class="token punctuation">(</span>from<span class="token punctuation">,</span> <span class="token keyword">to</span><span class="token punctuation">,</span> type<span class="token punctuation">,</span> <span class="token keyword">to</span><span class="token punctuation">,</span> text<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>msg <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// &#x6587;&#x672C;&#x529F;&#x80FD;&#x6DFB;&#x52A0;@&#x5BF9;&#x8C61;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>atMap <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>atMap<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">BMXMessageConfig</span> config <span class="token operator">=</span> <span class="token class-name">BMXMessageConfig</span><span class="token punctuation">.</span><span class="token function">createMessageConfig</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        config<span class="token punctuation">.</span><span class="token function">setSenderNickname</span><span class="token punctuation">(</span>senderName<span class="token punctuation">)</span><span class="token punctuation">;</span>
        config<span class="token punctuation">.</span><span class="token function">setPushMessage</span><span class="token punctuation">(</span><span class="token class-name">ChatUtils</span><span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getMessageDesc</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> msg<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// @&#x5BF9;&#x8C61;&#x7684;&#x5B58;&#x50A8;&#x4FE1;&#x606F; &#x5305;&#x62EC;&#x5168;&#x90E8;&#x6210;&#x5458;&#x6216;&#x8005;&#x90E8;&#x5206;&#x6210;&#x5458;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>atMap<span class="token punctuation">.</span><span class="token function">containsKey</span><span class="token punctuation">(</span><span class="token string">&quot;-1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// @&#x5168;&#x90E8;</span>
            <span class="token class-name">String</span> atTitle <span class="token operator">=</span> atMap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;-1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token class-name">TextUtils</span><span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span>atTitle<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> text<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span>atTitle<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token comment">// &#x5982;&#x679C;&#x5305;&#x542B;&#x5168;&#x90E8;&#x76F4;&#x63A5;&#x8D70;&#x5168;&#x90E8; &#x8FD8;&#x9700;&#x8981;&#x5224;&#x65AD;&#x6587;&#x672C;&#x6D88;&#x606F;&#x662F;&#x5426;&#x5305;&#x542B;&#x5B8C;&#x6210;&#x7684;@&#x540D;&#x79F0; &#x5982;&#x679C;&#x6CA1;&#x6709;&#x5C31;&#x4E0D;&#x89E6;&#x53D1;@</span>
                config<span class="token punctuation">.</span><span class="token function">setMentionAll</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></code></pre><div class="lanying-code-snippet-caption"><a title="Show Full Source of app/src/main/java/top/maxim/im/sdk/utils/MessageSendUtils.java" href="https://github.com/maxim-top/lanying-im-android/blob/901cdc7846e8960d9ca5297b7ac8dd99f93f9c0a/app/src/main/java/top/maxim/im/sdk/utils/MessageSendUtils.java#L117" target="_blank">Github Source: app/src/main/java/top/maxim/im/sdk/utils/MessageSendUtils.java (line 117)</a></div><pre class="language-"><code class="lang-java"><span class="token keyword">public</span> <span class="token class-name">BMXMessage</span> <span class="token function">sendImageMessage</span><span class="token punctuation">(</span><span class="token class-name">BMXMessage<span class="token punctuation">.</span>MessageType</span> type<span class="token punctuation">,</span> <span class="token keyword">long</span> from<span class="token punctuation">,</span> <span class="token keyword">long</span> <span class="token keyword">to</span><span class="token punctuation">,</span> <span class="token class-name">String</span> path<span class="token punctuation">,</span>
        <span class="token keyword">int</span> w<span class="token punctuation">,</span> <span class="token keyword">int</span> h<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">BMXImageAttachment<span class="token punctuation">.</span>Size</span> size <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BMXMessageAttachment<span class="token punctuation">.</span>Size</span><span class="token punctuation">(</span>w<span class="token punctuation">,</span> h<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">BMXImageAttachment</span> imageAttachment <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BMXImageAttachment</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> size<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">BMXMessage</span> msg <span class="token operator">=</span> <span class="token class-name">BMXMessage</span><span class="token punctuation">.</span><span class="token function">createMessage</span><span class="token punctuation">(</span>from<span class="token punctuation">,</span> <span class="token keyword">to</span><span class="token punctuation">,</span> type<span class="token punctuation">,</span> <span class="token keyword">to</span><span class="token punctuation">,</span> imageAttachment<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token function">handlerMessage</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><div class="lanying-code-snippet-caption"><a title="Show Full Source of app/src/main/java/top/maxim/im/sdk/utils/MessageSendUtils.java" href="https://github.com/maxim-top/lanying-im-android/blob/901cdc7846e8960d9ca5297b7ac8dd99f93f9c0a/app/src/main/java/top/maxim/im/sdk/utils/MessageSendUtils.java#L167" target="_blank">Github Source: app/src/main/java/top/maxim/im/sdk/utils/MessageSendUtils.java (line 167)</a></div><pre class="language-"><code class="lang-java"><span class="token keyword">public</span> <span class="token class-name">BMXMessage</span> <span class="token function">sendAudioMessage</span><span class="token punctuation">(</span><span class="token class-name">BMXMessage<span class="token punctuation">.</span>MessageType</span> type<span class="token punctuation">,</span> <span class="token keyword">long</span> from<span class="token punctuation">,</span> <span class="token keyword">long</span> <span class="token keyword">to</span><span class="token punctuation">,</span> <span class="token class-name">String</span> path<span class="token punctuation">,</span>
        <span class="token keyword">int</span> time<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">BMXVoiceAttachment</span> voiceAttachment <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BMXVoiceAttachment</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> time<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">BMXMessage</span> msg <span class="token operator">=</span> <span class="token class-name">BMXMessage</span><span class="token punctuation">.</span><span class="token function">createMessage</span><span class="token punctuation">(</span>from<span class="token punctuation">,</span> <span class="token keyword">to</span><span class="token punctuation">,</span> type<span class="token punctuation">,</span> <span class="token keyword">to</span><span class="token punctuation">,</span> voiceAttachment<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token function">handlerMessage</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><div class="lanying-code-snippet-caption"><a title="Show Full Source of app/src/main/java/top/maxim/im/sdk/utils/MessageSendUtils.java" href="https://github.com/maxim-top/lanying-im-android/blob/901cdc7846e8960d9ca5297b7ac8dd99f93f9c0a/app/src/main/java/top/maxim/im/sdk/utils/MessageSendUtils.java#L183" target="_blank">Github Source: app/src/main/java/top/maxim/im/sdk/utils/MessageSendUtils.java (line 183)</a></div><pre class="language-"><code class="lang-java"><span class="token keyword">public</span> <span class="token class-name">BMXMessage</span> <span class="token function">sendVideoMessage</span><span class="token punctuation">(</span><span class="token class-name">BMXMessage<span class="token punctuation">.</span>MessageType</span> type<span class="token punctuation">,</span> <span class="token keyword">long</span> from<span class="token punctuation">,</span> <span class="token keyword">long</span> <span class="token keyword">to</span><span class="token punctuation">,</span> <span class="token class-name">String</span> path<span class="token punctuation">,</span>
        <span class="token keyword">int</span> time<span class="token punctuation">,</span> <span class="token keyword">int</span> w<span class="token punctuation">,</span> <span class="token keyword">int</span> h<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">BMXVideoAttachment<span class="token punctuation">.</span>Size</span> size <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BMXVideoAttachment<span class="token punctuation">.</span>Size</span><span class="token punctuation">(</span>w<span class="token punctuation">,</span> h<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">BMXVideoAttachment</span> videoAttachment <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BMXVideoAttachment</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> time<span class="token punctuation">,</span> size<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">BMXMessage</span> msg <span class="token operator">=</span> <span class="token class-name">BMXMessage</span><span class="token punctuation">.</span><span class="token function">createMessage</span><span class="token punctuation">(</span>from<span class="token punctuation">,</span> <span class="token keyword">to</span><span class="token punctuation">,</span> type<span class="token punctuation">,</span> <span class="token keyword">to</span><span class="token punctuation">,</span> videoAttachment<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token function">handlerMessage</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><div class="lanying-code-snippet-caption"><a title="Show Full Source of app/src/main/java/top/maxim/im/sdk/utils/MessageSendUtils.java" href="https://github.com/maxim-top/lanying-im-android/blob/901cdc7846e8960d9ca5297b7ac8dd99f93f9c0a/app/src/main/java/top/maxim/im/sdk/utils/MessageSendUtils.java#L200" target="_blank">Github Source: app/src/main/java/top/maxim/im/sdk/utils/MessageSendUtils.java (line 200)</a></div><pre class="language-"><code class="lang-java"><span class="token keyword">public</span> <span class="token class-name">BMXMessage</span> <span class="token function">sendFileMessage</span><span class="token punctuation">(</span><span class="token class-name">BMXMessage<span class="token punctuation">.</span>MessageType</span> type<span class="token punctuation">,</span> <span class="token keyword">long</span> from<span class="token punctuation">,</span> <span class="token keyword">long</span> <span class="token keyword">to</span><span class="token punctuation">,</span> <span class="token class-name">String</span> path<span class="token punctuation">,</span>
        <span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">BMXFileAttachment</span> fileAttachment <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BMXFileAttachment</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">BMXMessage</span> msg <span class="token operator">=</span> <span class="token class-name">BMXMessage</span><span class="token punctuation">.</span><span class="token function">createMessage</span><span class="token punctuation">(</span>from<span class="token punctuation">,</span> <span class="token keyword">to</span><span class="token punctuation">,</span> type<span class="token punctuation">,</span> <span class="token keyword">to</span><span class="token punctuation">,</span> fileAttachment<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token function">handlerMessage</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><div class="lanying-code-snippet-caption"><a title="Show Full Source of app/src/main/java/top/maxim/im/sdk/utils/MessageSendUtils.java" href="https://github.com/maxim-top/lanying-im-android/blob/901cdc7846e8960d9ca5297b7ac8dd99f93f9c0a/app/src/main/java/top/maxim/im/sdk/utils/MessageSendUtils.java#L217" target="_blank">Github Source: app/src/main/java/top/maxim/im/sdk/utils/MessageSendUtils.java (line 217)</a></div><pre class="language-"><code class="lang-java"><span class="token keyword">public</span> <span class="token class-name">BMXMessage</span> <span class="token function">sendLocationMessage</span><span class="token punctuation">(</span><span class="token class-name">BMXMessage<span class="token punctuation">.</span>MessageType</span> type<span class="token punctuation">,</span> <span class="token keyword">long</span> from<span class="token punctuation">,</span> <span class="token keyword">long</span> <span class="token keyword">to</span><span class="token punctuation">,</span>
        <span class="token keyword">double</span> latitude<span class="token punctuation">,</span> <span class="token keyword">double</span> longitude<span class="token punctuation">,</span> <span class="token class-name">String</span> address<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">BMXLocationAttachment</span> locationAttachment <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BMXLocationAttachment</span><span class="token punctuation">(</span>latitude<span class="token punctuation">,</span> longitude<span class="token punctuation">,</span>
            address<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">BMXMessage</span> msg <span class="token operator">=</span> <span class="token class-name">BMXMessage</span><span class="token punctuation">.</span><span class="token function">createMessage</span><span class="token punctuation">(</span>from<span class="token punctuation">,</span> <span class="token keyword">to</span><span class="token punctuation">,</span> type<span class="token punctuation">,</span> <span class="token keyword">to</span><span class="token punctuation">,</span> locationAttachment<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token function">handlerMessage</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><div class="lanying-code-snippet-caption"><a title="Show Full Source of app/src/main/java/top/maxim/im/sdk/utils/MessageSendUtils.java" href="https://github.com/maxim-top/lanying-im-android/blob/901cdc7846e8960d9ca5297b7ac8dd99f93f9c0a/app/src/main/java/top/maxim/im/sdk/utils/MessageSendUtils.java#L236" target="_blank">Github Source: app/src/main/java/top/maxim/im/sdk/utils/MessageSendUtils.java (line 236)</a></div><pre class="language-"><code class="lang-java"><span class="token keyword">public</span> <span class="token class-name">BMXMessage</span> <span class="token function">forwardMessage</span><span class="token punctuation">(</span><span class="token class-name">MessageBean</span> messageBean<span class="token punctuation">,</span> <span class="token class-name">BMXMessage<span class="token punctuation">.</span>MessageType</span> type<span class="token punctuation">,</span>
        <span class="token keyword">long</span> from<span class="token punctuation">,</span> <span class="token keyword">long</span> <span class="token keyword">to</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>messageBean <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token class-name">BMXMessage<span class="token punctuation">.</span>ContentType</span> contentType <span class="token operator">=</span> messageBean<span class="token punctuation">.</span><span class="token function">getContentType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">BMXMessage</span> message <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>contentType <span class="token operator">==</span> <span class="token class-name">BMXMessage<span class="token punctuation">.</span>ContentType<span class="token punctuation">.</span>Text</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        message <span class="token operator">=</span> <span class="token class-name">BMXMessage</span><span class="token punctuation">.</span><span class="token function">createMessage</span><span class="token punctuation">(</span>from<span class="token punctuation">,</span> <span class="token keyword">to</span><span class="token punctuation">,</span> type<span class="token punctuation">,</span> <span class="token keyword">to</span><span class="token punctuation">,</span> messageBean<span class="token punctuation">.</span><span class="token function">getContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>contentType <span class="token operator">==</span> <span class="token class-name">BMXMessage<span class="token punctuation">.</span>ContentType<span class="token punctuation">.</span>Image</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// &#x56FE;&#x7247;</span>
        <span class="token class-name">BMXImageAttachment<span class="token punctuation">.</span>Size</span> size <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BMXMessageAttachment<span class="token punctuation">.</span>Size</span><span class="token punctuation">(</span>messageBean<span class="token punctuation">.</span><span class="token function">getW</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                messageBean<span class="token punctuation">.</span><span class="token function">getH</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">BMXImageAttachment</span> imageAttachment <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BMXImageAttachment</span><span class="token punctuation">(</span>messageBean<span class="token punctuation">.</span><span class="token function">getPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                size<span class="token punctuation">)</span><span class="token punctuation">;</span>
        message <span class="token operator">=</span> <span class="token class-name">BMXMessage</span><span class="token punctuation">.</span><span class="token function">createMessage</span><span class="token punctuation">(</span>from<span class="token punctuation">,</span> <span class="token keyword">to</span><span class="token punctuation">,</span> type<span class="token punctuation">,</span> <span class="token keyword">to</span><span class="token punctuation">,</span> imageAttachment<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>contentType <span class="token operator">==</span> <span class="token class-name">BMXMessage<span class="token punctuation">.</span>ContentType<span class="token punctuation">.</span>Voice</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// &#x8BED;&#x97F3;</span>
        <span class="token class-name">BMXVoiceAttachment</span> voiceAttachment <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BMXVoiceAttachment</span><span class="token punctuation">(</span>messageBean<span class="token punctuation">.</span><span class="token function">getPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                messageBean<span class="token punctuation">.</span><span class="token function">getDuration</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><div class="lanying-code-snippet-caption"><a title="Show Full Source of app/src/main/java/top/maxim/im/sdk/utils/MessageSendUtils.java" href="https://github.com/maxim-top/lanying-im-android/blob/901cdc7846e8960d9ca5297b7ac8dd99f93f9c0a/app/src/main/java/top/maxim/im/sdk/utils/MessageSendUtils.java#L267" target="_blank">Github Source: app/src/main/java/top/maxim/im/sdk/utils/MessageSendUtils.java (line 267)</a></div></p>
<h3 id="function-createmessage">function createMessage</h3>
<pre class="language-"><code class="lang-java"><span class="token keyword">static</span> inline <span class="token class-name">BMXMessage</span> <span class="token function">createMessage</span><span class="token punctuation">(</span>
    <span class="token keyword">long</span> from<span class="token punctuation">,</span>
    <span class="token keyword">long</span> <span class="token keyword">to</span><span class="token punctuation">,</span>
    <span class="token class-name">BMXMessage<span class="token punctuation">.</span>MessageType</span> type<span class="token punctuation">,</span>
    <span class="token keyword">long</span> conversationId<span class="token punctuation">,</span>
    <span class="token class-name">BMXMessageAttachment</span> attachment
<span class="token punctuation">)</span>
</code></pre>
<p>Create a sent-attachment message </p>
<p><strong>Parameters</strong>: </p>
<ul>
<li><strong>from</strong> Message sender </li>
<li><strong>to</strong> Message receiver </li>
<li><strong>type</strong> Message type </li>
<li><strong>conversationId</strong> Conversation id </li>
<li><strong>attachment</strong> Attachment </li>
</ul>
<p><strong>Example</strong>:</p>
<p><pre class="language-"><code class="lang-java"><span class="token keyword">public</span> <span class="token class-name">BMXMessage</span> <span class="token function">sendInputStatusMessage</span><span class="token punctuation">(</span><span class="token class-name">BMXMessage<span class="token punctuation">.</span>MessageType</span> type<span class="token punctuation">,</span> <span class="token keyword">long</span> from<span class="token punctuation">,</span> <span class="token keyword">long</span> <span class="token keyword">to</span><span class="token punctuation">,</span>
        <span class="token class-name">String</span> extension<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">BMXMessage</span> msg <span class="token operator">=</span> <span class="token class-name">BMXMessage</span><span class="token punctuation">.</span><span class="token function">createMessage</span><span class="token punctuation">(</span>from<span class="token punctuation">,</span> <span class="token keyword">to</span><span class="token punctuation">,</span> type<span class="token punctuation">,</span> <span class="token keyword">to</span><span class="token punctuation">,</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>msg <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    msg<span class="token punctuation">.</span><span class="token function">setDeliveryQos</span><span class="token punctuation">(</span><span class="token class-name">BMXMessage<span class="token punctuation">.</span>DeliveryQos<span class="token punctuation">.</span>AtMostOnce</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    msg<span class="token punctuation">.</span><span class="token function">setExtension</span><span class="token punctuation">(</span>extension<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token function">handlerMessage</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><div class="lanying-code-snippet-caption"><a title="Show Full Source of app/src/main/java/top/maxim/im/sdk/utils/MessageSendUtils.java" href="https://github.com/maxim-top/lanying-im-android/blob/901cdc7846e8960d9ca5297b7ac8dd99f93f9c0a/app/src/main/java/top/maxim/im/sdk/utils/MessageSendUtils.java#L32" target="_blank">Github Source: app/src/main/java/top/maxim/im/sdk/utils/MessageSendUtils.java (line 32)</a></div><pre class="language-"><code class="lang-java"><span class="token keyword">public</span> <span class="token class-name">BMXMessage</span> <span class="token function">sendTextMessage</span><span class="token punctuation">(</span><span class="token class-name">Context</span> context<span class="token punctuation">,</span> <span class="token class-name">BMXMessage<span class="token punctuation">.</span>MessageType</span> type<span class="token punctuation">,</span> <span class="token keyword">long</span> from<span class="token punctuation">,</span> <span class="token keyword">long</span> <span class="token keyword">to</span><span class="token punctuation">,</span> <span class="token class-name">String</span> text<span class="token punctuation">,</span>
                                  <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> atMap<span class="token punctuation">,</span> <span class="token class-name">String</span> senderName<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">BMXMessage</span> msg <span class="token operator">=</span> <span class="token class-name">BMXMessage</span><span class="token punctuation">.</span><span class="token function">createMessage</span><span class="token punctuation">(</span>from<span class="token punctuation">,</span> <span class="token keyword">to</span><span class="token punctuation">,</span> type<span class="token punctuation">,</span> <span class="token keyword">to</span><span class="token punctuation">,</span> text<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>msg <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// &#x6587;&#x672C;&#x529F;&#x80FD;&#x6DFB;&#x52A0;@&#x5BF9;&#x8C61;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>atMap <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>atMap<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">BMXMessageConfig</span> config <span class="token operator">=</span> <span class="token class-name">BMXMessageConfig</span><span class="token punctuation">.</span><span class="token function">createMessageConfig</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        config<span class="token punctuation">.</span><span class="token function">setSenderNickname</span><span class="token punctuation">(</span>senderName<span class="token punctuation">)</span><span class="token punctuation">;</span>
        config<span class="token punctuation">.</span><span class="token function">setPushMessage</span><span class="token punctuation">(</span><span class="token class-name">ChatUtils</span><span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getMessageDesc</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> msg<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// @&#x5BF9;&#x8C61;&#x7684;&#x5B58;&#x50A8;&#x4FE1;&#x606F; &#x5305;&#x62EC;&#x5168;&#x90E8;&#x6210;&#x5458;&#x6216;&#x8005;&#x90E8;&#x5206;&#x6210;&#x5458;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>atMap<span class="token punctuation">.</span><span class="token function">containsKey</span><span class="token punctuation">(</span><span class="token string">&quot;-1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// @&#x5168;&#x90E8;</span>
            <span class="token class-name">String</span> atTitle <span class="token operator">=</span> atMap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;-1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token class-name">TextUtils</span><span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span>atTitle<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> text<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span>atTitle<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token comment">// &#x5982;&#x679C;&#x5305;&#x542B;&#x5168;&#x90E8;&#x76F4;&#x63A5;&#x8D70;&#x5168;&#x90E8; &#x8FD8;&#x9700;&#x8981;&#x5224;&#x65AD;&#x6587;&#x672C;&#x6D88;&#x606F;&#x662F;&#x5426;&#x5305;&#x542B;&#x5B8C;&#x6210;&#x7684;@&#x540D;&#x79F0; &#x5982;&#x679C;&#x6CA1;&#x6709;&#x5C31;&#x4E0D;&#x89E6;&#x53D1;@</span>
                config<span class="token punctuation">.</span><span class="token function">setMentionAll</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></code></pre><div class="lanying-code-snippet-caption"><a title="Show Full Source of app/src/main/java/top/maxim/im/sdk/utils/MessageSendUtils.java" href="https://github.com/maxim-top/lanying-im-android/blob/901cdc7846e8960d9ca5297b7ac8dd99f93f9c0a/app/src/main/java/top/maxim/im/sdk/utils/MessageSendUtils.java#L117" target="_blank">Github Source: app/src/main/java/top/maxim/im/sdk/utils/MessageSendUtils.java (line 117)</a></div><pre class="language-"><code class="lang-java"><span class="token keyword">public</span> <span class="token class-name">BMXMessage</span> <span class="token function">sendImageMessage</span><span class="token punctuation">(</span><span class="token class-name">BMXMessage<span class="token punctuation">.</span>MessageType</span> type<span class="token punctuation">,</span> <span class="token keyword">long</span> from<span class="token punctuation">,</span> <span class="token keyword">long</span> <span class="token keyword">to</span><span class="token punctuation">,</span> <span class="token class-name">String</span> path<span class="token punctuation">,</span>
        <span class="token keyword">int</span> w<span class="token punctuation">,</span> <span class="token keyword">int</span> h<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">BMXImageAttachment<span class="token punctuation">.</span>Size</span> size <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BMXMessageAttachment<span class="token punctuation">.</span>Size</span><span class="token punctuation">(</span>w<span class="token punctuation">,</span> h<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">BMXImageAttachment</span> imageAttachment <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BMXImageAttachment</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> size<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">BMXMessage</span> msg <span class="token operator">=</span> <span class="token class-name">BMXMessage</span><span class="token punctuation">.</span><span class="token function">createMessage</span><span class="token punctuation">(</span>from<span class="token punctuation">,</span> <span class="token keyword">to</span><span class="token punctuation">,</span> type<span class="token punctuation">,</span> <span class="token keyword">to</span><span class="token punctuation">,</span> imageAttachment<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token function">handlerMessage</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><div class="lanying-code-snippet-caption"><a title="Show Full Source of app/src/main/java/top/maxim/im/sdk/utils/MessageSendUtils.java" href="https://github.com/maxim-top/lanying-im-android/blob/901cdc7846e8960d9ca5297b7ac8dd99f93f9c0a/app/src/main/java/top/maxim/im/sdk/utils/MessageSendUtils.java#L167" target="_blank">Github Source: app/src/main/java/top/maxim/im/sdk/utils/MessageSendUtils.java (line 167)</a></div><pre class="language-"><code class="lang-java"><span class="token keyword">public</span> <span class="token class-name">BMXMessage</span> <span class="token function">sendAudioMessage</span><span class="token punctuation">(</span><span class="token class-name">BMXMessage<span class="token punctuation">.</span>MessageType</span> type<span class="token punctuation">,</span> <span class="token keyword">long</span> from<span class="token punctuation">,</span> <span class="token keyword">long</span> <span class="token keyword">to</span><span class="token punctuation">,</span> <span class="token class-name">String</span> path<span class="token punctuation">,</span>
        <span class="token keyword">int</span> time<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">BMXVoiceAttachment</span> voiceAttachment <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BMXVoiceAttachment</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> time<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">BMXMessage</span> msg <span class="token operator">=</span> <span class="token class-name">BMXMessage</span><span class="token punctuation">.</span><span class="token function">createMessage</span><span class="token punctuation">(</span>from<span class="token punctuation">,</span> <span class="token keyword">to</span><span class="token punctuation">,</span> type<span class="token punctuation">,</span> <span class="token keyword">to</span><span class="token punctuation">,</span> voiceAttachment<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token function">handlerMessage</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><div class="lanying-code-snippet-caption"><a title="Show Full Source of app/src/main/java/top/maxim/im/sdk/utils/MessageSendUtils.java" href="https://github.com/maxim-top/lanying-im-android/blob/901cdc7846e8960d9ca5297b7ac8dd99f93f9c0a/app/src/main/java/top/maxim/im/sdk/utils/MessageSendUtils.java#L183" target="_blank">Github Source: app/src/main/java/top/maxim/im/sdk/utils/MessageSendUtils.java (line 183)</a></div><pre class="language-"><code class="lang-java"><span class="token keyword">public</span> <span class="token class-name">BMXMessage</span> <span class="token function">sendVideoMessage</span><span class="token punctuation">(</span><span class="token class-name">BMXMessage<span class="token punctuation">.</span>MessageType</span> type<span class="token punctuation">,</span> <span class="token keyword">long</span> from<span class="token punctuation">,</span> <span class="token keyword">long</span> <span class="token keyword">to</span><span class="token punctuation">,</span> <span class="token class-name">String</span> path<span class="token punctuation">,</span>
        <span class="token keyword">int</span> time<span class="token punctuation">,</span> <span class="token keyword">int</span> w<span class="token punctuation">,</span> <span class="token keyword">int</span> h<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">BMXVideoAttachment<span class="token punctuation">.</span>Size</span> size <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BMXVideoAttachment<span class="token punctuation">.</span>Size</span><span class="token punctuation">(</span>w<span class="token punctuation">,</span> h<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">BMXVideoAttachment</span> videoAttachment <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BMXVideoAttachment</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> time<span class="token punctuation">,</span> size<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">BMXMessage</span> msg <span class="token operator">=</span> <span class="token class-name">BMXMessage</span><span class="token punctuation">.</span><span class="token function">createMessage</span><span class="token punctuation">(</span>from<span class="token punctuation">,</span> <span class="token keyword">to</span><span class="token punctuation">,</span> type<span class="token punctuation">,</span> <span class="token keyword">to</span><span class="token punctuation">,</span> videoAttachment<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token function">handlerMessage</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><div class="lanying-code-snippet-caption"><a title="Show Full Source of app/src/main/java/top/maxim/im/sdk/utils/MessageSendUtils.java" href="https://github.com/maxim-top/lanying-im-android/blob/901cdc7846e8960d9ca5297b7ac8dd99f93f9c0a/app/src/main/java/top/maxim/im/sdk/utils/MessageSendUtils.java#L200" target="_blank">Github Source: app/src/main/java/top/maxim/im/sdk/utils/MessageSendUtils.java (line 200)</a></div><pre class="language-"><code class="lang-java"><span class="token keyword">public</span> <span class="token class-name">BMXMessage</span> <span class="token function">sendFileMessage</span><span class="token punctuation">(</span><span class="token class-name">BMXMessage<span class="token punctuation">.</span>MessageType</span> type<span class="token punctuation">,</span> <span class="token keyword">long</span> from<span class="token punctuation">,</span> <span class="token keyword">long</span> <span class="token keyword">to</span><span class="token punctuation">,</span> <span class="token class-name">String</span> path<span class="token punctuation">,</span>
        <span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">BMXFileAttachment</span> fileAttachment <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BMXFileAttachment</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">BMXMessage</span> msg <span class="token operator">=</span> <span class="token class-name">BMXMessage</span><span class="token punctuation">.</span><span class="token function">createMessage</span><span class="token punctuation">(</span>from<span class="token punctuation">,</span> <span class="token keyword">to</span><span class="token punctuation">,</span> type<span class="token punctuation">,</span> <span class="token keyword">to</span><span class="token punctuation">,</span> fileAttachment<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token function">handlerMessage</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><div class="lanying-code-snippet-caption"><a title="Show Full Source of app/src/main/java/top/maxim/im/sdk/utils/MessageSendUtils.java" href="https://github.com/maxim-top/lanying-im-android/blob/901cdc7846e8960d9ca5297b7ac8dd99f93f9c0a/app/src/main/java/top/maxim/im/sdk/utils/MessageSendUtils.java#L217" target="_blank">Github Source: app/src/main/java/top/maxim/im/sdk/utils/MessageSendUtils.java (line 217)</a></div><pre class="language-"><code class="lang-java"><span class="token keyword">public</span> <span class="token class-name">BMXMessage</span> <span class="token function">sendLocationMessage</span><span class="token punctuation">(</span><span class="token class-name">BMXMessage<span class="token punctuation">.</span>MessageType</span> type<span class="token punctuation">,</span> <span class="token keyword">long</span> from<span class="token punctuation">,</span> <span class="token keyword">long</span> <span class="token keyword">to</span><span class="token punctuation">,</span>
        <span class="token keyword">double</span> latitude<span class="token punctuation">,</span> <span class="token keyword">double</span> longitude<span class="token punctuation">,</span> <span class="token class-name">String</span> address<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">BMXLocationAttachment</span> locationAttachment <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BMXLocationAttachment</span><span class="token punctuation">(</span>latitude<span class="token punctuation">,</span> longitude<span class="token punctuation">,</span>
            address<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">BMXMessage</span> msg <span class="token operator">=</span> <span class="token class-name">BMXMessage</span><span class="token punctuation">.</span><span class="token function">createMessage</span><span class="token punctuation">(</span>from<span class="token punctuation">,</span> <span class="token keyword">to</span><span class="token punctuation">,</span> type<span class="token punctuation">,</span> <span class="token keyword">to</span><span class="token punctuation">,</span> locationAttachment<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token function">handlerMessage</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><div class="lanying-code-snippet-caption"><a title="Show Full Source of app/src/main/java/top/maxim/im/sdk/utils/MessageSendUtils.java" href="https://github.com/maxim-top/lanying-im-android/blob/901cdc7846e8960d9ca5297b7ac8dd99f93f9c0a/app/src/main/java/top/maxim/im/sdk/utils/MessageSendUtils.java#L236" target="_blank">Github Source: app/src/main/java/top/maxim/im/sdk/utils/MessageSendUtils.java (line 236)</a></div><pre class="language-"><code class="lang-java"><span class="token keyword">public</span> <span class="token class-name">BMXMessage</span> <span class="token function">forwardMessage</span><span class="token punctuation">(</span><span class="token class-name">MessageBean</span> messageBean<span class="token punctuation">,</span> <span class="token class-name">BMXMessage<span class="token punctuation">.</span>MessageType</span> type<span class="token punctuation">,</span>
        <span class="token keyword">long</span> from<span class="token punctuation">,</span> <span class="token keyword">long</span> <span class="token keyword">to</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>messageBean <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token class-name">BMXMessage<span class="token punctuation">.</span>ContentType</span> contentType <span class="token operator">=</span> messageBean<span class="token punctuation">.</span><span class="token function">getContentType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">BMXMessage</span> message <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>contentType <span class="token operator">==</span> <span class="token class-name">BMXMessage<span class="token punctuation">.</span>ContentType<span class="token punctuation">.</span>Text</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        message <span class="token operator">=</span> <span class="token class-name">BMXMessage</span><span class="token punctuation">.</span><span class="token function">createMessage</span><span class="token punctuation">(</span>from<span class="token punctuation">,</span> <span class="token keyword">to</span><span class="token punctuation">,</span> type<span class="token punctuation">,</span> <span class="token keyword">to</span><span class="token punctuation">,</span> messageBean<span class="token punctuation">.</span><span class="token function">getContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>contentType <span class="token operator">==</span> <span class="token class-name">BMXMessage<span class="token punctuation">.</span>ContentType<span class="token punctuation">.</span>Image</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// &#x56FE;&#x7247;</span>
        <span class="token class-name">BMXImageAttachment<span class="token punctuation">.</span>Size</span> size <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BMXMessageAttachment<span class="token punctuation">.</span>Size</span><span class="token punctuation">(</span>messageBean<span class="token punctuation">.</span><span class="token function">getW</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                messageBean<span class="token punctuation">.</span><span class="token function">getH</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">BMXImageAttachment</span> imageAttachment <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BMXImageAttachment</span><span class="token punctuation">(</span>messageBean<span class="token punctuation">.</span><span class="token function">getPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                size<span class="token punctuation">)</span><span class="token punctuation">;</span>
        message <span class="token operator">=</span> <span class="token class-name">BMXMessage</span><span class="token punctuation">.</span><span class="token function">createMessage</span><span class="token punctuation">(</span>from<span class="token punctuation">,</span> <span class="token keyword">to</span><span class="token punctuation">,</span> type<span class="token punctuation">,</span> <span class="token keyword">to</span><span class="token punctuation">,</span> imageAttachment<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>contentType <span class="token operator">==</span> <span class="token class-name">BMXMessage<span class="token punctuation">.</span>ContentType<span class="token punctuation">.</span>Voice</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// &#x8BED;&#x97F3;</span>
        <span class="token class-name">BMXVoiceAttachment</span> voiceAttachment <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BMXVoiceAttachment</span><span class="token punctuation">(</span>messageBean<span class="token punctuation">.</span><span class="token function">getPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                messageBean<span class="token punctuation">.</span><span class="token function">getDuration</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><div class="lanying-code-snippet-caption"><a title="Show Full Source of app/src/main/java/top/maxim/im/sdk/utils/MessageSendUtils.java" href="https://github.com/maxim-top/lanying-im-android/blob/901cdc7846e8960d9ca5297b7ac8dd99f93f9c0a/app/src/main/java/top/maxim/im/sdk/utils/MessageSendUtils.java#L267" target="_blank">Github Source: app/src/main/java/top/maxim/im/sdk/utils/MessageSendUtils.java (line 267)</a></div></p>
<h3 id="function-createcommandmessage">function createCommandMessage</h3>
<pre class="language-"><code class="lang-java"><span class="token keyword">static</span> inline <span class="token class-name">BMXMessage</span> <span class="token function">createCommandMessage</span><span class="token punctuation">(</span>
    <span class="token keyword">long</span> from<span class="token punctuation">,</span>
    <span class="token keyword">long</span> <span class="token keyword">to</span><span class="token punctuation">,</span>
    <span class="token class-name">BMXMessage<span class="token punctuation">.</span>MessageType</span> type<span class="token punctuation">,</span>
    <span class="token keyword">long</span> conversationId<span class="token punctuation">,</span>
    <span class="token class-name">String</span> content
<span class="token punctuation">)</span>
</code></pre>
<p>Create a sent command message (command message holds command information in a content field or an extension field) </p>
<p><strong>Parameters</strong>: </p>
<ul>
<li><strong>from</strong> Message sender </li>
<li><strong>to</strong> Message receiver </li>
<li><strong>type</strong> Message type </li>
<li><strong>conversationId</strong> Conversation id </li>
<li><strong>content</strong> Message content </li>
</ul>
<p><strong>Example</strong>:</p>
<p><pre class="language-"><code class="lang-java"><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">sendCommandMessage</span><span class="token punctuation">(</span><span class="token class-name">BMXMessage<span class="token punctuation">.</span>MessageType</span> type<span class="token punctuation">,</span> <span class="token keyword">long</span> from<span class="token punctuation">,</span> <span class="token keyword">long</span> <span class="token keyword">to</span><span class="token punctuation">,</span>
        <span class="token class-name">String</span> content<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">handlerMessage</span><span class="token punctuation">(</span><span class="token class-name">BMXMessage</span><span class="token punctuation">.</span><span class="token function">createCommandMessage</span><span class="token punctuation">(</span>from<span class="token punctuation">,</span> <span class="token keyword">to</span><span class="token punctuation">,</span> type<span class="token punctuation">,</span> <span class="token keyword">to</span><span class="token punctuation">,</span> content<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><div class="lanying-code-snippet-caption"><a title="Show Full Source of app/src/main/java/top/maxim/im/sdk/utils/MessageSendUtils.java" href="https://github.com/maxim-top/lanying-im-android/blob/901cdc7846e8960d9ca5297b7ac8dd99f93f9c0a/app/src/main/java/top/maxim/im/sdk/utils/MessageSendUtils.java#L251" target="_blank">Github Source: app/src/main/java/top/maxim/im/sdk/utils/MessageSendUtils.java (line 251)</a></div></p>
<h3 id="function-createmessage">function createMessage</h3>
<pre class="language-"><code class="lang-java"><span class="token keyword">static</span> inline <span class="token class-name">BMXMessage</span> <span class="token function">createMessage</span><span class="token punctuation">(</span>
    <span class="token keyword">long</span> msgId<span class="token punctuation">,</span>
    <span class="token keyword">long</span> from<span class="token punctuation">,</span>
    <span class="token keyword">long</span> <span class="token keyword">to</span><span class="token punctuation">,</span>
    <span class="token class-name">BMXMessage<span class="token punctuation">.</span>MessageType</span> type<span class="token punctuation">,</span>
    <span class="token keyword">long</span> conversationId<span class="token punctuation">,</span>
    <span class="token class-name">String</span> content<span class="token punctuation">,</span>
    <span class="token keyword">long</span> serverTimestamp
<span class="token punctuation">)</span>
</code></pre>
<p>Create a received message </p>
<p><strong>Parameters</strong>: </p>
<ul>
<li><strong>msgId</strong> Message id </li>
<li><strong>from</strong> Message sender </li>
<li><strong>to</strong> Message receiver </li>
<li><strong>type</strong> Message type </li>
<li><strong>conversationId</strong> Conversation id </li>
<li><strong>content</strong> Message content </li>
<li><strong>serverTimestamp</strong> Server timestamp </li>
</ul>
<p><strong>Example</strong>:</p>
<p><pre class="language-"><code class="lang-java"><span class="token keyword">public</span> <span class="token class-name">BMXMessage</span> <span class="token function">sendInputStatusMessage</span><span class="token punctuation">(</span><span class="token class-name">BMXMessage<span class="token punctuation">.</span>MessageType</span> type<span class="token punctuation">,</span> <span class="token keyword">long</span> from<span class="token punctuation">,</span> <span class="token keyword">long</span> <span class="token keyword">to</span><span class="token punctuation">,</span>
        <span class="token class-name">String</span> extension<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">BMXMessage</span> msg <span class="token operator">=</span> <span class="token class-name">BMXMessage</span><span class="token punctuation">.</span><span class="token function">createMessage</span><span class="token punctuation">(</span>from<span class="token punctuation">,</span> <span class="token keyword">to</span><span class="token punctuation">,</span> type<span class="token punctuation">,</span> <span class="token keyword">to</span><span class="token punctuation">,</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>msg <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    msg<span class="token punctuation">.</span><span class="token function">setDeliveryQos</span><span class="token punctuation">(</span><span class="token class-name">BMXMessage<span class="token punctuation">.</span>DeliveryQos<span class="token punctuation">.</span>AtMostOnce</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    msg<span class="token punctuation">.</span><span class="token function">setExtension</span><span class="token punctuation">(</span>extension<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token function">handlerMessage</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><div class="lanying-code-snippet-caption"><a title="Show Full Source of app/src/main/java/top/maxim/im/sdk/utils/MessageSendUtils.java" href="https://github.com/maxim-top/lanying-im-android/blob/901cdc7846e8960d9ca5297b7ac8dd99f93f9c0a/app/src/main/java/top/maxim/im/sdk/utils/MessageSendUtils.java#L32" target="_blank">Github Source: app/src/main/java/top/maxim/im/sdk/utils/MessageSendUtils.java (line 32)</a></div><pre class="language-"><code class="lang-java"><span class="token keyword">public</span> <span class="token class-name">BMXMessage</span> <span class="token function">sendTextMessage</span><span class="token punctuation">(</span><span class="token class-name">Context</span> context<span class="token punctuation">,</span> <span class="token class-name">BMXMessage<span class="token punctuation">.</span>MessageType</span> type<span class="token punctuation">,</span> <span class="token keyword">long</span> from<span class="token punctuation">,</span> <span class="token keyword">long</span> <span class="token keyword">to</span><span class="token punctuation">,</span> <span class="token class-name">String</span> text<span class="token punctuation">,</span>
                                  <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> atMap<span class="token punctuation">,</span> <span class="token class-name">String</span> senderName<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">BMXMessage</span> msg <span class="token operator">=</span> <span class="token class-name">BMXMessage</span><span class="token punctuation">.</span><span class="token function">createMessage</span><span class="token punctuation">(</span>from<span class="token punctuation">,</span> <span class="token keyword">to</span><span class="token punctuation">,</span> type<span class="token punctuation">,</span> <span class="token keyword">to</span><span class="token punctuation">,</span> text<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>msg <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// &#x6587;&#x672C;&#x529F;&#x80FD;&#x6DFB;&#x52A0;@&#x5BF9;&#x8C61;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>atMap <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>atMap<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">BMXMessageConfig</span> config <span class="token operator">=</span> <span class="token class-name">BMXMessageConfig</span><span class="token punctuation">.</span><span class="token function">createMessageConfig</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        config<span class="token punctuation">.</span><span class="token function">setSenderNickname</span><span class="token punctuation">(</span>senderName<span class="token punctuation">)</span><span class="token punctuation">;</span>
        config<span class="token punctuation">.</span><span class="token function">setPushMessage</span><span class="token punctuation">(</span><span class="token class-name">ChatUtils</span><span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getMessageDesc</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> msg<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// @&#x5BF9;&#x8C61;&#x7684;&#x5B58;&#x50A8;&#x4FE1;&#x606F; &#x5305;&#x62EC;&#x5168;&#x90E8;&#x6210;&#x5458;&#x6216;&#x8005;&#x90E8;&#x5206;&#x6210;&#x5458;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>atMap<span class="token punctuation">.</span><span class="token function">containsKey</span><span class="token punctuation">(</span><span class="token string">&quot;-1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// @&#x5168;&#x90E8;</span>
            <span class="token class-name">String</span> atTitle <span class="token operator">=</span> atMap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;-1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token class-name">TextUtils</span><span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span>atTitle<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> text<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span>atTitle<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token comment">// &#x5982;&#x679C;&#x5305;&#x542B;&#x5168;&#x90E8;&#x76F4;&#x63A5;&#x8D70;&#x5168;&#x90E8; &#x8FD8;&#x9700;&#x8981;&#x5224;&#x65AD;&#x6587;&#x672C;&#x6D88;&#x606F;&#x662F;&#x5426;&#x5305;&#x542B;&#x5B8C;&#x6210;&#x7684;@&#x540D;&#x79F0; &#x5982;&#x679C;&#x6CA1;&#x6709;&#x5C31;&#x4E0D;&#x89E6;&#x53D1;@</span>
                config<span class="token punctuation">.</span><span class="token function">setMentionAll</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></code></pre><div class="lanying-code-snippet-caption"><a title="Show Full Source of app/src/main/java/top/maxim/im/sdk/utils/MessageSendUtils.java" href="https://github.com/maxim-top/lanying-im-android/blob/901cdc7846e8960d9ca5297b7ac8dd99f93f9c0a/app/src/main/java/top/maxim/im/sdk/utils/MessageSendUtils.java#L117" target="_blank">Github Source: app/src/main/java/top/maxim/im/sdk/utils/MessageSendUtils.java (line 117)</a></div><pre class="language-"><code class="lang-java"><span class="token keyword">public</span> <span class="token class-name">BMXMessage</span> <span class="token function">sendImageMessage</span><span class="token punctuation">(</span><span class="token class-name">BMXMessage<span class="token punctuation">.</span>MessageType</span> type<span class="token punctuation">,</span> <span class="token keyword">long</span> from<span class="token punctuation">,</span> <span class="token keyword">long</span> <span class="token keyword">to</span><span class="token punctuation">,</span> <span class="token class-name">String</span> path<span class="token punctuation">,</span>
        <span class="token keyword">int</span> w<span class="token punctuation">,</span> <span class="token keyword">int</span> h<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">BMXImageAttachment<span class="token punctuation">.</span>Size</span> size <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BMXMessageAttachment<span class="token punctuation">.</span>Size</span><span class="token punctuation">(</span>w<span class="token punctuation">,</span> h<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">BMXImageAttachment</span> imageAttachment <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BMXImageAttachment</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> size<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">BMXMessage</span> msg <span class="token operator">=</span> <span class="token class-name">BMXMessage</span><span class="token punctuation">.</span><span class="token function">createMessage</span><span class="token punctuation">(</span>from<span class="token punctuation">,</span> <span class="token keyword">to</span><span class="token punctuation">,</span> type<span class="token punctuation">,</span> <span class="token keyword">to</span><span class="token punctuation">,</span> imageAttachment<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token function">handlerMessage</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><div class="lanying-code-snippet-caption"><a title="Show Full Source of app/src/main/java/top/maxim/im/sdk/utils/MessageSendUtils.java" href="https://github.com/maxim-top/lanying-im-android/blob/901cdc7846e8960d9ca5297b7ac8dd99f93f9c0a/app/src/main/java/top/maxim/im/sdk/utils/MessageSendUtils.java#L167" target="_blank">Github Source: app/src/main/java/top/maxim/im/sdk/utils/MessageSendUtils.java (line 167)</a></div><pre class="language-"><code class="lang-java"><span class="token keyword">public</span> <span class="token class-name">BMXMessage</span> <span class="token function">sendAudioMessage</span><span class="token punctuation">(</span><span class="token class-name">BMXMessage<span class="token punctuation">.</span>MessageType</span> type<span class="token punctuation">,</span> <span class="token keyword">long</span> from<span class="token punctuation">,</span> <span class="token keyword">long</span> <span class="token keyword">to</span><span class="token punctuation">,</span> <span class="token class-name">String</span> path<span class="token punctuation">,</span>
        <span class="token keyword">int</span> time<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">BMXVoiceAttachment</span> voiceAttachment <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BMXVoiceAttachment</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> time<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">BMXMessage</span> msg <span class="token operator">=</span> <span class="token class-name">BMXMessage</span><span class="token punctuation">.</span><span class="token function">createMessage</span><span class="token punctuation">(</span>from<span class="token punctuation">,</span> <span class="token keyword">to</span><span class="token punctuation">,</span> type<span class="token punctuation">,</span> <span class="token keyword">to</span><span class="token punctuation">,</span> voiceAttachment<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token function">handlerMessage</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><div class="lanying-code-snippet-caption"><a title="Show Full Source of app/src/main/java/top/maxim/im/sdk/utils/MessageSendUtils.java" href="https://github.com/maxim-top/lanying-im-android/blob/901cdc7846e8960d9ca5297b7ac8dd99f93f9c0a/app/src/main/java/top/maxim/im/sdk/utils/MessageSendUtils.java#L183" target="_blank">Github Source: app/src/main/java/top/maxim/im/sdk/utils/MessageSendUtils.java (line 183)</a></div><pre class="language-"><code class="lang-java"><span class="token keyword">public</span> <span class="token class-name">BMXMessage</span> <span class="token function">sendVideoMessage</span><span class="token punctuation">(</span><span class="token class-name">BMXMessage<span class="token punctuation">.</span>MessageType</span> type<span class="token punctuation">,</span> <span class="token keyword">long</span> from<span class="token punctuation">,</span> <span class="token keyword">long</span> <span class="token keyword">to</span><span class="token punctuation">,</span> <span class="token class-name">String</span> path<span class="token punctuation">,</span>
        <span class="token keyword">int</span> time<span class="token punctuation">,</span> <span class="token keyword">int</span> w<span class="token punctuation">,</span> <span class="token keyword">int</span> h<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">BMXVideoAttachment<span class="token punctuation">.</span>Size</span> size <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BMXVideoAttachment<span class="token punctuation">.</span>Size</span><span class="token punctuation">(</span>w<span class="token punctuation">,</span> h<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">BMXVideoAttachment</span> videoAttachment <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BMXVideoAttachment</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> time<span class="token punctuation">,</span> size<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">BMXMessage</span> msg <span class="token operator">=</span> <span class="token class-name">BMXMessage</span><span class="token punctuation">.</span><span class="token function">createMessage</span><span class="token punctuation">(</span>from<span class="token punctuation">,</span> <span class="token keyword">to</span><span class="token punctuation">,</span> type<span class="token punctuation">,</span> <span class="token keyword">to</span><span class="token punctuation">,</span> videoAttachment<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token function">handlerMessage</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><div class="lanying-code-snippet-caption"><a title="Show Full Source of app/src/main/java/top/maxim/im/sdk/utils/MessageSendUtils.java" href="https://github.com/maxim-top/lanying-im-android/blob/901cdc7846e8960d9ca5297b7ac8dd99f93f9c0a/app/src/main/java/top/maxim/im/sdk/utils/MessageSendUtils.java#L200" target="_blank">Github Source: app/src/main/java/top/maxim/im/sdk/utils/MessageSendUtils.java (line 200)</a></div><pre class="language-"><code class="lang-java"><span class="token keyword">public</span> <span class="token class-name">BMXMessage</span> <span class="token function">sendFileMessage</span><span class="token punctuation">(</span><span class="token class-name">BMXMessage<span class="token punctuation">.</span>MessageType</span> type<span class="token punctuation">,</span> <span class="token keyword">long</span> from<span class="token punctuation">,</span> <span class="token keyword">long</span> <span class="token keyword">to</span><span class="token punctuation">,</span> <span class="token class-name">String</span> path<span class="token punctuation">,</span>
        <span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">BMXFileAttachment</span> fileAttachment <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BMXFileAttachment</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">BMXMessage</span> msg <span class="token operator">=</span> <span class="token class-name">BMXMessage</span><span class="token punctuation">.</span><span class="token function">createMessage</span><span class="token punctuation">(</span>from<span class="token punctuation">,</span> <span class="token keyword">to</span><span class="token punctuation">,</span> type<span class="token punctuation">,</span> <span class="token keyword">to</span><span class="token punctuation">,</span> fileAttachment<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token function">handlerMessage</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><div class="lanying-code-snippet-caption"><a title="Show Full Source of app/src/main/java/top/maxim/im/sdk/utils/MessageSendUtils.java" href="https://github.com/maxim-top/lanying-im-android/blob/901cdc7846e8960d9ca5297b7ac8dd99f93f9c0a/app/src/main/java/top/maxim/im/sdk/utils/MessageSendUtils.java#L217" target="_blank">Github Source: app/src/main/java/top/maxim/im/sdk/utils/MessageSendUtils.java (line 217)</a></div><pre class="language-"><code class="lang-java"><span class="token keyword">public</span> <span class="token class-name">BMXMessage</span> <span class="token function">sendLocationMessage</span><span class="token punctuation">(</span><span class="token class-name">BMXMessage<span class="token punctuation">.</span>MessageType</span> type<span class="token punctuation">,</span> <span class="token keyword">long</span> from<span class="token punctuation">,</span> <span class="token keyword">long</span> <span class="token keyword">to</span><span class="token punctuation">,</span>
        <span class="token keyword">double</span> latitude<span class="token punctuation">,</span> <span class="token keyword">double</span> longitude<span class="token punctuation">,</span> <span class="token class-name">String</span> address<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">BMXLocationAttachment</span> locationAttachment <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BMXLocationAttachment</span><span class="token punctuation">(</span>latitude<span class="token punctuation">,</span> longitude<span class="token punctuation">,</span>
            address<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">BMXMessage</span> msg <span class="token operator">=</span> <span class="token class-name">BMXMessage</span><span class="token punctuation">.</span><span class="token function">createMessage</span><span class="token punctuation">(</span>from<span class="token punctuation">,</span> <span class="token keyword">to</span><span class="token punctuation">,</span> type<span class="token punctuation">,</span> <span class="token keyword">to</span><span class="token punctuation">,</span> locationAttachment<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token function">handlerMessage</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><div class="lanying-code-snippet-caption"><a title="Show Full Source of app/src/main/java/top/maxim/im/sdk/utils/MessageSendUtils.java" href="https://github.com/maxim-top/lanying-im-android/blob/901cdc7846e8960d9ca5297b7ac8dd99f93f9c0a/app/src/main/java/top/maxim/im/sdk/utils/MessageSendUtils.java#L236" target="_blank">Github Source: app/src/main/java/top/maxim/im/sdk/utils/MessageSendUtils.java (line 236)</a></div><pre class="language-"><code class="lang-java"><span class="token keyword">public</span> <span class="token class-name">BMXMessage</span> <span class="token function">forwardMessage</span><span class="token punctuation">(</span><span class="token class-name">MessageBean</span> messageBean<span class="token punctuation">,</span> <span class="token class-name">BMXMessage<span class="token punctuation">.</span>MessageType</span> type<span class="token punctuation">,</span>
        <span class="token keyword">long</span> from<span class="token punctuation">,</span> <span class="token keyword">long</span> <span class="token keyword">to</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>messageBean <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token class-name">BMXMessage<span class="token punctuation">.</span>ContentType</span> contentType <span class="token operator">=</span> messageBean<span class="token punctuation">.</span><span class="token function">getContentType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">BMXMessage</span> message <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>contentType <span class="token operator">==</span> <span class="token class-name">BMXMessage<span class="token punctuation">.</span>ContentType<span class="token punctuation">.</span>Text</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        message <span class="token operator">=</span> <span class="token class-name">BMXMessage</span><span class="token punctuation">.</span><span class="token function">createMessage</span><span class="token punctuation">(</span>from<span class="token punctuation">,</span> <span class="token keyword">to</span><span class="token punctuation">,</span> type<span class="token punctuation">,</span> <span class="token keyword">to</span><span class="token punctuation">,</span> messageBean<span class="token punctuation">.</span><span class="token function">getContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>contentType <span class="token operator">==</span> <span class="token class-name">BMXMessage<span class="token punctuation">.</span>ContentType<span class="token punctuation">.</span>Image</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// &#x56FE;&#x7247;</span>
        <span class="token class-name">BMXImageAttachment<span class="token punctuation">.</span>Size</span> size <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BMXMessageAttachment<span class="token punctuation">.</span>Size</span><span class="token punctuation">(</span>messageBean<span class="token punctuation">.</span><span class="token function">getW</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                messageBean<span class="token punctuation">.</span><span class="token function">getH</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">BMXImageAttachment</span> imageAttachment <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BMXImageAttachment</span><span class="token punctuation">(</span>messageBean<span class="token punctuation">.</span><span class="token function">getPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                size<span class="token punctuation">)</span><span class="token punctuation">;</span>
        message <span class="token operator">=</span> <span class="token class-name">BMXMessage</span><span class="token punctuation">.</span><span class="token function">createMessage</span><span class="token punctuation">(</span>from<span class="token punctuation">,</span> <span class="token keyword">to</span><span class="token punctuation">,</span> type<span class="token punctuation">,</span> <span class="token keyword">to</span><span class="token punctuation">,</span> imageAttachment<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>contentType <span class="token operator">==</span> <span class="token class-name">BMXMessage<span class="token punctuation">.</span>ContentType<span class="token punctuation">.</span>Voice</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// &#x8BED;&#x97F3;</span>
        <span class="token class-name">BMXVoiceAttachment</span> voiceAttachment <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BMXVoiceAttachment</span><span class="token punctuation">(</span>messageBean<span class="token punctuation">.</span><span class="token function">getPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                messageBean<span class="token punctuation">.</span><span class="token function">getDuration</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><div class="lanying-code-snippet-caption"><a title="Show Full Source of app/src/main/java/top/maxim/im/sdk/utils/MessageSendUtils.java" href="https://github.com/maxim-top/lanying-im-android/blob/901cdc7846e8960d9ca5297b7ac8dd99f93f9c0a/app/src/main/java/top/maxim/im/sdk/utils/MessageSendUtils.java#L267" target="_blank">Github Source: app/src/main/java/top/maxim/im/sdk/utils/MessageSendUtils.java (line 267)</a></div></p>
<h3 id="function-createmessage">function createMessage</h3>
<pre class="language-"><code class="lang-java"><span class="token keyword">static</span> inline <span class="token class-name">BMXMessage</span> <span class="token function">createMessage</span><span class="token punctuation">(</span>
    <span class="token keyword">long</span> msgId<span class="token punctuation">,</span>
    <span class="token keyword">long</span> from<span class="token punctuation">,</span>
    <span class="token keyword">long</span> <span class="token keyword">to</span><span class="token punctuation">,</span>
    <span class="token class-name">BMXMessage<span class="token punctuation">.</span>MessageType</span> type<span class="token punctuation">,</span>
    <span class="token keyword">long</span> conversationId<span class="token punctuation">,</span>
    <span class="token class-name">BMXMessageAttachment</span> attachment<span class="token punctuation">,</span>
    <span class="token keyword">long</span> serverTimestamp
<span class="token punctuation">)</span>
</code></pre>
<p>Create a received message </p>
<p><strong>Parameters</strong>: </p>
<ul>
<li><strong>msgId</strong> Message id </li>
<li><strong>from</strong> Message sender </li>
<li><strong>to</strong> Message receiver </li>
<li><strong>type</strong> Message type </li>
<li><strong>conversationId</strong> Conversation id </li>
<li><strong>attachment</strong> Attachment </li>
<li><strong>serverTimestamp</strong> Server timestamp </li>
</ul>
<p><strong>Example</strong>:</p>
<p><pre class="language-"><code class="lang-java"><span class="token keyword">public</span> <span class="token class-name">BMXMessage</span> <span class="token function">sendInputStatusMessage</span><span class="token punctuation">(</span><span class="token class-name">BMXMessage<span class="token punctuation">.</span>MessageType</span> type<span class="token punctuation">,</span> <span class="token keyword">long</span> from<span class="token punctuation">,</span> <span class="token keyword">long</span> <span class="token keyword">to</span><span class="token punctuation">,</span>
        <span class="token class-name">String</span> extension<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">BMXMessage</span> msg <span class="token operator">=</span> <span class="token class-name">BMXMessage</span><span class="token punctuation">.</span><span class="token function">createMessage</span><span class="token punctuation">(</span>from<span class="token punctuation">,</span> <span class="token keyword">to</span><span class="token punctuation">,</span> type<span class="token punctuation">,</span> <span class="token keyword">to</span><span class="token punctuation">,</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>msg <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    msg<span class="token punctuation">.</span><span class="token function">setDeliveryQos</span><span class="token punctuation">(</span><span class="token class-name">BMXMessage<span class="token punctuation">.</span>DeliveryQos<span class="token punctuation">.</span>AtMostOnce</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    msg<span class="token punctuation">.</span><span class="token function">setExtension</span><span class="token punctuation">(</span>extension<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token function">handlerMessage</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><div class="lanying-code-snippet-caption"><a title="Show Full Source of app/src/main/java/top/maxim/im/sdk/utils/MessageSendUtils.java" href="https://github.com/maxim-top/lanying-im-android/blob/901cdc7846e8960d9ca5297b7ac8dd99f93f9c0a/app/src/main/java/top/maxim/im/sdk/utils/MessageSendUtils.java#L32" target="_blank">Github Source: app/src/main/java/top/maxim/im/sdk/utils/MessageSendUtils.java (line 32)</a></div><pre class="language-"><code class="lang-java"><span class="token keyword">public</span> <span class="token class-name">BMXMessage</span> <span class="token function">sendTextMessage</span><span class="token punctuation">(</span><span class="token class-name">Context</span> context<span class="token punctuation">,</span> <span class="token class-name">BMXMessage<span class="token punctuation">.</span>MessageType</span> type<span class="token punctuation">,</span> <span class="token keyword">long</span> from<span class="token punctuation">,</span> <span class="token keyword">long</span> <span class="token keyword">to</span><span class="token punctuation">,</span> <span class="token class-name">String</span> text<span class="token punctuation">,</span>
                                  <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> atMap<span class="token punctuation">,</span> <span class="token class-name">String</span> senderName<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">BMXMessage</span> msg <span class="token operator">=</span> <span class="token class-name">BMXMessage</span><span class="token punctuation">.</span><span class="token function">createMessage</span><span class="token punctuation">(</span>from<span class="token punctuation">,</span> <span class="token keyword">to</span><span class="token punctuation">,</span> type<span class="token punctuation">,</span> <span class="token keyword">to</span><span class="token punctuation">,</span> text<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>msg <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// &#x6587;&#x672C;&#x529F;&#x80FD;&#x6DFB;&#x52A0;@&#x5BF9;&#x8C61;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>atMap <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>atMap<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">BMXMessageConfig</span> config <span class="token operator">=</span> <span class="token class-name">BMXMessageConfig</span><span class="token punctuation">.</span><span class="token function">createMessageConfig</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        config<span class="token punctuation">.</span><span class="token function">setSenderNickname</span><span class="token punctuation">(</span>senderName<span class="token punctuation">)</span><span class="token punctuation">;</span>
        config<span class="token punctuation">.</span><span class="token function">setPushMessage</span><span class="token punctuation">(</span><span class="token class-name">ChatUtils</span><span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getMessageDesc</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> msg<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// @&#x5BF9;&#x8C61;&#x7684;&#x5B58;&#x50A8;&#x4FE1;&#x606F; &#x5305;&#x62EC;&#x5168;&#x90E8;&#x6210;&#x5458;&#x6216;&#x8005;&#x90E8;&#x5206;&#x6210;&#x5458;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>atMap<span class="token punctuation">.</span><span class="token function">containsKey</span><span class="token punctuation">(</span><span class="token string">&quot;-1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// @&#x5168;&#x90E8;</span>
            <span class="token class-name">String</span> atTitle <span class="token operator">=</span> atMap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;-1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token class-name">TextUtils</span><span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span>atTitle<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> text<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span>atTitle<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token comment">// &#x5982;&#x679C;&#x5305;&#x542B;&#x5168;&#x90E8;&#x76F4;&#x63A5;&#x8D70;&#x5168;&#x90E8; &#x8FD8;&#x9700;&#x8981;&#x5224;&#x65AD;&#x6587;&#x672C;&#x6D88;&#x606F;&#x662F;&#x5426;&#x5305;&#x542B;&#x5B8C;&#x6210;&#x7684;@&#x540D;&#x79F0; &#x5982;&#x679C;&#x6CA1;&#x6709;&#x5C31;&#x4E0D;&#x89E6;&#x53D1;@</span>
                config<span class="token punctuation">.</span><span class="token function">setMentionAll</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></code></pre><div class="lanying-code-snippet-caption"><a title="Show Full Source of app/src/main/java/top/maxim/im/sdk/utils/MessageSendUtils.java" href="https://github.com/maxim-top/lanying-im-android/blob/901cdc7846e8960d9ca5297b7ac8dd99f93f9c0a/app/src/main/java/top/maxim/im/sdk/utils/MessageSendUtils.java#L117" target="_blank">Github Source: app/src/main/java/top/maxim/im/sdk/utils/MessageSendUtils.java (line 117)</a></div><pre class="language-"><code class="lang-java"><span class="token keyword">public</span> <span class="token class-name">BMXMessage</span> <span class="token function">sendImageMessage</span><span class="token punctuation">(</span><span class="token class-name">BMXMessage<span class="token punctuation">.</span>MessageType</span> type<span class="token punctuation">,</span> <span class="token keyword">long</span> from<span class="token punctuation">,</span> <span class="token keyword">long</span> <span class="token keyword">to</span><span class="token punctuation">,</span> <span class="token class-name">String</span> path<span class="token punctuation">,</span>
        <span class="token keyword">int</span> w<span class="token punctuation">,</span> <span class="token keyword">int</span> h<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">BMXImageAttachment<span class="token punctuation">.</span>Size</span> size <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BMXMessageAttachment<span class="token punctuation">.</span>Size</span><span class="token punctuation">(</span>w<span class="token punctuation">,</span> h<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">BMXImageAttachment</span> imageAttachment <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BMXImageAttachment</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> size<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">BMXMessage</span> msg <span class="token operator">=</span> <span class="token class-name">BMXMessage</span><span class="token punctuation">.</span><span class="token function">createMessage</span><span class="token punctuation">(</span>from<span class="token punctuation">,</span> <span class="token keyword">to</span><span class="token punctuation">,</span> type<span class="token punctuation">,</span> <span class="token keyword">to</span><span class="token punctuation">,</span> imageAttachment<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token function">handlerMessage</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><div class="lanying-code-snippet-caption"><a title="Show Full Source of app/src/main/java/top/maxim/im/sdk/utils/MessageSendUtils.java" href="https://github.com/maxim-top/lanying-im-android/blob/901cdc7846e8960d9ca5297b7ac8dd99f93f9c0a/app/src/main/java/top/maxim/im/sdk/utils/MessageSendUtils.java#L167" target="_blank">Github Source: app/src/main/java/top/maxim/im/sdk/utils/MessageSendUtils.java (line 167)</a></div><pre class="language-"><code class="lang-java"><span class="token keyword">public</span> <span class="token class-name">BMXMessage</span> <span class="token function">sendAudioMessage</span><span class="token punctuation">(</span><span class="token class-name">BMXMessage<span class="token punctuation">.</span>MessageType</span> type<span class="token punctuation">,</span> <span class="token keyword">long</span> from<span class="token punctuation">,</span> <span class="token keyword">long</span> <span class="token keyword">to</span><span class="token punctuation">,</span> <span class="token class-name">String</span> path<span class="token punctuation">,</span>
        <span class="token keyword">int</span> time<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">BMXVoiceAttachment</span> voiceAttachment <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BMXVoiceAttachment</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> time<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">BMXMessage</span> msg <span class="token operator">=</span> <span class="token class-name">BMXMessage</span><span class="token punctuation">.</span><span class="token function">createMessage</span><span class="token punctuation">(</span>from<span class="token punctuation">,</span> <span class="token keyword">to</span><span class="token punctuation">,</span> type<span class="token punctuation">,</span> <span class="token keyword">to</span><span class="token punctuation">,</span> voiceAttachment<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token function">handlerMessage</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><div class="lanying-code-snippet-caption"><a title="Show Full Source of app/src/main/java/top/maxim/im/sdk/utils/MessageSendUtils.java" href="https://github.com/maxim-top/lanying-im-android/blob/901cdc7846e8960d9ca5297b7ac8dd99f93f9c0a/app/src/main/java/top/maxim/im/sdk/utils/MessageSendUtils.java#L183" target="_blank">Github Source: app/src/main/java/top/maxim/im/sdk/utils/MessageSendUtils.java (line 183)</a></div><pre class="language-"><code class="lang-java"><span class="token keyword">public</span> <span class="token class-name">BMXMessage</span> <span class="token function">sendVideoMessage</span><span class="token punctuation">(</span><span class="token class-name">BMXMessage<span class="token punctuation">.</span>MessageType</span> type<span class="token punctuation">,</span> <span class="token keyword">long</span> from<span class="token punctuation">,</span> <span class="token keyword">long</span> <span class="token keyword">to</span><span class="token punctuation">,</span> <span class="token class-name">String</span> path<span class="token punctuation">,</span>
        <span class="token keyword">int</span> time<span class="token punctuation">,</span> <span class="token keyword">int</span> w<span class="token punctuation">,</span> <span class="token keyword">int</span> h<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">BMXVideoAttachment<span class="token punctuation">.</span>Size</span> size <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BMXVideoAttachment<span class="token punctuation">.</span>Size</span><span class="token punctuation">(</span>w<span class="token punctuation">,</span> h<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">BMXVideoAttachment</span> videoAttachment <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BMXVideoAttachment</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> time<span class="token punctuation">,</span> size<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">BMXMessage</span> msg <span class="token operator">=</span> <span class="token class-name">BMXMessage</span><span class="token punctuation">.</span><span class="token function">createMessage</span><span class="token punctuation">(</span>from<span class="token punctuation">,</span> <span class="token keyword">to</span><span class="token punctuation">,</span> type<span class="token punctuation">,</span> <span class="token keyword">to</span><span class="token punctuation">,</span> videoAttachment<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token function">handlerMessage</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><div class="lanying-code-snippet-caption"><a title="Show Full Source of app/src/main/java/top/maxim/im/sdk/utils/MessageSendUtils.java" href="https://github.com/maxim-top/lanying-im-android/blob/901cdc7846e8960d9ca5297b7ac8dd99f93f9c0a/app/src/main/java/top/maxim/im/sdk/utils/MessageSendUtils.java#L200" target="_blank">Github Source: app/src/main/java/top/maxim/im/sdk/utils/MessageSendUtils.java (line 200)</a></div><pre class="language-"><code class="lang-java"><span class="token keyword">public</span> <span class="token class-name">BMXMessage</span> <span class="token function">sendFileMessage</span><span class="token punctuation">(</span><span class="token class-name">BMXMessage<span class="token punctuation">.</span>MessageType</span> type<span class="token punctuation">,</span> <span class="token keyword">long</span> from<span class="token punctuation">,</span> <span class="token keyword">long</span> <span class="token keyword">to</span><span class="token punctuation">,</span> <span class="token class-name">String</span> path<span class="token punctuation">,</span>
        <span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">BMXFileAttachment</span> fileAttachment <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BMXFileAttachment</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">BMXMessage</span> msg <span class="token operator">=</span> <span class="token class-name">BMXMessage</span><span class="token punctuation">.</span><span class="token function">createMessage</span><span class="token punctuation">(</span>from<span class="token punctuation">,</span> <span class="token keyword">to</span><span class="token punctuation">,</span> type<span class="token punctuation">,</span> <span class="token keyword">to</span><span class="token punctuation">,</span> fileAttachment<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token function">handlerMessage</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><div class="lanying-code-snippet-caption"><a title="Show Full Source of app/src/main/java/top/maxim/im/sdk/utils/MessageSendUtils.java" href="https://github.com/maxim-top/lanying-im-android/blob/901cdc7846e8960d9ca5297b7ac8dd99f93f9c0a/app/src/main/java/top/maxim/im/sdk/utils/MessageSendUtils.java#L217" target="_blank">Github Source: app/src/main/java/top/maxim/im/sdk/utils/MessageSendUtils.java (line 217)</a></div><pre class="language-"><code class="lang-java"><span class="token keyword">public</span> <span class="token class-name">BMXMessage</span> <span class="token function">sendLocationMessage</span><span class="token punctuation">(</span><span class="token class-name">BMXMessage<span class="token punctuation">.</span>MessageType</span> type<span class="token punctuation">,</span> <span class="token keyword">long</span> from<span class="token punctuation">,</span> <span class="token keyword">long</span> <span class="token keyword">to</span><span class="token punctuation">,</span>
        <span class="token keyword">double</span> latitude<span class="token punctuation">,</span> <span class="token keyword">double</span> longitude<span class="token punctuation">,</span> <span class="token class-name">String</span> address<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">BMXLocationAttachment</span> locationAttachment <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BMXLocationAttachment</span><span class="token punctuation">(</span>latitude<span class="token punctuation">,</span> longitude<span class="token punctuation">,</span>
            address<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">BMXMessage</span> msg <span class="token operator">=</span> <span class="token class-name">BMXMessage</span><span class="token punctuation">.</span><span class="token function">createMessage</span><span class="token punctuation">(</span>from<span class="token punctuation">,</span> <span class="token keyword">to</span><span class="token punctuation">,</span> type<span class="token punctuation">,</span> <span class="token keyword">to</span><span class="token punctuation">,</span> locationAttachment<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token function">handlerMessage</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><div class="lanying-code-snippet-caption"><a title="Show Full Source of app/src/main/java/top/maxim/im/sdk/utils/MessageSendUtils.java" href="https://github.com/maxim-top/lanying-im-android/blob/901cdc7846e8960d9ca5297b7ac8dd99f93f9c0a/app/src/main/java/top/maxim/im/sdk/utils/MessageSendUtils.java#L236" target="_blank">Github Source: app/src/main/java/top/maxim/im/sdk/utils/MessageSendUtils.java (line 236)</a></div><pre class="language-"><code class="lang-java"><span class="token keyword">public</span> <span class="token class-name">BMXMessage</span> <span class="token function">forwardMessage</span><span class="token punctuation">(</span><span class="token class-name">MessageBean</span> messageBean<span class="token punctuation">,</span> <span class="token class-name">BMXMessage<span class="token punctuation">.</span>MessageType</span> type<span class="token punctuation">,</span>
        <span class="token keyword">long</span> from<span class="token punctuation">,</span> <span class="token keyword">long</span> <span class="token keyword">to</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>messageBean <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token class-name">BMXMessage<span class="token punctuation">.</span>ContentType</span> contentType <span class="token operator">=</span> messageBean<span class="token punctuation">.</span><span class="token function">getContentType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">BMXMessage</span> message <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>contentType <span class="token operator">==</span> <span class="token class-name">BMXMessage<span class="token punctuation">.</span>ContentType<span class="token punctuation">.</span>Text</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        message <span class="token operator">=</span> <span class="token class-name">BMXMessage</span><span class="token punctuation">.</span><span class="token function">createMessage</span><span class="token punctuation">(</span>from<span class="token punctuation">,</span> <span class="token keyword">to</span><span class="token punctuation">,</span> type<span class="token punctuation">,</span> <span class="token keyword">to</span><span class="token punctuation">,</span> messageBean<span class="token punctuation">.</span><span class="token function">getContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>contentType <span class="token operator">==</span> <span class="token class-name">BMXMessage<span class="token punctuation">.</span>ContentType<span class="token punctuation">.</span>Image</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// &#x56FE;&#x7247;</span>
        <span class="token class-name">BMXImageAttachment<span class="token punctuation">.</span>Size</span> size <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BMXMessageAttachment<span class="token punctuation">.</span>Size</span><span class="token punctuation">(</span>messageBean<span class="token punctuation">.</span><span class="token function">getW</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                messageBean<span class="token punctuation">.</span><span class="token function">getH</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">BMXImageAttachment</span> imageAttachment <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BMXImageAttachment</span><span class="token punctuation">(</span>messageBean<span class="token punctuation">.</span><span class="token function">getPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                size<span class="token punctuation">)</span><span class="token punctuation">;</span>
        message <span class="token operator">=</span> <span class="token class-name">BMXMessage</span><span class="token punctuation">.</span><span class="token function">createMessage</span><span class="token punctuation">(</span>from<span class="token punctuation">,</span> <span class="token keyword">to</span><span class="token punctuation">,</span> type<span class="token punctuation">,</span> <span class="token keyword">to</span><span class="token punctuation">,</span> imageAttachment<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>contentType <span class="token operator">==</span> <span class="token class-name">BMXMessage<span class="token punctuation">.</span>ContentType<span class="token punctuation">.</span>Voice</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// &#x8BED;&#x97F3;</span>
        <span class="token class-name">BMXVoiceAttachment</span> voiceAttachment <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BMXVoiceAttachment</span><span class="token punctuation">(</span>messageBean<span class="token punctuation">.</span><span class="token function">getPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                messageBean<span class="token punctuation">.</span><span class="token function">getDuration</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><div class="lanying-code-snippet-caption"><a title="Show Full Source of app/src/main/java/top/maxim/im/sdk/utils/MessageSendUtils.java" href="https://github.com/maxim-top/lanying-im-android/blob/901cdc7846e8960d9ca5297b7ac8dd99f93f9c0a/app/src/main/java/top/maxim/im/sdk/utils/MessageSendUtils.java#L267" target="_blank">Github Source: app/src/main/java/top/maxim/im/sdk/utils/MessageSendUtils.java (line 267)</a></div></p>
<h3 id="function-createcommandmessage">function createCommandMessage</h3>
<pre class="language-"><code class="lang-java"><span class="token keyword">static</span> inline <span class="token class-name">BMXMessage</span> <span class="token function">createCommandMessage</span><span class="token punctuation">(</span>
    <span class="token keyword">long</span> msgId<span class="token punctuation">,</span>
    <span class="token keyword">long</span> from<span class="token punctuation">,</span>
    <span class="token keyword">long</span> <span class="token keyword">to</span><span class="token punctuation">,</span>
    <span class="token class-name">BMXMessage<span class="token punctuation">.</span>MessageType</span> type<span class="token punctuation">,</span>
    <span class="token keyword">long</span> conversationId<span class="token punctuation">,</span>
    <span class="token class-name">String</span> content<span class="token punctuation">,</span>
    <span class="token keyword">long</span> serverTimestamp
<span class="token punctuation">)</span>
</code></pre>
<p>Create a received command message (command message holds command information in a content field or an extension field) </p>
<p><strong>Parameters</strong>: </p>
<ul>
<li><strong>msgId</strong> Message id </li>
<li><strong>from</strong> Message sender </li>
<li><strong>to</strong> Message receiver </li>
<li><strong>type</strong> Message type </li>
<li><strong>conversationId</strong> Conversation id </li>
<li><strong>content</strong> Message content </li>
<li><strong>serverTimestamp</strong> Server timestamp </li>
</ul>
<p><strong>Example</strong>:</p>
<p><pre class="language-"><code class="lang-java"><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">sendCommandMessage</span><span class="token punctuation">(</span><span class="token class-name">BMXMessage<span class="token punctuation">.</span>MessageType</span> type<span class="token punctuation">,</span> <span class="token keyword">long</span> from<span class="token punctuation">,</span> <span class="token keyword">long</span> <span class="token keyword">to</span><span class="token punctuation">,</span>
        <span class="token class-name">String</span> content<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">handlerMessage</span><span class="token punctuation">(</span><span class="token class-name">BMXMessage</span><span class="token punctuation">.</span><span class="token function">createCommandMessage</span><span class="token punctuation">(</span>from<span class="token punctuation">,</span> <span class="token keyword">to</span><span class="token punctuation">,</span> type<span class="token punctuation">,</span> <span class="token keyword">to</span><span class="token punctuation">,</span> content<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><div class="lanying-code-snippet-caption"><a title="Show Full Source of app/src/main/java/top/maxim/im/sdk/utils/MessageSendUtils.java" href="https://github.com/maxim-top/lanying-im-android/blob/901cdc7846e8960d9ca5297b7ac8dd99f93f9c0a/app/src/main/java/top/maxim/im/sdk/utils/MessageSendUtils.java#L251" target="_blank">Github Source: app/src/main/java/top/maxim/im/sdk/utils/MessageSendUtils.java (line 251)</a></div></p>
<h3 id="function-createforwardmessage">function createForwardMessage</h3>
<pre class="language-"><code class="lang-java"><span class="token keyword">static</span> inline <span class="token class-name">BMXMessage</span> <span class="token function">createForwardMessage</span><span class="token punctuation">(</span>
    <span class="token class-name">BMXMessage</span> msg<span class="token punctuation">,</span>
    <span class="token keyword">long</span> from<span class="token punctuation">,</span>
    <span class="token keyword">long</span> <span class="token keyword">to</span><span class="token punctuation">,</span>
    <span class="token class-name">BMXMessage<span class="token punctuation">.</span>MessageType</span> type<span class="token punctuation">,</span>
    <span class="token keyword">long</span> conversationId
<span class="token punctuation">)</span>
</code></pre>
<p>Create a forwarding message </p>
<p><strong>Parameters</strong>: </p>
<ul>
<li><strong>msg</strong> Message to forward </li>
<li><strong>from</strong> Message sender </li>
<li><strong>to</strong> Message receiver </li>
<li><strong>type</strong> Message type </li>
<li><strong>conversationId</strong> Conversation id </li>
</ul>
<h2 id="protected-functions-documentation">Protected Functions Documentation</h2>
<p><strong>Example</strong>:</p>
<p></p>
<h3 id="function-bmxmessage">function BMXMessage</h3>
<pre class="language-"><code class="lang-java">inline <span class="token class-name">BMXMessage</span><span class="token punctuation">(</span>
    <span class="token keyword">long</span> cPtr<span class="token punctuation">,</span>
    <span class="token keyword">boolean</span> cMemoryOwn
<span class="token punctuation">)</span>
</code></pre>
<p><strong>Example</strong>:</p>
<p></p>
<h3 id="function-finalize">function finalize</h3>
<pre class="language-"><code class="lang-java">inline <span class="token keyword">void</span> <span class="token function">finalize</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre>
<p><strong>Example</strong>:</p>
<p></p>
<h3 id="function-getcptr">function getCPtr</h3>
<pre class="language-"><code class="lang-java"><span class="token keyword">static</span> inline <span class="token keyword">long</span> <span class="token function">getCPtr</span><span class="token punctuation">(</span>
    <span class="token class-name">BMXMessage</span> obj
<span class="token punctuation">)</span>
</code></pre>
<p><strong>Example</strong>:</p>
<p></p>
<hr>
<p>Updated on 2022-01-26 at 17:18:31 +0800 </p>
<footer class="page-footer"><span class="copyright">&#xA9; 2019-2023 MaximTop | <a href="https://lanyingim.com" style="text-decoration:none!important;" target="_blank">Homepage</a> </span><span class="footer-modification">Last modified time:
2023-08-09 14:48:15
</span></footer>
                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class="search-results-count"></span> results matching &quot;<span class="search-query"></span>&quot;</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching &quot;<span class="search-query"></span>&quot;</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="classim_1_1floo_1_1floolib_1_1_b_m_x_location_attachment.html" class="navigation navigation-prev " aria-label="Previous page: im::floo::floolib::BMXLocationAttachment">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="classim_1_1floo_1_1floolib_1_1_b_m_x_message_attachment.html" class="navigation navigation-next " aria-label="Next page: im::floo::floolib::BMXMessageAttachment">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"im::floo::floolib::BMXMessage","summary":"Message","level":"1.3.2.18","depth":3,"next":{"title":"im::floo::floolib::BMXMessageAttachment","level":"1.3.2.19","depth":3,"path":"reference/floo-android/classim_1_1floo_1_1floolib_1_1_b_m_x_message_attachment.md","ref":"reference/floo-android/classim_1_1floo_1_1floolib_1_1_b_m_x_message_attachment.md","articles":[]},"previous":{"title":"im::floo::floolib::BMXLocationAttachment","level":"1.3.2.17","depth":3,"path":"reference/floo-android/classim_1_1floo_1_1floolib_1_1_b_m_x_location_attachment.md","ref":"reference/floo-android/classim_1_1floo_1_1floolib_1_1_b_m_x_location_attachment.md","articles":[]},"dir":"ltr"},"config":{"plugins":["github-buttons@2.1.0","edit-link@^2.0.2","fontsettings@^2.0.0","-sharing","sharing-plus@^0.0.2","-highlight","prism@^2.1.0","prism-themes@^0.0.2","-lunr","-search","lanying-code-snippet@^1.1.8","search-plus@^0.0.11","advanced-emoji@^0.2.1","expandable-chapters-small@^0.1.7","tbfed-pagefooter@^0.0.1","versions-select@^0.1.1","terminal@^0.3.2","code@^0.1.0","splitter@^0.0.8","favicon@^0.0.2","image-captions@^3.1.0","auto-scroll-table@^0.0.5","logo@^0.0.2","intopic-toc@^1.1.1","meta@^0.1.12","intopic-toc@^1.1.1","meta@^0.1.12"],"root":".","styles":{"website":"assets/styles/website.css"},"pluginsConfig":{"tbfed-pagefooter":{"copyright":" 2019-2023 MaximTop | <a href='https://lanyingim.com' style='text-decoration:none!important;'>Homepage</a>","modify_label":"Last modified time:","modify_format":"YYYY-MM-DD HH:mm:ss"},"prism":{"css":["prism-themes/themes/prism-base16-ateliersulphurpool.light.css"]},"language-picker":{"grid-columns":3},"intopic-toc":{"isCollapsed":false,"isScrollspyActive":true,"label":"Contents","maxDepth":3,"mode":"nested","selector":".markdown-section h1, .markdown-section h2, .markdown-section h3","visible":true},"meta":{"content":"","data":[{"name":"keywords","content":"Lanying IM, Maximtop, IM SDK, Instant Messaging, IM Cloud, IM Cloud Service, Mobile IM, Open Source IM, Enterprise IM, Chat Software, Mobile Customer Service, Online Customer Service, IM Business Scenario, APP Social, Developer Service, Live Chatroom, Live Audio/Video, Audio/Video, Live Platform, Maximtop Anti-spam, Content Security"}],"name":""},"simple-page-toc":{"maxDepth":3,"skipFirstH1":true},"splitter":{},"lanying-code-snippet":{"showLink":true,"reindent":true,"maxLine":20,"maxSnippetCount":8,"repositories":[{"name":"lanying-im-web","url":"https://github.com/maxim-top/lanying-im-web.git","branch":"master","cacheDir":"../cache/lanying-im-web"},{"name":"lanying-im-android","url":"https://github.com/maxim-top/lanying-im-android.git","branch":"master","cacheDir":"../cache/lanying-im-android"},{"name":"lanying-im-embedded","url":"https://github.com/maxim-top/lanying-im-embedded.git","branch":"master","cacheDir":"../cache/lanying-im-embedded"},{"name":"lanying-im-ios","url":"https://github.com/maxim-top/lanying-im-ios.git","branch":"master","cacheDir":"../cache/lanying-im-ios"}]},"logo":{"logo":"/assets/lanying-logo-color-en.png","logoStyle":"width: 200px;align: left;","url":"https://www.lanyingim.com"},"sharing-plus":{"qq":false,"all":["facebook","google","twitter","instapaper","linkedin","pocket","stumbleupon"],"douban":false,"facebook":true,"weibo":false,"instapaper":false,"whatsapp":false,"hatenaBookmark":false,"twitter":true,"messenger":false,"line":false,"vk":false,"pocket":true,"google":false,"viber":false,"stumbleupon":false,"qzone":false,"linkedin":false},"auto-scroll-table":{},"code":{"copyButtons":true},"versions-select":{"type":"branches"},"github-tables":{"myConfigKey":"it's the default value"},"fontsettings":{"family":"sans","size":2,"theme":"white"},"canonical-link":{"baseURL":"https://docs.lanyingim.com"},"favicon":{"shortcut":"/assets/favicon.ico","bookmark":"/assets/favicon.ico"},"prism-themes":{},"github-buttons":{"repo":"maxim-top/im.gitbook","types":["star"],"size":"small"},"expandable-chapters-small":{},"versions":{"type":"languages","options":[{"value":"/","text":""},{"value":"/en/","text":"English"}]},"advanced-emoji":{"embedEmojis":false},"include-codeblock":{"template":"ace","unindent":true,"edit":true},"sharing":{"qq":false,"all":["facebook","google","twitter","weibo","instapaper","linkedin","pocket","stumbleupon","qq","qzone","douban","line","whatsapp"],"douban":false,"facebook":true,"weibo":true,"instapaper":false,"whatsapp":true,"hatenaBookmark":false,"twitter":true,"messenger":false,"line":true,"vk":false,"pocket":false,"google":true,"viber":false,"stumbleupon":false,"qzone":false,"linkedin":true},"terminal":{"copyButtons":true,"fade":false,"style":"flat"},"edit-link":{"label":"Edit On GitHub","base":"https://github.com/maxim-top/im.gitbook/blob/master"},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false},"search-plus":{},"image-captions":{"caption":"_CAPTION_","variable_name":"_pictures"}},"theme":"default","author":"jinhai","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{"_pictures":[{"backlink":"index.html#fig1.1.1","level":"1.1","list_caption":"Figure: Lanying IM cloud open platform architecture","alt":"Lanying IM cloud open platform architecture","nro":1,"url":"assets/1.png","index":1,"caption_template":"_CAPTION_","label":"Lanying IM cloud open platform architecture","attributes":{},"skip":false,"key":"1.1.1"},{"backlink":"index.html#fig1.1.2","level":"1.1","list_caption":"Figure: Lanying IM SDK technology stack","alt":"Lanying IM SDK technology stack","nro":2,"url":"assets/2.png","index":2,"caption_template":"_CAPTION_","label":"Lanying IM SDK technology stack","attributes":{},"skip":false,"key":"1.1.2"},{"backlink":"quick-start/how-to-deploy-private-cloud.html#fig1.2.7.1","level":"1.2.7","list_caption":"Figure: Create application","alt":"Create application","nro":3,"url":"../assets/1-1.create_app.png","index":1,"caption_template":"_CAPTION_","label":"Create application","attributes":{},"skip":false,"key":"1.2.7.1"},{"backlink":"quick-start/how-to-deploy-private-cloud.html#fig1.2.7.2","level":"1.2.7","list_caption":"Figure: Application information","alt":"Application information","nro":4,"url":"../assets/1-2.app_info.png","index":2,"caption_template":"_CAPTION_","label":"Application information","attributes":{},"skip":false,"key":"1.2.7.2"},{"backlink":"quick-start/how-to-deploy-private-cloud.html#fig1.2.7.3","level":"1.2.7","list_caption":"Figure: Enable Private Cloud Services","alt":"Enable Private Cloud Services","nro":5,"url":"../assets/1-3.select_private_plan.png","index":3,"caption_template":"_CAPTION_","label":"Enable Private Cloud Services","attributes":{},"skip":false,"key":"1.2.7.3"},{"backlink":"quick-start/how-to-deploy-private-cloud.html#fig1.2.7.4","level":"1.2.7","list_caption":"Figure: Private Cloud Deployment","alt":"Private Cloud Deployment","nro":6,"url":"../assets/1-4.deploy.png","index":4,"caption_template":"_CAPTION_","label":"Private Cloud Deployment","attributes":{},"skip":false,"key":"1.2.7.4"},{"backlink":"quick-start/how-to-deploy-private-cloud.html#fig1.2.7.5","level":"1.2.7","list_caption":"Figure: Get Private Cloud installation token","alt":"Get Private Cloud installation token","nro":7,"url":"../assets/1-5.get_install_token.png","index":5,"caption_template":"_CAPTION_","label":"Get Private Cloud installation token","attributes":{},"skip":false,"key":"1.2.7.5"},{"backlink":"quick-start/how-to-deploy-private-cloud.html#fig1.2.7.6","level":"1.2.7","list_caption":"Figure: Single server version installation: Step 1","alt":"Single server version installation: Step 1","nro":8,"url":"../assets/2-1.install_single_s1.png","index":6,"caption_template":"_CAPTION_","label":"Single server version installation: Step 1","attributes":{},"skip":false,"key":"1.2.7.6"},{"backlink":"quick-start/how-to-deploy-private-cloud.html#fig1.2.7.7","level":"1.2.7","list_caption":"Figure: Single server version installation: Step 2","alt":"Single server version installation: Step 2","nro":9,"url":"../assets/2-2.install_single_s2.png","index":7,"caption_template":"_CAPTION_","label":"Single server version installation: Step 2","attributes":{},"skip":false,"key":"1.2.7.7"},{"backlink":"quick-start/how-to-deploy-private-cloud.html#fig1.2.7.8","level":"1.2.7","list_caption":"Figure: Single server version installation: Step 3","alt":"Single server version installation: Step 3","nro":10,"url":"../assets/2-3.install_single_s3.png","index":8,"caption_template":"_CAPTION_","label":"Single server version installation: Step 3","attributes":{},"skip":false,"key":"1.2.7.8"},{"backlink":"quick-start/how-to-deploy-private-cloud.html#fig1.2.7.9","level":"1.2.7","list_caption":"Figure: Single server version installation: Step 4","alt":"Single server version installation: Step 4","nro":11,"url":"../assets/2-4.install_single_s4.png","index":9,"caption_template":"_CAPTION_","label":"Single server version installation: Step 4","attributes":{},"skip":false,"key":"1.2.7.9"},{"backlink":"quick-start/how-to-deploy-private-cloud.html#fig1.2.7.10","level":"1.2.7","list_caption":"Figure: Single server version installation: Step 5","alt":"Single server version installation: Step 5","nro":12,"url":"../assets/2-5.install_single_s5.png","index":10,"caption_template":"_CAPTION_","label":"Single server version installation: Step 5","attributes":{},"skip":false,"key":"1.2.7.10"},{"backlink":"quick-start/how-to-deploy-private-cloud.html#fig1.2.7.11","level":"1.2.7","list_caption":"Figure: Cluster permission configuration: Step 1","alt":"Cluster permission configuration: Step 1","nro":13,"url":"../assets/3-1-1.config_cluster_s1.png","index":11,"caption_template":"_CAPTION_","label":"Cluster permission configuration: Step 1","attributes":{},"skip":false,"key":"1.2.7.11"},{"backlink":"quick-start/how-to-deploy-private-cloud.html#fig1.2.7.12","level":"1.2.7","list_caption":"Figure: Cluster permission configuration: Step 2","alt":"Cluster permission configuration: Step 2","nro":14,"url":"../assets/3-1-2.config_cluster_s2.png","index":12,"caption_template":"_CAPTION_","label":"Cluster permission configuration: Step 2","attributes":{},"skip":false,"key":"1.2.7.12"},{"backlink":"quick-start/how-to-deploy-private-cloud.html#fig1.2.7.13","level":"1.2.7","list_caption":"Figure: Cluster permission configuration: Step 3","alt":"Cluster permission configuration: Step 3","nro":15,"url":"../assets/3-1-3.config_cluster_s3.png","index":13,"caption_template":"_CAPTION_","label":"Cluster permission configuration: Step 3","attributes":{},"skip":false,"key":"1.2.7.13"},{"backlink":"quick-start/how-to-deploy-private-cloud.html#fig1.2.7.14","level":"1.2.7","list_caption":"Figure: Cluster permission configuration: Step 4","alt":"Cluster permission configuration: Step 4","nro":16,"url":"../assets/3-1-4.config_cluster_s4.png","index":14,"caption_template":"_CAPTION_","label":"Cluster permission configuration: Step 4","attributes":{},"skip":false,"key":"1.2.7.14"},{"backlink":"quick-start/how-to-deploy-private-cloud.html#fig1.2.7.15","level":"1.2.7","list_caption":"Figure: Cluster permission configuration: Step 5","alt":"Cluster permission configuration: Step 5","nro":17,"url":"../assets/3-1-5.config_cluster_s5.png","index":15,"caption_template":"_CAPTION_","label":"Cluster permission configuration: Step 5","attributes":{},"skip":false,"key":"1.2.7.15"},{"backlink":"quick-start/how-to-deploy-private-cloud.html#fig1.2.7.16","level":"1.2.7","list_caption":"Figure: Cluster version installation: Step 1","alt":"Cluster version installation: Step 1","nro":18,"url":"../assets/3-2-1.install_cluster_s1.png","index":16,"caption_template":"_CAPTION_","label":"Cluster version installation: Step 1","attributes":{},"skip":false,"key":"1.2.7.16"},{"backlink":"quick-start/how-to-deploy-private-cloud.html#fig1.2.7.17","level":"1.2.7","list_caption":"Figure: Cluster version installation: Step 2","alt":"Cluster version installation: Step 2","nro":19,"url":"../assets/3-2-2.install_cluster_s2.png","index":17,"caption_template":"_CAPTION_","label":"Cluster version installation: Step 2","attributes":{},"skip":false,"key":"1.2.7.17"},{"backlink":"quick-start/how-to-deploy-private-cloud.html#fig1.2.7.18","level":"1.2.7","list_caption":"Figure: Cluster version installation: Step 3","alt":"Cluster version installation: Step 3","nro":20,"url":"../assets/3-2-3.install_cluster_s3.png","index":18,"caption_template":"_CAPTION_","label":"Cluster version installation: Step 3","attributes":{},"skip":false,"key":"1.2.7.18"},{"backlink":"quick-start/how-to-deploy-private-cloud.html#fig1.2.7.19","level":"1.2.7","list_caption":"Figure: Cluster version installation: Step 4","alt":"Cluster version installation: Step 4","nro":21,"url":"../assets/3-2-4.install_cluster_s4.png","index":19,"caption_template":"_CAPTION_","label":"Cluster version installation: Step 4","attributes":{},"skip":false,"key":"1.2.7.19"},{"backlink":"quick-start/how-to-deploy-private-cloud.html#fig1.2.7.20","level":"1.2.7","list_caption":"Figure: Cluster version installation: Step 5","alt":"Cluster version installation: Step 5","nro":22,"url":"../assets/3-2-5.install_cluster_s5.png","index":20,"caption_template":"_CAPTION_","label":"Cluster version installation: Step 5","attributes":{},"skip":false,"key":"1.2.7.20"},{"backlink":"quick-start/how-to-deploy-private-cloud.html#fig1.2.7.21","level":"1.2.7","list_caption":"Figure: Mount the offline installation package and add maxim.ctl to the executable path","alt":"Mount the offline installation package and add maxim.ctl to the executable path","nro":23,"url":"../assets/offline_mount_and_add_exec.png","index":21,"caption_template":"_CAPTION_","label":"Mount the offline installation package and add maxim.ctl to the executable path","attributes":{},"skip":false,"key":"1.2.7.21"},{"backlink":"quick-start/how-to-deploy-private-cloud.html#fig1.2.7.22","level":"1.2.7","list_caption":"Figure: generate offline configuration file","alt":"generate offline configuration file","nro":24,"url":"../assets/generate_offline_install_configration.png","index":22,"caption_template":"_CAPTION_","label":"generate offline configuration file","attributes":{},"skip":false,"key":"1.2.7.22"},{"backlink":"quick-start/how-to-deploy-private-cloud.html#fig1.2.7.23","level":"1.2.7","list_caption":"Figure: Single version (offline installation) start installation","alt":"Single version (offline installation) start installation","nro":25,"url":"../assets/single_offline_start_install.png","index":23,"caption_template":"_CAPTION_","label":"Single version (offline installation) start installation","attributes":{},"skip":false,"key":"1.2.7.23"},{"backlink":"quick-start/how-to-deploy-private-cloud.html#fig1.2.7.24","level":"1.2.7","list_caption":"Figure: Single version (offline installation) installation completed","alt":"Single version (offline installation) installation completed","nro":26,"url":"../assets/single_offline_finish_install.png","index":24,"caption_template":"_CAPTION_","label":"Single version (offline installation) installation completed","attributes":{},"skip":false,"key":"1.2.7.24"},{"backlink":"quick-start/how-to-deploy-private-cloud.html#fig1.2.7.25","level":"1.2.7","list_caption":"Figure: Generate Cluster LicenseKey","alt":"Generate Cluster LicenseKey","nro":27,"url":"../assets/single_offline_export_license_key.png","index":25,"caption_template":"_CAPTION_","label":"Generate Cluster LicenseKey","attributes":{},"skip":false,"key":"1.2.7.25"},{"backlink":"quick-start/how-to-deploy-private-cloud.html#fig1.2.7.26","level":"1.2.7","list_caption":"Figure: Click to activate the cluster on the Private Cloud page of the Console, select the cluster capacity, enter the LicenseKey, and click \"Activate the cluster\"","alt":"Click to activate the cluster on the Private Cloud page of the Console, select the cluster capacity, enter the LicenseKey, and click \"Activate the cluster\"","nro":28,"url":"../assets/single_offline_activate.png","index":26,"caption_template":"_CAPTION_","label":"Click to activate the cluster on the Private Cloud page of the Console, select the cluster capacity, enter the LicenseKey, and click \"Activate the cluster\"","attributes":{},"skip":false,"key":"1.2.7.26"},{"backlink":"quick-start/how-to-deploy-private-cloud.html#fig1.2.7.27","level":"1.2.7","list_caption":"Figure: Activate command","alt":"Activate command","nro":29,"url":"../assets/single_offline_activate_success.png","index":27,"caption_template":"_CAPTION_","label":"Activate command","attributes":{},"skip":false,"key":"1.2.7.27"},{"backlink":"quick-start/how-to-deploy-private-cloud.html#fig1.2.7.28","level":"1.2.7","list_caption":"Figure: Execute activation command in cluster","alt":"Execute activation command in cluster","nro":30,"url":"../assets/single_offline_exec_activate.png","index":28,"caption_template":"_CAPTION_","label":"Execute activation command in cluster","attributes":{},"skip":false,"key":"1.2.7.28"},{"backlink":"quick-start/how-to-deploy-private-cloud.html#fig1.2.7.29","level":"1.2.7","list_caption":"Figure: Cluster permission configuration: Step 1","alt":"Cluster permission configuration: Step 1","nro":31,"url":"../assets/3-1-1.config_cluster_s1.png","index":29,"caption_template":"_CAPTION_","label":"Cluster permission configuration: Step 1","attributes":{},"skip":false,"key":"1.2.7.29"},{"backlink":"quick-start/how-to-deploy-private-cloud.html#fig1.2.7.30","level":"1.2.7","list_caption":"Figure: Cluster permission configuration: Step 2","alt":"Cluster permission configuration: Step 2","nro":32,"url":"../assets/3-1-2.config_cluster_s2.png","index":30,"caption_template":"_CAPTION_","label":"Cluster permission configuration: Step 2","attributes":{},"skip":false,"key":"1.2.7.30"},{"backlink":"quick-start/how-to-deploy-private-cloud.html#fig1.2.7.31","level":"1.2.7","list_caption":"Figure: Cluster permission configuration: Step 3","alt":"Cluster permission configuration: Step 3","nro":33,"url":"../assets/3-1-3.config_cluster_s3.png","index":31,"caption_template":"_CAPTION_","label":"Cluster permission configuration: Step 3","attributes":{},"skip":false,"key":"1.2.7.31"},{"backlink":"quick-start/how-to-deploy-private-cloud.html#fig1.2.7.32","level":"1.2.7","list_caption":"Figure: Cluster permission configuration: Step 4","alt":"Cluster permission configuration: Step 4","nro":34,"url":"../assets/3-1-4.config_cluster_s4.png","index":32,"caption_template":"_CAPTION_","label":"Cluster permission configuration: Step 4","attributes":{},"skip":false,"key":"1.2.7.32"},{"backlink":"quick-start/how-to-deploy-private-cloud.html#fig1.2.7.33","level":"1.2.7","list_caption":"Figure: Cluster permission configuration: Step 5","alt":"Cluster permission configuration: Step 5","nro":35,"url":"../assets/3-1-5.config_cluster_s5.png","index":33,"caption_template":"_CAPTION_","label":"Cluster permission configuration: Step 5","attributes":{},"skip":false,"key":"1.2.7.33"},{"backlink":"quick-start/how-to-deploy-private-cloud.html#fig1.2.7.34","level":"1.2.7","list_caption":"Figure: Mount the offline installation package and add maxim.ctl to the executable path","alt":"Mount the offline installation package and add maxim.ctl to the executable path","nro":36,"url":"../assets/offline_mount_and_add_exec.png","index":34,"caption_template":"_CAPTION_","label":"Mount the offline installation package and add maxim.ctl to the executable path","attributes":{},"skip":false,"key":"1.2.7.34"},{"backlink":"quick-start/how-to-deploy-private-cloud.html#fig1.2.7.35","level":"1.2.7","list_caption":"Figure: generate offline configuration file","alt":"generate offline configuration file","nro":37,"url":"../assets/generate_offline_install_configration.png","index":35,"caption_template":"_CAPTION_","label":"generate offline configuration file","attributes":{},"skip":false,"key":"1.2.7.35"},{"backlink":"quick-start/how-to-deploy-private-cloud.html#fig1.2.7.36","level":"1.2.7","list_caption":"Figure: Cluster version (offline installation) start installation","alt":"Cluster version (offline installation) start installation","nro":38,"url":"../assets/multi_offline_start_install.png","index":36,"caption_template":"_CAPTION_","label":"Cluster version (offline installation) start installation","attributes":{},"skip":false,"key":"1.2.7.36"},{"backlink":"quick-start/how-to-deploy-private-cloud.html#fig1.2.7.37","level":"1.2.7","list_caption":"Figure: Cluster version (offline installation) installation completed","alt":"Cluster version (offline installation) installation completed","nro":39,"url":"../assets/multi_offline_finish_install.png","index":37,"caption_template":"_CAPTION_","label":"Cluster version (offline installation) installation completed","attributes":{},"skip":false,"key":"1.2.7.37"},{"backlink":"quick-start/how-to-deploy-private-cloud.html#fig1.2.7.38","level":"1.2.7","list_caption":"Figure: Generate Cluster LicenseKey","alt":"Generate Cluster LicenseKey","nro":40,"url":"../assets/single_offline_export_license_key.png","index":38,"caption_template":"_CAPTION_","label":"Generate Cluster LicenseKey","attributes":{},"skip":false,"key":"1.2.7.38"},{"backlink":"quick-start/how-to-deploy-private-cloud.html#fig1.2.7.39","level":"1.2.7","list_caption":"Figure: Click to activate the cluster on the private cloud page of the console, select the cluster capacity, enter the LicenseKey, and click \"Activate the cluster\"","alt":"Click to activate the cluster on the private cloud page of the console, select the cluster capacity, enter the LicenseKey, and click \"Activate the cluster\"","nro":41,"url":"../assets/single_offline_activate.png","index":39,"caption_template":"_CAPTION_","label":"Click to activate the cluster on the private cloud page of the console, select the cluster capacity, enter the LicenseKey, and click \"Activate the cluster\"","attributes":{},"skip":false,"key":"1.2.7.39"},{"backlink":"quick-start/how-to-deploy-private-cloud.html#fig1.2.7.40","level":"1.2.7","list_caption":"Figure: Activate command","alt":"Activate command","nro":42,"url":"../assets/single_offline_activate_success.png","index":40,"caption_template":"_CAPTION_","label":"Activate command","attributes":{},"skip":false,"key":"1.2.7.40"},{"backlink":"quick-start/how-to-deploy-private-cloud.html#fig1.2.7.41","level":"1.2.7","list_caption":"Figure: Execute activation command in cluster","alt":"Execute activation command in cluster","nro":43,"url":"../assets/single_offline_exec_activate.png","index":41,"caption_template":"_CAPTION_","label":"Execute activation command in cluster","attributes":{},"skip":false,"key":"1.2.7.41"},{"backlink":"quick-start/how-to-deploy-private-cloud.html#fig1.2.7.42","level":"1.2.7","list_caption":"Figure: Click Private Cloud to view the installation progress through the progress of node information","alt":"Click Private Cloud to view the installation progress through the progress of node information","nro":44,"url":"../assets/4-1.install_progress.png","index":42,"caption_template":"_CAPTION_","label":"Click Private Cloud to view the installation progress through the progress of node information","attributes":{},"skip":false,"key":"1.2.7.42"},{"backlink":"quick-start/how-to-deploy-private-cloud.html#fig1.2.7.43","level":"1.2.7","list_caption":"Figure: If all checks are normal, means the service is normal","alt":"If all checks are normal, means the service is normal","nro":45,"url":"../assets/4-2.service_status.png","index":43,"caption_template":"_CAPTION_","label":"If all checks are normal, means the service is normal","attributes":{},"skip":false,"key":"1.2.7.43"}]},"title":"LANYING.IM - Professional SDK, Monthly Charged Private Cloud","language":"en","output.name":"site","gitbook":"3.2.3","description":"API"},"file":{"path":"reference/floo-android/classim_1_1floo_1_1floolib_1_1_b_m_x_message.md","mtime":"2023-08-09T06:48:15.090Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"0000-00-00T00:00:00.000Z"},"basePath":"../..","book":{"language":"en"}});
        });
    </script>
</div>

        
    <script src="../../../gitbook/gitbook.js"></script>
    <script src="../../../gitbook/theme.js"></script>
    
        
        <script src="../../../gitbook/gitbook-plugin-github-buttons/plugin.js"></script>
        
    
        
        <script src="../../../gitbook/gitbook-plugin-edit-link/plugin.js"></script>
        
    
        
        <script src="../../../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    
        
        <script src="../../../gitbook/gitbook-plugin-sharing-plus/buttons.js"></script>
        
    
        
        <script src="../../../gitbook/gitbook-plugin-search-plus/jquery.mark.min.js"></script>
        
    
        
        <script src="../../../gitbook/gitbook-plugin-search-plus/search.js"></script>
        
    
        
        <script src="../../../gitbook/gitbook-plugin-expandable-chapters-small/expandable-chapters-small.js"></script>
        
    
        
        <script src="../../../gitbook/gitbook-plugin-versions-select/plugin.js"></script>
        
    
        
        <script src="../../../gitbook/gitbook-plugin-terminal/plugin.js"></script>
        
    
        
        <script src="../../../gitbook/gitbook-plugin-code/plugin.js"></script>
        
    
        
        <script src="../../../gitbook/gitbook-plugin-splitter/splitter.js"></script>
        
    
        
        <script src="../../../gitbook/gitbook-plugin-auto-scroll-table/plugin.js"></script>
        
    
        
        <script src="../../../gitbook/gitbook-plugin-intopic-toc/anchor.min.js"></script>
        
    
        
        <script src="../../../gitbook/gitbook-plugin-intopic-toc/gumshoe.polyfills.min.js"></script>
        
    
        
        <script src="../../../gitbook/gitbook-plugin-intopic-toc/plugin.js"></script>
        
    

    </body>
</html>

