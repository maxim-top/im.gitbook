# BMXChatManager Protocol Reference

  **Conforms to** NSObject  
  **Declared in** BMXChatManager.h  

## Overview

Chat manager

## Instance Methods

<a name="//api/name/ackMessage:" title="ackMessage:"></a>
### ackMessage:

Send read acknowledgement

`- (void)ackMessage:(BMXMessageObject *)*message*`

#### Discussion
Send read acknowledgement

#### Declared In
* `BMXChatManager.h`

<a name="//api/name/ackMessageDelivered:" title="ackMessageDelivered:"></a>
**Example**:
```
{% lanying_code_snippet repo="lanying-im-ios",class="BMXChatManager",function="ackMessage:" %}{% endlanying_code_snippet %}
```
### ackMessageDelivered:

Send delivery acknowledgement

`- (void)ackMessageDelivered:(BMXMessageObject *)*message*`

#### Discussion
Send delivery acknowledgement

#### Declared In
* `BMXChatManager.h`

<a name="//api/name/addChatListener:" title="addChatListener:"></a>
**Example**:
```
{% lanying_code_snippet repo="lanying-im-ios",class="BMXChatManager",function="ackMessageDelivered:" %}{% endlanying_code_snippet %}
```
### addChatListener:

Add chat listener

`- (void)addChatListener:(id<BMXChatServiceProtocol>)*listener*`

#### Discussion
Add chat listener

#### Declared In
* `BMXChatManager.h`

<a name="//api/name/addDelegate:" title="addDelegate:"></a>
**Example**:
```
{% lanying_code_snippet repo="lanying-im-ios",class="BMXChatManager",function="addChatListener:" %}{% endlanying_code_snippet %}
```
### addDelegate:

`- (void)addDelegate:(id<BMXChatServiceProtocol>)*aDelegate*`

<a name="//api/name/addDelegate:delegateQueue:" title="addDelegate:delegateQueue:"></a>
**Example**:
```
{% lanying_code_snippet repo="lanying-im-ios",class="BMXChatManager",function="addDelegate:" %}{% endlanying_code_snippet %}
```
### addDelegate:delegateQueue:

`- (void)addDelegate:(id<BMXChatServiceProtocol>)*aDelegate* delegateQueue:(dispatch_queue_t)*aQueue*`

<a name="//api/name/deleteConversationByConversationId:synchronize:" title="deleteConversationByConversationId:synchronize:"></a>
**Example**:
```
{% lanying_code_snippet repo="lanying-im-ios",class="BMXChatManager",function="addDelegate:delegateQueue:" %}{% endlanying_code_snippet %}
```
### deleteConversationByConversationId:synchronize:

 Delete a conversation

`- (void)deleteConversationByConversationId:(NSInteger)*conversationId* synchronize:(BOOL)*synchronize*`

#### Discussion
 Delete a conversation

#### Declared In
* `BMXChatManager.h`

<a name="//api/name/downloadAttachment:" title="downloadAttachment:"></a>
**Example**:
```
{% lanying_code_snippet repo="lanying-im-ios",class="BMXChatManager",function="deleteConversationByConversationId:synchronize:" %}{% endlanying_code_snippet %}
```
### downloadAttachment:

Downloaded attachments, and download state changes and progress are notified via listener

`- (void)downloadAttachment:(BMXMessageObject *)*message*`

#### Discussion
Downloaded attachments, and download state changes and progress are notified via listener

#### Declared In
* `BMXChatManager.h`

<a name="//api/name/downloadThumbnail:strategy:" title="downloadThumbnail:strategy:"></a>
**Example**:
```
{% lanying_code_snippet repo="lanying-im-ios",class="BMXChatManager",function="downloadAttachment:" %}{% endlanying_code_snippet %}
```
### downloadThumbnail:strategy:

Downloaded thumbnail, state changes and progress are notified via listener
Thumbnail generation policy, 1 - generated by third-party server, 2 - Generated by local server, default 1.

`- (void)downloadThumbnail:(BMXMessageObject *)*message* strategy:(ThumbnailStrategy)*strategy*`

#### Discussion
Downloaded thumbnail, state changes and progress are notified via listener
Thumbnail generation policy, 1 - generated by third-party server, 2 - Generated by local server, default 1.

#### Declared In
* `BMXChatManager.h`

<a name="//api/name/forwardMessage:" title="forwardMessage:"></a>
**Example**:
```
{% lanying_code_snippet repo="lanying-im-ios",class="BMXChatManager",function="downloadThumbnail:strategy:" %}{% endlanying_code_snippet %}
```
### forwardMessage:

Simple forward message, user should first create the forward message via BMXMessagse::createForwardMessage()
*

`- (void)forwardMessage:(BMXMessageObject *)*message*`

#### Discussion
Simple forward message, user should first create the forward message via BMXMessagse::createForwardMessage()
*

#### Declared In
* `BMXChatManager.h`

<a name="//api/name/getAllConversationsUnreadCountWithCompletion:" title="getAllConversationsUnreadCountWithCompletion:"></a>
**Example**:
```
{% lanying_code_snippet repo="lanying-im-ios",class="BMXChatManager",function="forwardMessage:" %}{% endlanying_code_snippet %}
```
### getAllConversationsUnreadCountWithCompletion:

 Get number of unread messages for all conversations (unreads for individuals and groups marked as blocked is not counted)

`- (void)getAllConversationsUnreadCountWithCompletion:(void ( ^ ) ( int count ))*aCompletionBlock*`

#### Parameters

*aCompletionBlock*  
   count  

#### Discussion
 Get number of unread messages for all conversations (unreads for individuals and groups marked as blocked is not counted)

#### Declared In
* `BMXChatManager.h`

<a name="//api/name/getAllConversationsWithCompletion:" title="getAllConversationsWithCompletion:"></a>
**Example**:
```
{% lanying_code_snippet repo="lanying-im-ios",class="BMXChatManager",function="getAllConversationsUnreadCountWithCompletion:" %}{% endlanying_code_snippet %}
```
### getAllConversationsWithCompletion:

Get all conversations

`- (void)getAllConversationsWithCompletion:(void ( ^ ) ( NSArray *conversations ))*aCompletionBlock*`

#### Discussion
Get all conversations

#### Declared In
* `BMXChatManager.h`

<a name="//api/name/getAttachmentDir" title="getAttachmentDir"></a>
**Example**:
```
{% lanying_code_snippet repo="lanying-im-ios",class="BMXChatManager",function="getAllConversationsWithCompletion:" %}{% endlanying_code_snippet %}
```
### getAttachmentDir

Get attachment saving path

`- (NSString *)getAttachmentDir`

#### Discussion
Get attachment saving path

#### Declared In
* `BMXChatManager.h`

<a name="//api/name/getAttachmentDirForConversationWith:" title="getAttachmentDirForConversationWith:"></a>
**Example**:
```
{% lanying_code_snippet repo="lanying-im-ios",class="BMXChatManager",function="getAttachmentDir" %}{% endlanying_code_snippet %}
```
### getAttachmentDirForConversationWith:

Get attachment saving path for a conversation

`- (NSString *)getAttachmentDirForConversationWith:(NSString *)*conversationId*`

#### Discussion
Get attachment saving path for a conversation

#### Declared In
* `BMXChatManager.h`

<a name="//api/name/getGroupAckMessageUnreadUserIdListWithMessage:completion:" title="getGroupAckMessageUnreadUserIdListWithMessage:completion:"></a>
**Example**:
```
{% lanying_code_snippet repo="lanying-im-ios",class="BMXChatManager",function="getAttachmentDirForConversationWith:" %}{% endlanying_code_snippet %}
```
### getGroupAckMessageUnreadUserIdListWithMessage:completion:

Get a list of unread user ids for the sent group message

`- (void)getGroupAckMessageUnreadUserIdListWithMessage:(BMXMessageObject *)*message* completion:(void ( ^ ) ( NSArray *groupMemberIdList , BMXError *error ))*aCompletionBlock*`

#### Parameters

*message*  
   Message requiring to get list of unread user ids  

*aCompletionBlock*  
   List of unread user ids for this message, initially passed in as an empty list  

#### Discussion
Get a list of unread user ids for the sent group message

#### Declared In
* `BMXChatManager.h`

<a name="//api/name/getGroupAckMessageUserIdListWithMessage:completion:" title="getGroupAckMessageUserIdListWithMessage:completion:"></a>
**Example**:
```
{% lanying_code_snippet repo="lanying-im-ios",class="BMXChatManager",function="getGroupAckMessageUnreadUserIdListWithMessage:completion:" %}{% endlanying_code_snippet %}
```
### getGroupAckMessageUserIdListWithMessage:completion:

Get the list of user-ids that have read group messages

`- (void)getGroupAckMessageUserIdListWithMessage:(BMXMessageObject *)*message* completion:(void ( ^ ) ( NSArray *groupMemberIdList , BMXError *error ))*aCompletionBlock*`

#### Parameters

*message*  
   Message requiring to get list of read user ids  

*aCompletionBlock*  
   List of read user ids for this message, initially passed in as an empty list  

#### Discussion
Get the list of user-ids that have read group messages

#### Declared In
* `BMXChatManager.h`

<a name="//api/name/getMessage:completion:" title="getMessage:completion:"></a>
**Example**:
```
{% lanying_code_snippet repo="lanying-im-ios",class="BMXChatManager",function="getGroupAckMessageUserIdListWithMessage:completion:" %}{% endlanying_code_snippet %}
```
### getMessage:completion:

Read a message

`- (void)getMessage:(NSInteger)*messageId* completion:(void ( ^ ) ( BMXMessageObject *message , BMXError *error ))*aCompletionBlock*`

#### Discussion
Read a message

#### Declared In
* `BMXChatManager.h`

<a name="//api/name/insetMessages:completion:" title="insetMessages:completion:"></a>
**Example**:
```
{% lanying_code_snippet repo="lanying-im-ios",class="BMXChatManager",function="getMessage:completion:" %}{% endlanying_code_snippet %}
```
### insetMessages:completion:

Insert a message

`- (void)insetMessages:(NSArray<BMXMessageObject*> *)*list* completion:(void ( ^ ) ( BMXError *error ))*aCompletionBlock*`

#### Discussion
Insert a message

#### Declared In
* `BMXChatManager.h`

<a name="//api/name/openConversation:type:createIfNotExist:" title="openConversation:type:createIfNotExist:"></a>
**Example**:
```
{% lanying_code_snippet repo="lanying-im-ios",class="BMXChatManager",function="insetMessages:completion:" %}{% endlanying_code_snippet %}
```
### openConversation:type:createIfNotExist:

Launch a conversation

`- (BMXConversation *)openConversation:(NSInteger)*conversationId* type:(BMXConversationType)*type* createIfNotExist:(bool)*create*`

#### Discussion
Launch a conversation

#### Declared In
* `BMXChatManager.h`

<a name="//api/name/readAllMessage:" title="readAllMessage:"></a>
**Example**:
```
{% lanying_code_snippet repo="lanying-im-ios",class="BMXChatManager",function="openConversation:type:createIfNotExist:" %}{% endlanying_code_snippet %}
```
### readAllMessage:

Mark this message and all previous messages as read, and synchronize to all current users' devices

`- (void)readAllMessage:(BMXMessageObject *)*message*`

#### Discussion
Mark this message and all previous messages as read, and synchronize to all current users' devices

#### Declared In
* `BMXChatManager.h`

<a name="//api/name/readCancel:" title="readCancel:"></a>
**Example**:
```
{% lanying_code_snippet repo="lanying-im-ios",class="BMXChatManager",function="readAllMessage:" %}{% endlanying_code_snippet %}
```
### readCancel:

Mark this message as unread and synchronize to all devices of the current user

`- (void)readCancel:(BMXMessageObject *)*message*`

#### Discussion
Mark this message as unread and synchronize to all devices of the current user

#### Declared In
* `BMXChatManager.h`

<a name="//api/name/recallMessage:completion:" title="recallMessage:completion:"></a>
**Example**:
```
{% lanying_code_snippet repo="lanying-im-ios",class="BMXChatManager",function="readCancel:" %}{% endlanying_code_snippet %}
```
### recallMessage:completion:

Recall a message, and the message status change is notified via listener
*

`- (void)recallMessage:(BMXMessageObject *)*message* completion:(void ( ^ ) ( BMXMessageObject *message , BMXError *error ))*aCompletionBlock*`

#### Discussion
Recall a message, and the message status change is notified via listener
*

#### Declared In
* `BMXChatManager.h`

<a name="//api/name/removeChatListener:" title="removeChatListener:"></a>
**Example**:
```
{% lanying_code_snippet repo="lanying-im-ios",class="BMXChatManager",function="recallMessage:completion:" %}{% endlanying_code_snippet %}
```
### removeChatListener:

Remove chat listener

`- (void)removeChatListener:(id<BMXChatServiceProtocol>)*listener*`

#### Discussion
Remove chat listener

#### Declared In
* `BMXChatManager.h`

<a name="//api/name/removeDelegate:" title="removeDelegate:"></a>
**Example**:
```
{% lanying_code_snippet repo="lanying-im-ios",class="BMXChatManager",function="removeChatListener:" %}{% endlanying_code_snippet %}
```
### removeDelegate:

`- (void)removeDelegate:(id<BMXChatServiceProtocol>)*aDelegate*`

<a name="//api/name/removeMessage:synchronizeDeviceForce:" title="removeMessage:synchronizeDeviceForce:"></a>
**Example**:
```
{% lanying_code_snippet repo="lanying-im-ios",class="BMXChatManager",function="removeDelegate:" %}{% endlanying_code_snippet %}
```
### removeMessage:synchronizeDeviceForce:

Delete this message, which synchronizes to other devices of the current user

`- (void)removeMessage:(BMXMessageObject *)*message* synchronizeDeviceForce:(BOOL)*synchronizeDeviceForce*`

#### Discussion
Delete this message, which synchronizes to other devices of the current user

#### Declared In
* `BMXChatManager.h`

<a name="//api/name/resendMessage:completion:" title="resendMessage:completion:"></a>
**Example**:
```
{% lanying_code_snippet repo="lanying-im-ios",class="BMXChatManager",function="removeMessage:synchronizeDeviceForce:" %}{% endlanying_code_snippet %}
```
### resendMessage:completion:

Resend this message, and the message status change is notified via listener
*

`- (void)resendMessage:(BMXMessageObject *)*message* completion:(void ( ^ ) ( BMXMessageObject *message , BMXError *error ))*aCompletionBlock*`

#### Discussion
Resend this message, and the message status change is notified via listener
*

#### Declared In
* `BMXChatManager.h`

<a name="//api/name/retrieveHistoryBMXconversation:msgId:size:completion:" title="retrieveHistoryBMXconversation:msgId:size:completion:"></a>
**Example**:
```
{% lanying_code_snippet repo="lanying-im-ios",class="BMXChatManager",function="resendMessage:completion:" %}{% endlanying_code_snippet %}
```
### retrieveHistoryBMXconversation:msgId:size:completion:

Pull message history

`- (void)retrieveHistoryBMXconversation:(BMXConversation *)*conversation* msgId:(long long)*msgId* size:(NSUInteger)*size* completion:(void ( ^ ) ( NSArray *messageListms , BMXError *error ))*aCompletionBlock*`

#### Discussion
Pull message history

#### Declared In
* `BMXChatManager.h`

<a name="//api/name/searchMessagesByKeyWords:refTime:size:directionType:completion:" title="searchMessagesByKeyWords:refTime:size:directionType:completion:"></a>
**Example**:
```
{% lanying_code_snippet repo="lanying-im-ios",class="BMXChatManager",function="retrieveHistoryBMXconversation:msgId:size:completion:" %}{% endlanying_code_snippet %}
```
### searchMessagesByKeyWords:refTime:size:directionType:completion:

Search for messages

`- (void)searchMessagesByKeyWords:(NSString *)*keywords* refTime:(NSTimeInterval)*refTime* size:(NSUInteger)*size* directionType:(BMXMessageDirection)*directionType* completion:(void ( ^ ) ( NSArray *array , BMXError *error ))*aCompletionBlock*`

#### Discussion
Search for messages

#### Declared In
* `BMXChatManager.h`

<a name="//api/name/sendMessage:" title="sendMessage:"></a>
**Example**:
```
{% lanying_code_snippet repo="lanying-im-ios",class="BMXChatManager",function="searchMessagesByKeyWords:refTime:size:directionType:completion:" %}{% endlanying_code_snippet %}
```
### sendMessage:

Send a message, and the message status change is notified via listener
*

`- (void)sendMessage:(BMXMessageObject *)*message*`

#### Discussion
Send a message, and the message status change is notified via listener
*

#### Declared In
* `BMXChatManager.h`

<a name="//api/name/transferingNum" title="transferingNum"></a>
**Example**:
```
{% lanying_code_snippet repo="lanying-im-ios",class="BMXChatManager",function="sendMessage:" %}{% endlanying_code_snippet %}
```
### transferingNum

Number of uploading/downloading files

`- (int)transferingNum`

#### Discussion
Number of uploading/downloading files

#### Declared In
* `BMXChatManager.h`

**Example**:
```
{% lanying_code_snippet repo="lanying-im-ios",class="BMXChatManager",function="transferingNum" %}{% endlanying_code_snippet %}
```
