# 6 File manipulation interface{#file}

## 6.1 Download avatar{#get\_\_file\_download\_avatar}

> GET /file/download/avatar

#### Request Header

| Parameter name | Data Type | Required | Description                                                                                                              |
| -------------- | --------- | -------- | ------------------------------------------------------------------------------------------------------------------------ |
| access-token   | string    | false    | Token                                                                                                                    |
| app\_id        | string    | true     | App ID                                                                                                                   |
| group\_id      | int64     | false    | This field can be set only if access-token is an Admin token, means call this interface as an Admin for this group ID    |
| user\_id       | int64     | false    | This field can be set only if access-token is a user token, means call this interface as a group member for this user ID |

#### Query Param

| Parameter name      | Data Type | Required | Description                                                                                                |
| ------------------- | --------- | -------- | ---------------------------------------------------------------------------------------------------------- |
| h                   | double    | false    | Image height                                                                                               |
| image\_type         | int32     | false    | Image type, 1: original, 2: thumbnail, 3: cover                                                            |
| object\_name        | string    | true     | Object name                                                                                                |
| sdk\_sign           | string    | false    | SDK signature                                                                                              |
| store\_token        | string    | false    | File token                                                                                                 |
| thumbnail\_strategy | int32     | false    | Thumbnail generation policy, 1 - generated by third-party server, 2 - generated by local server, default 1 |
| w                   | double    | false    | Image width                                                                                                |

#### Response Body

● 200 Response data format:JSON

#### Interface Description

>

## 6.2 Download chat file{#get\_\_file\_download\_chat}

> GET /file/download/chat

#### Request Header

| Parameter name | Data Type | Required | Description                                                                                                              |
| -------------- | --------- | -------- | ------------------------------------------------------------------------------------------------------------------------ |
| access-token   | string    | false    | Token                                                                                                                    |
| app\_id        | string    | true     | App ID                                                                                                                   |
| group\_id      | int64     | false    | This field can be set only if access-token is an Admin token, means call this interface as an Admin for this group ID    |
| user\_id       | int64     | false    | This field can be set only if access-token is a user token, means call this interface as a group member for this user ID |

#### Query Param

| Parameter name      | Data Type | Required | Description                                                                                                |
| ------------------- | --------- | -------- | ---------------------------------------------------------------------------------------------------------- |
| file\_sign          | string    | true     | File signature                                                                                             |
| format              | string    | false    | Audio file format to download, amr/mp3, default amr                                                        |
| h                   | double    | false    | Image height                                                                                               |
| image\_type         | int32     | false    | Image type, 1: original, 2: thumbnail, 3: cover                                                            |
| sdk\_sign           | string    | false    | SDK signature                                                                                              |
| source              | string    | false    | Request source, miniprogram, default ‘'                                                                    |
| store\_token        | string    | false    | File token                                                                                                 |
| thumbnail\_strategy | int32     | false    | Thumbnail generation policy, 1 - generated by third-party server, 2 - generated by local server, default 1 |
| w                   | double    | false    | Image width                                                                                                |

#### Response Body

● 200 Response data format:JSON

#### Interface Description

>

## 6.3 Get the URL of uploading group avatar{#get\_\_file\_upload\_avatar\_group}

> GET /file/upload/avatar/group

#### Request Header

| Parameter name | Data Type | Required | Description                                                                                                              |
| -------------- | --------- | -------- | ------------------------------------------------------------------------------------------------------------------------ |
| access-token   | string    | false    | Token                                                                                                                    |
| app\_id        | string    | true     | App ID                                                                                                                   |
| user\_id       | int64     | false    | This field can be set only if access-token is a user token, means call this interface as a group member for this user ID |

#### Query Param

| Parameter name | Data Type | Required | Description |
| -------------- | --------- | -------- | ----------- |
| group\_id      | int64     | true     | group\_id   |

#### Response Body

● 200 Response data format:JSON

| Parameter name             | Type   | Description                             |
| -------------------------- | ------ | --------------------------------------- |
| code                       | int32  | Return code, 200 is success             |
| data                       | object | Result data                             |
| ⇥ download\_url            | string | Download address                        |
| ⇥ oss\_body\_param         | object | OSS parameters to be set when uploading |
| ⇥ upload\_method           | string | Upload method: POST/PUT                 |
| ⇥ upload\_url              | string | Upload address                          |
| message                    | string | Error information, null means success   |
| #### Interface Description |        |                                         |

>

## 6.4 Get the URL of uploading user avatar{#get\_\_file\_upload\_avatar\_user}

> GET /file/upload/avatar/user

#### Request Header

| Parameter name | Data Type | Required | Description                                                                                                              |
| -------------- | --------- | -------- | ------------------------------------------------------------------------------------------------------------------------ |
| access-token   | string    | false    | Token                                                                                                                    |
| app\_id        | string    | true     | App ID                                                                                                                   |
| group\_id      | int64     | false    | This field can be set only if access-token is an Admin token, means call this interface as an Admin for this group ID    |
| user\_id       | int64     | false    | This field can be set only if access-token is a user token, means call this interface as a group member for this user ID |

#### Response Body

● 200 Response data format:JSON

| Parameter name             | Type   | Description                             |
| -------------------------- | ------ | --------------------------------------- |
| code                       | int32  | Return code, 200 is success             |
| data                       | object | Result data                             |
| ⇥ download\_url            | string | Download address                        |
| ⇥ oss\_body\_param         | object | OSS parameters to be set when uploading |
| ⇥ upload\_method           | string | Upload method: POST/PUT                 |
| ⇥ upload\_url              | string | Upload address                          |
| message                    | string | Error information, null means success   |
| #### Interface Description |        |                                         |

>

## 6.5 Get the URL of uploading chat file{#get\_\_file\_upload\_chat}

> GET /file/upload/chat

#### Request Header

| Parameter name | Data Type | Required | Description                                                                                                              |
| -------------- | --------- | -------- | ------------------------------------------------------------------------------------------------------------------------ |
| access-token   | string    | false    | Token                                                                                                                    |
| app\_id        | string    | true     | App ID                                                                                                                   |
| group\_id      | int64     | false    | This field can be set only if access-token is an Admin token, means call this interface as an Admin for this group ID    |
| user\_id       | int64     | false    | This field can be set only if access-token is a user token, means call this interface as a group member for this user ID |

#### Query Param

| Parameter name | Data Type | Required | Description                                                                                                                                                                                                                                    |
| -------------- | --------- | -------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| file\_type     | int32     | true     | File Type 100: plain chat file, 101: voice chat file (in .amr), 102: picture chat file, 103: video chat file, 104: voice chat file (in .mp3), 200: shared plain file, 201: shared voice file, 202: shared picture file, 203: shared video file |
| to\_id         | int64     | true     | to\_id                                                                                                                                                                                                                                         |
| to\_type       | int32     | false    | 1: User,2: Group                                                                                                                                                                                                                               |

#### Response Body

● 200 Response data format:JSON

| Parameter name             | Type   | Description                             |
| -------------------------- | ------ | --------------------------------------- |
| code                       | int32  | Return code, 200 is success             |
| data                       | object | Result data                             |
| ⇥ download\_url            | string | Download address                        |
| ⇥ oss\_body\_param         | object | OSS parameters to be set when uploading |
| ⇥ upload\_method           | string | Upload method: POST/PUT                 |
| ⇥ upload\_url              | string | Upload address                          |
| message                    | string | Error information, null means success   |
| #### Interface Description |        |                                         |

>

## 6.6 Get the URL of forwarded chat file{#get\_\_file\_upload\_forward}

> GET /file/upload/forward

#### Request Header

| Parameter name | Data Type | Required | Description                                                                                                              |
| -------------- | --------- | -------- | ------------------------------------------------------------------------------------------------------------------------ |
| access-token   | string    | false    | Token                                                                                                                    |
| app\_id        | string    | true     | App ID                                                                                                                   |
| group\_id      | int64     | false    | This field can be set only if access-token is an Admin token, means call this interface as an Admin for this group ID    |
| user\_id       | int64     | false    | This field can be set only if access-token is a user token, means call this interface as a group member for this user ID |

#### Query Param

| Parameter name | Data Type | Required | Description      |
| -------------- | --------- | -------- | ---------------- |
| file\_sign     | string    | true     | File signature   |
| to\_id         | int64     | true     | to\_id           |
| to\_type       | int32     | false    | 1: User,2: Group |

#### Response Body

● 200 Response data format:JSON

| Parameter name             | Type   | Description                           |
| -------------------------- | ------ | ------------------------------------- |
| code                       | int32  | Return code, 200 is success           |
| data                       | string | Result data                           |
| message                    | string | Error information, null means success |
| #### Interface Description |        |                                       |

>
