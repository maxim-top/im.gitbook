---
title: im::floo::floolib::BMXChatManager
summary: Chat manager 

---

# im::floo::floolib::BMXChatManager



Chat manager 

## Public Functions

|                | Name           |
| -------------- | -------------- |
| | **[BMXChatManager](classim_1_1floo_1_1floolib_1_1_b_m_x_chat_manager.md#function-bmxchatmanager)**([BMXChatService](classim_1_1floo_1_1floolib_1_1_b_m_x_chat_service.md) service) |
| void | **[sendMessage](classim_1_1floo_1_1floolib_1_1_b_m_x_chat_manager.md#function-sendmessage)**(final [BMXMessage](classim_1_1floo_1_1floolib_1_1_b_m_x_message.md) msg)<br>Send a message, and the message status change is notified via listener  |
| void | **[resendMessage](classim_1_1floo_1_1floolib_1_1_b_m_x_chat_manager.md#function-resendmessage)**(final [BMXMessage](classim_1_1floo_1_1floolib_1_1_b_m_x_message.md) msg)<br>Resend this message, and the message status change is notified via listener  |
| void | **[recallMessage](classim_1_1floo_1_1floolib_1_1_b_m_x_chat_manager.md#function-recallmessage)**(final [BMXMessage](classim_1_1floo_1_1floolib_1_1_b_m_x_message.md) msg)<br>Recall a message, and the message status change is notified via listener  |
| void | **[forwardMessage](classim_1_1floo_1_1floolib_1_1_b_m_x_chat_manager.md#function-forwardmessage)**(final BMXMessageList list, final [BMXConversation](classim_1_1floo_1_1floolib_1_1_b_m_x_conversation.md) to, final [BMXMessage](classim_1_1floo_1_1floolib_1_1_b_m_x_message.md) newMsg, final BMXCallBack callBack)<br> Merge and forward messages |
| void | **[forwardMessage](classim_1_1floo_1_1floolib_1_1_b_m_x_chat_manager.md#function-forwardmessage)**(final [BMXMessage](classim_1_1floo_1_1floolib_1_1_b_m_x_message.md) msg)<br>Simple forwarding messages, users should create forwarding messages first through BMXMessage:: createForwardMessage ()  |
| void | **[readAllMessage](classim_1_1floo_1_1floolib_1_1_b_m_x_chat_manager.md#function-readallmessage)**(final [BMXMessage](classim_1_1floo_1_1floolib_1_1_b_m_x_message.md) msg)<br>Mark this message and all previous messages as read, and synchronize to all current users' devices  |
| void | **[removeMessage](classim_1_1floo_1_1floolib_1_1_b_m_x_chat_manager.md#function-removemessage)**(final [BMXMessage](classim_1_1floo_1_1floolib_1_1_b_m_x_message.md) msg, final boolean synchronize)<br>Delete this message, which synchronizes to other devices of the current user  |
| void | **[removeMessage](classim_1_1floo_1_1floolib_1_1_b_m_x_chat_manager.md#function-removemessage)**(final [BMXMessage](classim_1_1floo_1_1floolib_1_1_b_m_x_message.md) msg) |
| void | **[ackMessage](classim_1_1floo_1_1floolib_1_1_b_m_x_chat_manager.md#function-ackmessage)**(final [BMXMessage](classim_1_1floo_1_1floolib_1_1_b_m_x_message.md) msg)<br>Send read acknowledgement  |
| void | **[readCancel](classim_1_1floo_1_1floolib_1_1_b_m_x_chat_manager.md#function-readcancel)**(final [BMXMessage](classim_1_1floo_1_1floolib_1_1_b_m_x_message.md) msg)<br>Set unread  |
| void | **[downloadThumbnail](classim_1_1floo_1_1floolib_1_1_b_m_x_chat_manager.md#function-downloadthumbnail)**(final [BMXMessage](classim_1_1floo_1_1floolib_1_1_b_m_x_message.md) msg)<br>Download thumbnail, downloading state changes and progress notified via listener. Thumbnail generation policy: 1 - generated by third-party server, 2 - generated by local server, default 1.  |
| void | **[downloadAttachment](classim_1_1floo_1_1floolib_1_1_b_m_x_chat_manager.md#function-downloadattachment)**(final [BMXMessage](classim_1_1floo_1_1floolib_1_1_b_m_x_message.md) msg)<br>Downloaded attachments, and download state changes and progress are notified via listener  |
| void | **[cancelDownloadAttachment](classim_1_1floo_1_1floolib_1_1_b_m_x_chat_manager.md#function-canceldownloadattachment)**(final [BMXMessage](classim_1_1floo_1_1floolib_1_1_b_m_x_message.md) msg)<br>Cancel attachment downloading  |
| int | **[transferingNum](classim_1_1floo_1_1floolib_1_1_b_m_x_chat_manager.md#function-transferingnum)**()<br>Number of uploading/downloading files  |
| void | **[insertMessages](classim_1_1floo_1_1floolib_1_1_b_m_x_chat_manager.md#function-insertmessages)**(final BMXMessageList list, final BMXCallBack callBack)<br>Insert a message  |
| void | **[getMessage](classim_1_1floo_1_1floolib_1_1_b_m_x_chat_manager.md#function-getmessage)**(final long msgId, final BMXDataCallBack< [BMXMessage](classim_1_1floo_1_1floolib_1_1_b_m_x_message.md) > callBack)<br>Read a message  |
| void | **[deleteConversation](classim_1_1floo_1_1floolib_1_1_b_m_x_chat_manager.md#function-deleteconversation)**(final long conversationId, final Boolean sync)<br> Delete a conversation  |
| void | **[openConversation](classim_1_1floo_1_1floolib_1_1_b_m_x_chat_manager.md#function-openconversation)**(final long conversationId, final BMXConversation.Type type, final boolean createIfNotExist, final BMXDataCallBack< [BMXConversation](classim_1_1floo_1_1floolib_1_1_b_m_x_conversation.md) > callBack)<br>Launch a conversation  |
| void | **[getAllConversations](classim_1_1floo_1_1floolib_1_1_b_m_x_chat_manager.md#function-getallconversations)**(final BMXDataCallBack< BMXConversationList > callBack)<br>Get all conversations  |
| void | **[getAllConversationsUnreadCount](classim_1_1floo_1_1floolib_1_1_b_m_x_chat_manager.md#function-getallconversationsunreadcount)**(final BMXDataCallBack< Integer > callBack)<br> Get number of unread messages for all conversations (unreads for individuals and groups marked as blocked is not counted)  |
| void | **[retrieveHistoryMessages](classim_1_1floo_1_1floolib_1_1_b_m_x_chat_manager.md#function-retrievehistorymessages)**(final [BMXConversation](classim_1_1floo_1_1floolib_1_1_b_m_x_conversation.md) conversation, final long refMsgId, final long size, final BMXDataCallBack< BMXMessageList > callBack)<br>Pull message history  |
| void | **[searchMessages](classim_1_1floo_1_1floolib_1_1_b_m_x_chat_manager.md#function-searchmessages)**(final String keywords, final long refTime, final long size, final BMXConversation.Direction arg4, final BMXDataCallBack< BMXMessageListList > callBack)<br>Search for messages  |
| void | **[searchMessages](classim_1_1floo_1_1floolib_1_1_b_m_x_chat_manager.md#function-searchmessages)**(final String keywords, final long refTime, final long size, final BMXDataCallBack< BMXMessageListList > callBack) |
| void | **[getGroupAckMessageUserIdList](classim_1_1floo_1_1floolib_1_1_b_m_x_chat_manager.md#function-getgroupackmessageuseridlist)**(final [BMXMessage](classim_1_1floo_1_1floolib_1_1_b_m_x_message.md) msg, final BMXDataCallBack< ListOfLongLong > callBack)<br>Get the list of user-ids that have read group messages  |
| void | **[addChatListener](classim_1_1floo_1_1floolib_1_1_b_m_x_chat_manager.md#function-addchatlistener)**([BMXChatServiceListener](classim_1_1floo_1_1floolib_1_1_b_m_x_chat_service_listener.md) listener)<br>Add chat listener  |
| void | **[removeChatListener](classim_1_1floo_1_1floolib_1_1_b_m_x_chat_manager.md#function-removechatlistener)**([BMXChatServiceListener](classim_1_1floo_1_1floolib_1_1_b_m_x_chat_service_listener.md) listener)<br>Remove chat listener  |

## Public Functions Documentation

### function BMXChatManager

```java
inline BMXChatManager(
    BMXChatService service
)
```


**Example**:
```
{% lanying_code_snippet repo="lanying-im-android",class="BMXChatManager",function="BMXChatManager" %}{% endlanying_code_snippet %}
```
### function sendMessage

```java
inline void sendMessage(
    final BMXMessage msg
)
```

Send a message, and the message status change is notified via listener 

**Parameters**: 

  * **msg** Message to be sent 


**Example**:
```
{% lanying_code_snippet repo="lanying-im-android",class="BMXChatManager",function="sendMessage" %}{% endlanying_code_snippet %}
```
### function resendMessage

```java
inline void resendMessage(
    final BMXMessage msg
)
```

Resend this message, and the message status change is notified via listener 

**Parameters**: 

  * **msg** Resent message 


**Example**:
```
{% lanying_code_snippet repo="lanying-im-android",class="BMXChatManager",function="resendMessage" %}{% endlanying_code_snippet %}
```
### function recallMessage

```java
inline void recallMessage(
    final BMXMessage msg
)
```

Recall a message, and the message status change is notified via listener 

**Parameters**: 

  * **msg** Recalled message 


**Example**:
```
{% lanying_code_snippet repo="lanying-im-android",class="BMXChatManager",function="recallMessage" %}{% endlanying_code_snippet %}
```
### function forwardMessage

```java
inline void forwardMessage(
    final BMXMessageList list,
    final BMXConversation to,
    final BMXMessage newMsg,
    final BMXCallBack callBack
)
```

 Merge and forward messages

**Parameters**: 

  * **list**  List of messages to be forwarded
  * **to** The conversation to which message is forwarded 
  * **newMsg** The newly generated single forwarded message from the merging list of messages to be forwarded
  * **callBack** [BMXErrorCode]


**Example**:
```
{% lanying_code_snippet repo="lanying-im-android",class="BMXChatManager",function="forwardMessage" %}{% endlanying_code_snippet %}
```
### function forwardMessage

```java
inline void forwardMessage(
    final BMXMessage msg
)
```

Simple forwarding messages, users should create forwarding messages first through BMXMessage:: createForwardMessage () 

**Parameters**: 

  * **msg**  Messages to be forwarded 


**Example**:
```
{% lanying_code_snippet repo="lanying-im-android",class="BMXChatManager",function="forwardMessage" %}{% endlanying_code_snippet %}
```
### function readAllMessage

```java
inline void readAllMessage(
    final BMXMessage msg
)
```

Mark this message and all previous messages as read, and synchronize to all current users' devices 

**Parameters**: 

  * **msg** The message for which all earlier messages need to be marked as read 


**Example**:
```
{% lanying_code_snippet repo="lanying-im-android",class="BMXChatManager",function="readAllMessage" %}{% endlanying_code_snippet %}
```
### function removeMessage

```java
inline void removeMessage(
    final BMXMessage msg,
    final boolean synchronize
)
```

Delete this message, which synchronizes to other devices of the current user 

**Parameters**: 

  * **msg** Message to be deleted 
  * **synchronize** Whether to synchronize to other devices, otherwise only the locally stored message will be deleted 


**Example**:
```
{% lanying_code_snippet repo="lanying-im-android",class="BMXChatManager",function="removeMessage" %}{% endlanying_code_snippet %}
```
### function removeMessage

```java
inline void removeMessage(
    final BMXMessage msg
)
```


**Example**:
```
{% lanying_code_snippet repo="lanying-im-android",class="BMXChatManager",function="removeMessage" %}{% endlanying_code_snippet %}
```
### function ackMessage

```java
inline void ackMessage(
    final BMXMessage msg
)
```

Send read acknowledgement 

**Example**:
```
{% lanying_code_snippet repo="lanying-im-android",class="BMXChatManager",function="ackMessage" %}{% endlanying_code_snippet %}
```
### function readCancel

```java
inline void readCancel(
    final BMXMessage msg
)
```

Set unread 

**Example**:
```
{% lanying_code_snippet repo="lanying-im-android",class="BMXChatManager",function="readCancel" %}{% endlanying_code_snippet %}
```
### function downloadThumbnail

```java
inline void downloadThumbnail(
    final BMXMessage msg
)
```

Download thumbnail, downloading state changes and progress notified via listener. Thumbnail generation policy: 1 - generated by third-party server, 2 - generated by local server, default 1. 

**Parameters**: 

  * **msg** Message requiring to download thumbnail 


**Example**:
```
{% lanying_code_snippet repo="lanying-im-android",class="BMXChatManager",function="downloadThumbnail" %}{% endlanying_code_snippet %}
```
### function downloadAttachment

```java
inline void downloadAttachment(
    final BMXMessage msg
)
```

Downloaded attachments, and download state changes and progress are notified via listener 

**Parameters**: 

  * **msg** Message requiring to download attachment 


**Example**:
```
{% lanying_code_snippet repo="lanying-im-android",class="BMXChatManager",function="downloadAttachment" %}{% endlanying_code_snippet %}
```
### function cancelDownloadAttachment

```java
inline void cancelDownloadAttachment(
    final BMXMessage msg
)
```

Cancel attachment downloading 

**Parameters**: 

  * **msg** Message requiring to download attachment 


**Example**:
```
{% lanying_code_snippet repo="lanying-im-android",class="BMXChatManager",function="cancelDownloadAttachment" %}{% endlanying_code_snippet %}
```
### function transferingNum

```java
inline int transferingNum()
```

Number of uploading/downloading files 

**Return**: Number of files in transfer 

**Example**:
```
{% lanying_code_snippet repo="lanying-im-android",class="BMXChatManager",function="transferingNum" %}{% endlanying_code_snippet %}
```
### function insertMessages

```java
inline void insertMessages(
    final BMXMessageList list,
    final BMXCallBack callBack
)
```

Insert a message 

**Parameters**: 

  * **list** Insert message list 
  * **callBack** [BMXErrorCode]


**Example**:
```
{% lanying_code_snippet repo="lanying-im-android",class="BMXChatManager",function="insertMessages" %}{% endlanying_code_snippet %}
```
### function getMessage

```java
inline void getMessage(
    final long msgId,
    final BMXDataCallBack< BMXMessage > callBack
)
```

Read a message 

**Parameters**: 

  * **msgId** id of the message which needs to be fetched 
  * **callBack** [BMXMessage](classim_1_1floo_1_1floolib_1_1_b_m_x_message.md)


**Example**:
```
{% lanying_code_snippet repo="lanying-im-android",class="BMXChatManager",function="getMessage" %}{% endlanying_code_snippet %}
```
### function deleteConversation

```java
inline void deleteConversation(
    final long conversationId,
    final Boolean sync
)
```

 Delete a conversation 

**Parameters**: 

  * **conversationId** Conversation id requiring to delete conversation 
  * **sync** Whether to delete the conversation on other devices synchronously, default false, means only delete the conversation on the current device 


**Example**:
```
{% lanying_code_snippet repo="lanying-im-android",class="BMXChatManager",function="deleteConversation" %}{% endlanying_code_snippet %}
```
### function openConversation

```java
inline void openConversation(
    final long conversationId,
    final BMXConversation.Type type,
    final boolean createIfNotExist,
    final BMXDataCallBack< BMXConversation > callBack
)
```

Launch a conversation 

**Parameters**: 

  * **conversationId** id of the conversation which needs to be opened 
  * **type** Conversation type, single/group chat. 
  * **createIfNotExist** Whether to create a local conversation if no conversation existing, default to create 
  * **callBack** [BMXConversation](classim_1_1floo_1_1floolib_1_1_b_m_x_conversation.md)


**Example**:
```
{% lanying_code_snippet repo="lanying-im-android",class="BMXChatManager",function="openConversation" %}{% endlanying_code_snippet %}
```
### function getAllConversations

```java
inline void getAllConversations(
    final BMXDataCallBack< BMXConversationList > callBack
)
```

Get all conversations 

**Parameters**: 

  * **callBack** BMXConversationList 


**Example**:
```
{% lanying_code_snippet repo="lanying-im-android",class="BMXChatManager",function="getAllConversations" %}{% endlanying_code_snippet %}
```
### function getAllConversationsUnreadCount

```java
inline void getAllConversationsUnreadCount(
    final BMXDataCallBack< Integer > callBack
)
```

 Get number of unread messages for all conversations (unreads for individuals and groups marked as blocked is not counted) 

**Parameters**: 

  * **callBack** Number of unreads 


**Example**:
```
{% lanying_code_snippet repo="lanying-im-android",class="BMXChatManager",function="getAllConversationsUnreadCount" %}{% endlanying_code_snippet %}
```
### function retrieveHistoryMessages

```java
inline void retrieveHistoryMessages(
    final BMXConversation conversation,
    final long refMsgId,
    final long size,
    final BMXDataCallBack< BMXMessageList > callBack
)
```

Pull message history 

**Parameters**: 

  * **conversation** Conversation for which message history needs to pull 
  * **refMsgId** Start message Id for pulling conversation messages 
  * **size** Maximum number of messages to pull 
  * **callBack** BMXErrorCode,Message list obtained by pull 


**Example**:
```
{% lanying_code_snippet repo="lanying-im-android",class="BMXChatManager",function="retrieveHistoryMessages" %}{% endlanying_code_snippet %}
```
### function searchMessages

```java
inline void searchMessages(
    final String keywords,
    final long refTime,
    final long size,
    final BMXConversation.Direction arg4,
    final BMXDataCallBack< BMXMessageListList > callBack
)
```

Search for messages 

**Parameters**: 

  * **keywords** Keyword for search 
  * **refTime** Start time of message search 
  * **size** Maximum number of messages to search 
  * **arg4** Message search direction, default (Direction::Up)means search from earlier messages. 
  * **callBack** BMXErrorCode,List of searched message results 


**Example**:
```
{% lanying_code_snippet repo="lanying-im-android",class="BMXChatManager",function="searchMessages" %}{% endlanying_code_snippet %}
```
### function searchMessages

```java
inline void searchMessages(
    final String keywords,
    final long refTime,
    final long size,
    final BMXDataCallBack< BMXMessageListList > callBack
)
```


**Example**:
```
{% lanying_code_snippet repo="lanying-im-android",class="BMXChatManager",function="searchMessages" %}{% endlanying_code_snippet %}
```
### function getGroupAckMessageUserIdList

```java
inline void getGroupAckMessageUserIdList(
    final BMXMessage msg,
    final BMXDataCallBack< ListOfLongLong > callBack
)
```

Get the list of user-ids that have read group messages 

**Parameters**: 

  * **msg** Message requiring to get list of read user ids 
  * **callBack** [BMXErrorCode], list of user ids that have read this message 


**Example**:
```
{% lanying_code_snippet repo="lanying-im-android",class="BMXChatManager",function="getGroupAckMessageUserIdList" %}{% endlanying_code_snippet %}
```
### function addChatListener

```java
inline void addChatListener(
    BMXChatServiceListener listener
)
```

Add chat listener 

**Parameters**: 

  * **listener** Chat listener 


**Example**:
```
{% lanying_code_snippet repo="lanying-im-android",class="BMXChatManager",function="addChatListener" %}{% endlanying_code_snippet %}
```
### function removeChatListener

```java
inline void removeChatListener(
    BMXChatServiceListener listener
)
```

Remove chat listener 

**Parameters**: 

  * **listener** Chat listener 


**Example**:
```
{% lanying_code_snippet repo="lanying-im-android",class="BMXChatManager",function="removeChatListener" %}{% endlanying_code_snippet %}
```
-------------------------------

Updated on 2022-01-26 at 17:18:31 +0800